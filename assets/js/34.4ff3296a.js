(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{650:function(s,n,a){"use strict";a.r(n);var t=a(7),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#_1-1、资源对象的配置格式"}},[s._v("1.1、资源对象的配置格式")])]),a("li",[a("a",{attrs:{href:"#_1-2、和解循环-reconciliation-loop"}},[s._v("1.2、和解循环（Reconciliation Loop）")])]),a("li",[a("a",{attrs:{href:"#_1-3、管理资源对象"}},[s._v("1.3、管理资源对象")])]),a("li",[a("a",{attrs:{href:"#_1-4、k8s资源对象管理形式"}},[s._v("1.4、K8s资源对象管理形式")])]),a("li",[a("a",{attrs:{href:"#_2-1、kubernetes资源配置对象官方手册"}},[s._v("2.1、kubernetes资源配置对象官方手册")])]),a("li",[a("a",{attrs:{href:"#_2-2、namespace资源yaml格式资源配置清单创建"}},[s._v("2.2、NameSpace资源YAML格式资源配置清单创建")])]),a("li",[a("a",{attrs:{href:"#_2-3、pod资源yaml格式资源配置清单创建-无控制器控制-自主式pod"}},[s._v("2.3、Pod资源YAML格式资源配置清单创建（无控制器控制-自主式Pod）")]),a("ul",[a("li",[a("a",{attrs:{href:"#_2-3-1、使用模板导出方式定义pod"}},[s._v("2.3.1、使用模板导出方式定义Pod")])]),a("li",[a("a",{attrs:{href:"#_2-3-2、手动定义一个pod-一个pod运行多个容器"}},[s._v("2.3.2、手动定义一个Pod（一个pod运行多个容器）")])])])]),a("li",[a("a",{attrs:{href:"#_2-4、kubectl-exec-连接"}},[s._v("2.4、kubectl exec 连接")]),a("ul",[a("li",[a("a",{attrs:{href:"#_2-4-1、kubectl-exec-连接进行pod的容器的交互式接口"}},[s._v("2.4.1、kubectl exec 连接进行pod的容器的交互式接口")])])])]),a("li",[a("a",{attrs:{href:"#_2-5、kubectl-logs-查看pod日志"}},[s._v("2.5、kubectl logs 查看pod日志")]),a("ul",[a("li",[a("a",{attrs:{href:"#_2-5-1、kubectl-logs-查看pod中容器的日志信息"}},[s._v("2.5.1、kubectl logs 查看pod中容器的日志信息")])])])]),a("li",[a("a",{attrs:{href:"#_2-6、pod网络"}},[s._v("2.6、Pod网络")]),a("ul",[a("li",[a("a",{attrs:{href:"#_2-6-1、运行一个pod使用共享宿主机的网络-pods-spec-hostnetwork"}},[s._v("2.6.1、运行一个pod使用共享宿主机的网络(pods.spec.hostNetwork)")])]),a("li",[a("a",{attrs:{href:"#_2-6-2、pods-spec-containers-ports指定容器端口暴漏-仅绑定容器运行的一个宿主机的地址即单一端口映射"}},[s._v("2.6.2、pods.spec.containers.ports指定容器端口暴漏（仅绑定容器运行的一个宿主机的地址即单一端口映射）")])])])]),a("li",[a("a",{attrs:{href:"#问题思考"}},[s._v("问题思考")])])])]),a("p"),s._v(" "),a("h1",{attrs:{id:"一、pod资源清单介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、pod资源清单介绍"}},[s._v("#")]),s._v(" 一、Pod资源清单介绍")]),s._v(" "),a("h2",{attrs:{id:"_1-1、资源对象的配置格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1、资源对象的配置格式"}},[s._v("#")]),s._v(" 1.1、资源对象的配置格式")]),s._v(" "),a("ul",[a("li",[s._v("资源对象的配置格式\n"),a("ul",[a("li",[s._v('API Server接受和返回的所有JSON对象都遵循同一个模式，它们都具有“Kind" 和 “api version” 字段，用于标识对象所属的资源类型、API群组及相关的版本')]),s._v(" "),a("li",[s._v("大多数的对象或列表类型的资源还具有三个嵌套型的字典 metadata、apec和status\n"),a("ul",[a("li",[a("code",[s._v("metadata")]),s._v(" : 字段为资源提供的元数据信息，例如：名称、隶属的名称空间和标签等")]),s._v(" "),a("li",[a("code",[s._v("apec")]),s._v("：用于定义用户期望的状态，不同的资源类型，其状态的意义各有不同，例如pod资源最为核心的功能在于运行容器")]),s._v(" "),a("li",[a("code",[s._v("stats")]),s._v(" ：则记录着活动对象当前的状态，它由kubernetes系统自行维护，对于用户来说为只读字段")])])]),s._v(" "),a("li",[s._v("kubectl api-resources 命令可以获取集群支持使用的所有资源类型")])])])]),s._v(" "),a("h2",{attrs:{id:"_1-2、和解循环-reconciliation-loop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、和解循环-reconciliation-loop"}},[s._v("#")]),s._v(" 1.2、和解循环（Reconciliation Loop）")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("和解循环（Reconciliation Loop）")]),s._v(" "),a("ul",[a("li",[s._v("客户端向API Server提交POST请求以创建对象\n"),a("ul",[a("li",[s._v("通过JSON格式的body提交")]),s._v(" "),a("li",[s._v("YAML格式需要事先完成向JSON的转换")]),s._v(" "),a("li",[s._v("对象配置信息保存于etcd中，其定义出的状态也成为“期望的状态（Spec）”")])])]),s._v(" "),a("li",[s._v("控制器负责将其创建为Kubernetes集群上的具体对象（活动对象），并确保其当前状态（status）与用户定义的期望状态相同；\n"),a("ul",[a("li",[s._v("stats由控制器通过各界循环（loop）不间断地监控着相关地对象地状态，在对象地当前状态发生改变时运行合适地操作当前状态无限接近期望地状态")])])])])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2020.cnblogs.com/blog/1600332/202106/1600332-20210613195350520-1830519977.png",alt:"image"}})]),s._v(" "),a("p",[s._v("04-Pod资源清单配置基础（基础命令、Pod网络）\nE编辑 F收藏 W关注中 S分享\n页面… 马哥-Kubernetes\n跳到banner的尾部\n回到标题开始\n转至元数据结尾\n由 zhe.dai创建, 最后修改于十一月 05, 2020转至元数据起始\n一、Pod资源清单介绍\n1.1、资源对象的配置格式\n1.2、和解循环（Reconciliation Loop）\n1.3、管理资源对象\n1.4、K8s资源对象管理形式\n二、资源配置对象\n2.1、kubernetes资源配置对象官方手册\n2.2、NameSpace资源YAML格式资源配置清单创建\n2.3、Pod资源YAML格式资源配置清单创建（无控制器控制-自主式Pod）\n2.3.1、使用模板导出方式定义Pod\n2.3.2、手动定义一个Pod（一个pod运行多个容器）\n2.4、kubectl exec 连接\n2.4.1、kubectl exec 连接进行pod的容器的交互式接口\n2.5、kubectl logs 查看pod日志\n2.5.1、kubectl logs 查看pod中容器的日志信息\n2.6、Pod网络\n2.6.1、运行一个pod使用共享宿主机的网络(pods.spec.hostNetwork)\n2.6.2、pods.spec.containers.ports指定容器端口暴漏（仅绑定容器运行的一个宿主机的地址即单一端口映射）\n一、Pod资源清单介绍\n1.1、资源对象的配置格式\n资源对象的配置格式")]),s._v(" "),a("p",[s._v('API Server接受和返回的所有JSON对象都遵循同一个模式，它们都具有“Kind" 和 “api version” 字段，用于标识对象所属的资源类型、API群组及相关的版本\n大多数的对象或列表类型的资源还具有三个嵌套型的字典 metadata、apec和status\nmetadata : 字段为资源提供的元数据信息，例如：名称、隶属的名称空间和标签等\napec：用于定义用户期望的状态，不同的资源类型，其状态的意义各有不同，例如pod资源最为核心的功能在于运行容器\nstats ：则记录着活动对象当前的状态，它由kubernetes系统自行维护，对于用户来说为只读字段\nkubectl api-resources 命令可以获取集群支持使用的所有资源类型\n1.2、和解循环（Reconciliation Loop）\n和解循环（Reconciliation Loop）')]),s._v(" "),a("p",[s._v("客户端向API Server提交POST请求以创建对象\n通过JSON格式的body提交\nYAML格式需要事先完成向JSON的转换\n对象配置信息保存于etcd中，其定义出的状态也成为“期望的状态（Spec）”\n控制器负责将其创建为Kubernetes集群上的具体对象（活动对象），并确保其当前状态（status）与用户定义的期望状态相同；\nstats由控制器通过各界循环（loop）不间断地监控着相关地对象地状态，在对象地当前状态发生改变时运行合适地操作当前状态无限接近期望地状态")]),s._v(" "),a("h2",{attrs:{id:"_1-3、管理资源对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3、管理资源对象"}},[s._v("#")]),s._v(" 1.3、管理资源对象")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2020.cnblogs.com/blog/1600332/202106/1600332-20210613195408264-1553143720.png",alt:"image"}})]),s._v(" "),a("h2",{attrs:{id:"_1-4、k8s资源对象管理形式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4、k8s资源对象管理形式"}},[s._v("#")]),s._v(" 1.4、K8s资源对象管理形式")]),s._v(" "),a("ul",[a("li",[s._v("kubectl的命令可分为三类：\n"),a("ul",[a("li",[a("code",[s._v("陈述式命令（Imperative Commands）")]),s._v(" "),a("ul",[a("li",[s._v("即此前用到的run、expose、delete和get等命令，它们直接多用于Kubernetes系统上的活动给对象，简单易用，但是不支持代码复用、修改复审即审计日志等功能，这些功能的实现通常要依赖于资源配置文件中，这些问问你进也被称为资源清单")])])]),s._v(" "),a("li",[a("code",[s._v("陈述式对象配置 （Imperative Object Configuration）")])]),s._v(" "),a("li",[a("code",[s._v("声明式对象配置 （Declarative Object Configuration）")])])])]),s._v(" "),a("li",[s._v("配置对象指的是：要使用json或者使用YAML格式配置文件具体而清晰的定义出一个资源所期望的状态，也可以使用两种方式进行资源创建，使用create命令称为陈述式对象配置，使用apply命令称为声明式对象配置")]),s._v(" "),a("li",[s._v("参考博客地址：https://blog.csdn.net/dkfajsldfsdfsd/article/details/80916543")])]),s._v(" "),a("h1",{attrs:{id:"二、资源配置对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、资源配置对象"}},[s._v("#")]),s._v(" 二、资源配置对象")]),s._v(" "),a("h2",{attrs:{id:"_2-1、kubernetes资源配置对象官方手册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、kubernetes资源配置对象官方手册"}},[s._v("#")]),s._v(" 2.1、kubernetes资源配置对象官方手册")]),s._v(" "),a("ul",[a("li",[s._v("https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.16/")])]),s._v(" "),a("h2",{attrs:{id:"_2-2、namespace资源yaml格式资源配置清单创建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、namespace资源yaml格式资源配置清单创建"}},[s._v("#")]),s._v(" 2.2、NameSpace资源YAML格式资源配置清单创建")]),s._v(" "),a("ul",[a("li",[s._v("namespace资源创建语法格式参考：https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.16/#namespace-v1-core")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###############查看陈述式创建的名称空间###############")]),s._v("\nbasic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get ns default -o yaml")]),s._v("\napiVersion: v1\nkind: Namespace\nmetadata:\n  creationTimestamp: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-04-24T16:49:33Z"')]),s._v("\n  managedFields:\n  - apiVersion: v1\n    fieldsType: FieldsV1\n    fieldsV1:\n      f:status:\n        f:phase: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    manager: kube-apiserver\n    operation: Update\n    time: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-04-24T16:49:33Z"')]),s._v("\n  name: default\n  resourceVersion: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"153"')]),s._v("\n  selfLink: /api/v1/namespaces/default\n  uid: d8651cc1-a2fb-4e2b-81cc-727f18c7080f\nspec:\n  finalizers:\n  - kubernetes\nstatus:\n  phase: Active     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 相位即状态，如果不指定默认也会存在")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#####################################################")]),s._v("\n \n \n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、创建配置清单目录\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir mainfests")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd mainfests/")]),s._v("\n \n    mainfests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir basic")]),s._v("\n    mainfests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd basic/")]),s._v("\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n        /root/mainfests/basic\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建YAML格式的资源配置清单文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、创建简单一个YAML格式的资源类型为名称空间\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat develop-ns.yaml")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用kubectl get ns default -o yaml --export命令导出一份配置清单加以修改")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#namespace所属的群组")]),s._v("\n    apiVersion: v1\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#名称空间类型，首字母大写")]),s._v("\n    kind: Namespace\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#元数据定义")]),s._v("\n    metadata:\n      name: develop\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#所期望的状态，但是对于名称空间来讲没有什么可期望的状态，所以spec字段其实可以不写")]),s._v("\n    spec:\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#表示由k8s来回收")]),s._v("\n      finalizers:\n      - kubernetes\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、确保k8s集群上没有将要创建的develop名称空间\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get ns")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#陈述式对象配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、（陈述式对象配置 ）使用编写好的YAML清单创建名称空间   \n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create -f develop-ns.yaml")]),s._v("\n        namespace/develop created\n \n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get ns")]),s._v("\n        NAME              STATUS   AGE\n        default           Active   24h\n        develop           Active   15s\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#声明式对象配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、（声明式对象配置）创建一个名称为生产环境的名称空间\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat pord-ns.yaml")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用kubectl get ns default -o yaml --export命令导出一份配置清单加以修改")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#namespace所属的群组")]),s._v("\n    apiVersion: v1\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#名称空间类型，首字母大写")]),s._v("\n    kind: Namespace\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#元数据定义")]),s._v("\n    metadata:\n      name: prod\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#所期望的状态，但是对于名称空间来讲没有什么可期望的状态")]),s._v("\n    spec:\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#表示由k8s来回收")]),s._v("\n      finalizers:\n      - kubernetes\n \n     basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl apply -f pord-ns.yaml")]),s._v("\n        namespace/prod created\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get ns")]),s._v("\n        NAME              STATUS   AGE\n        default           Active   24h\n        develop           Active   4m6s\n        prod              Active   3s\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#声明式对象配置优点：如果使用同一YAML配置文件创建多次则会自动检测是否存在此资源并告知已经存在而且还支持再次目录下的YAML进行资源创建或修改，但是陈述式对象配置则会报错")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("、声明式对象及陈述性对象对比\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#陈述式 --\x3e 陈述式则报错为资源已经存在")]),s._v("\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create -f develop-ns.yaml")]),s._v("\n        Error from server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("AlreadyExists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": error when creating "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"develop-ns.yaml"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" namespaces "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"develop"')]),s._v(" already exists\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#声明式 --\x3e 声明式则显示资源并未进行改变")]),s._v("\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl apply -f pord-ns.yaml")]),s._v("\n        namespace/prod unchanged\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br")])]),a("h2",{attrs:{id:"_2-3、pod资源yaml格式资源配置清单创建-无控制器控制-自主式pod"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3、pod资源yaml格式资源配置清单创建-无控制器控制-自主式pod"}},[s._v("#")]),s._v(" 2.3、Pod资源YAML格式资源配置清单创建（无控制器控制-自主式Pod）")]),s._v(" "),a("h3",{attrs:{id:"_2-3-1、使用模板导出方式定义pod"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1、使用模板导出方式定义pod"}},[s._v("#")]),s._v(" 2.3.1、使用模板导出方式定义Pod")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、使用之前手动创建pod资源导出一个YAML格式的清单文件\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods myapp-5c6976696c-8kpqh -o yaml --export > pod-demo-yaml")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、编辑导出的YAML\nbasic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat pod-demo-yaml")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#pod所属的群组")]),s._v("\napiVersion: v1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#资源的类型为pod")]),s._v("\nkind: Pod\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#元数据")]),s._v("\nmetadata:\n  creationTimestamp: null   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建启动时间会自动修改")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#generateName名称为手动创建自动生成的，手动定义使用name")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#generateName: myapp-5c6976696c-")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#pod名称")]),s._v("\n  name: pod-demo\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#pod使用的名称空间")]),s._v("\n  namespace: develop\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义pod的属性")]),s._v("\nspec:\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#容器")]),s._v("\n  containers:\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这个容器使用的镜像文件")]),s._v("\n  - image: ikubernetes/myapp:v1\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#imagePullPolicy如果调度的node集群上没有则使用imagePullPolicy定义有三个值")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   Always：总是拉取 pul")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   IfNotPresent：默认值,本地有则使用本地镜像,不拉取")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   Never：只使用本地镜像，从不拉取）")]),s._v("\n    imagePullPolicy: IfNotPresent\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#容器的名称")]),s._v("\n    name: myapp\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义这个容器期望和拥有所使用的资源")]),s._v("\n    resources: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#dnsPolicy使用什么样的dns策略")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ClusterFirst：表示优先使用k8s集群中的dns服务")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  None：无任何策略")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  Default：默认")]),s._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  ClusterFirstWithHostNet 集群 DNS 优先，并伴随着使用宿主机网络）")]),s._v("\n  dnsPolicy: ClusterFirst\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#是否允许service引用此pod")]),s._v("\n  enableServiceLinks: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#（节点绑定）此pod运行所调度运行的node节点，如果声明则此pod只能运行在此node上，如果不声明则可以由scheduler调度器随机调度")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#nodeName: 192.168.1.141")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#pod优先级")]),s._v("\n  priority: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#restartPolicy定义Pod时，可以指定restartPolicy字段，表明此Pod中的容器在何种条件下会重启。restartPolicy拥有三个候选值")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   Always：只要退出就重启")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   OnFailure：失败退出时（exit code不为0）才重启")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   Never：永远不重启")]),s._v("\n  restartPolicy: Always\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用哪个调度器进行调度此pod")]),s._v("\n  schedulerName: default-scheduler\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义安全上下文")]),s._v("\n  securityContext: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、使用声明式对象配置指向YAML资源配置文件创建Pod\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl apply -f pod-demo-yaml")]),s._v("\n        pod/pod-demo created\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、指定查看develop名称空间下的pod\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -n develop")]),s._v("\n        NAME       READY   STATUS    RESTARTS   AGE\n        pod-demo   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          36s\n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、使用kubectl explain 资源    可以查看此资源的创建讲解\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl explain pods")]),s._v("\n    KIND:     Pod\n    VERSION:  v1\n \n    DESCRIPTION:\n         Pod is a collection of containers that can run on a host. This resource is\n         created by clients and scheduled onto hosts.\n \n    FIELDS:\n       apiVersion   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("string"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n         APIVersion defines the versioned schema of this representation of an\n         object. Servers should convert recognized schemas to the latest internal\n         value, and may reject unrecognized values. More info:\n         https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#resources")]),s._v("\n \n       kind "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("string"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n         Kind is a string value representing the REST resource this object\n         represents. Servers may infer this from the endpoint the client submits\n         requests to. Cannot be updated. In CamelCase. More info:\n         https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#types-kinds")]),s._v("\n \n       metadata "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Object"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n         Standard object's metadata. More info:\n         https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#metadata")]),s._v("\n \n       spec "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Object"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n         Specification of the desired behavior of the pod. More info:\n         https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#spec-and-status")]),s._v("\n \n       status   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("Object"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n         Most recently observed status of the pod. This data may not be up to date.\n         Populated by the system. Read-only. More info:\n         https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#spec-and-status")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#以上显示写为 <Object>都可以使用字段名称显示的更详细")]),s._v("\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl explain pods.apiVersion")]),s._v("\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl explain pods.metadata")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br")])]),a("h3",{attrs:{id:"_2-3-2、手动定义一个pod-一个pod运行多个容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2、手动定义一个pod-一个pod运行多个容器"}},[s._v("#")]),s._v(" 2.3.2、手动定义一个Pod（一个pod运行多个容器）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、手动写一个pod资源配置文件\nbasic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat pod-demo-2.yaml")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#pod所属的群组")]),s._v("\napiVersion: v1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#资源类型为pod")]),s._v("\nkind: Pod\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#元数据")]),s._v("\nmetadata:\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#pod名称")]),s._v("\n  name: pod-demo\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#pod所属的名称空间,如果不指定可在apply时使用-n选项")]),s._v("\n  namespace: prod\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义pod的属性")]),s._v("\nspec:\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#容器")]),s._v("\n  containers:\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#第一个容器的名称")]),s._v("\n  - name: myapp\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这个容器使用的镜像文件")]),s._v("\n    image: ikubernetes/myapp:v1\n    imagePullPolicy: IfNotPresent   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 总是去互联网上拖最新的")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#第二个容器的名称")]),s._v("\n  - name: bbox\n    image: busybox:latest\n    imagePullPolicy: IfNotPresent\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义这个容器启动运行的命令")]),s._v("\n    command: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sleep 86400"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl explain pods.spec.containers.command")]),s._v("\n \n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 也可以换种command写法")]),s._v("\n    command:\n    - /bin/sh\n    - -c\n    - "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sleep 86400"')]),s._v("\n \n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、使用aply声明式对象创建pod\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl apply -f pod-demo-2.yaml")]),s._v("\n        pod/pod-demo created\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、查看指定的名称空间下的pod\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -n prod")]),s._v("\n        NAME       READY   STATUS    RESTARTS   AGE\n        pod-demo   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          72s\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、查看运行的pod的详细信息\nbasic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -n prod -o yaml")]),s._v("\napiVersion: v1\nitems:\n- apiVersion: v1\n  kind: Pod\n  metadata:\n    annotations:\n      kubectl.kubernetes.io/last-applied-configuration: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apiVersion"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kind"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Pod"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"metadata"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"annotations"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pod-demo"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"namespace"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prod"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spec"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"containers"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"image"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ikubernetes/myapp:v1"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"imagePullPolicy"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IfNotPresent"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myapp"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"command"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sleep 86400"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"image"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"busybox:latest"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"imagePullPolicy"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IfNotPresent"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bbox"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    creationTimestamp: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-18T14:32:32Z"')]),s._v("\n    name: pod-demo\n    namespace: prod\n    resourceVersion: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"417615"')]),s._v("\n    selfLink: /api/v1/namespaces/prod/pods/pod-demo\n    uid: f453f403-cb5d-4636-bfdb-9711a7120cad\n  spec:\n    containers:\n    - image: ikubernetes/myapp:v1\n      imagePullPolicy: IfNotPresent\n      name: myapp\n      resources: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      terminationMessagePath: /dev/termination-log\n      terminationMessagePolicy: File\n      volumeMounts:\n      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\n        name: default-token-hs4w4\n        readOnly: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    - command:\n      - /bin/sh\n      - -c\n      - "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("86400")]),s._v("\n      image: busybox:latest\n      imagePullPolicy: IfNotPresent\n      name: bbox\n      resources: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      terminationMessagePath: /dev/termination-log\n      terminationMessagePolicy: File\n      volumeMounts:\n      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\n        name: default-token-hs4w4\n        readOnly: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    dnsPolicy: ClusterFirst\n    enableServiceLinks: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    nodeName: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.51\n    priority: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    restartPolicy: Always\n    schedulerName: default-scheduler\n    securityContext: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    serviceAccount: default\n    serviceAccountName: default\n    terminationGracePeriodSeconds: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n    tolerations:\n    - effect: NoExecute\n      key: node.kubernetes.io/not-ready\n      operator: Exists\n      tolerationSeconds: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v("\n    - effect: NoExecute\n      key: node.kubernetes.io/unreachable\n      operator: Exists\n      tolerationSeconds: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v("\n    volumes:\n    - name: default-token-hs4w4\n      secret:\n        defaultMode: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("420")]),s._v("\n        secretName: default-token-hs4w4\n  status:\n    conditions:\n    - lastProbeTime: null\n      lastTransitionTime: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-18T14:32:32Z"')]),s._v("\n      status: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"True"')]),s._v("\n      type: Initialized\n    - lastProbeTime: null\n      lastTransitionTime: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-18T14:32:50Z"')]),s._v("\n      status: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"True"')]),s._v("\n      type: Ready\n    - lastProbeTime: null\n      lastTransitionTime: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-18T14:32:50Z"')]),s._v("\n      status: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"True"')]),s._v("\n      type: ContainersReady\n    - lastProbeTime: null\n      lastTransitionTime: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-18T14:32:32Z"')]),s._v("\n      status: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"True"')]),s._v("\n      type: PodScheduled\n    containerStatuses:\n    - containerID: docker://917912c11e895b6d6f21d0d3316e474b6e3789db990f70ae12d45b84744d2a30\n      image: busybox:latest\n      imageID: docker-pullable://busybox@sha256:6915be4043561d64e0ab0f8f098dc2ac48e077fe23f488ac24b665166898115a\n      lastState: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      name: bbox\n      ready: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n      restartCount: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      started: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n      state:\n        running:\n          startedAt: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-18T14:32:49Z"')]),s._v("\n    - containerID: docker://8dccb799765fdf915cb20bc6d92b24f0f200d95587ebd00fc4da3ac1879e8a38\n      image: ikubernetes/myapp:v1\n      imageID: docker-pullable://ikubernetes/myapp@sha256:9c3dc30b5219788b2b8a4b065f548b922a34479577befb54b03330999d30d513\n      lastState: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      name: myapp\n      ready: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n      restartCount: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      started: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n      state:\n        running:\n          startedAt: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-18T14:32:33Z"')]),s._v("\n    hostIP: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.51\n    phase: Running\n    podIP: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.81\n    podIPs:\n    - ip: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.81\n    qosClass: BestEffort\n    startTime: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-18T14:32:32Z"')]),s._v("\nkind: List\nmetadata:\n  resourceVersion: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  selfLink: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、删除此前使用YAML资源配置文件删除此pod\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl delete -f hostname.yaml")]),s._v("\n        pod "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mypod"')]),s._v(" deleted\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br")])]),a("h2",{attrs:{id:"_2-4、kubectl-exec-连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4、kubectl-exec-连接"}},[s._v("#")]),s._v(" 2.4、kubectl exec 连接")]),s._v(" "),a("h3",{attrs:{id:"_2-4-1、kubectl-exec-连接进行pod的容器的交互式接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-1、kubectl-exec-连接进行pod的容器的交互式接口"}},[s._v("#")]),s._v(" 2.4.1、kubectl exec 连接进行pod的容器的交互式接口")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、查看kubectl exec帮助\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl exec -h")]),s._v("\n    Usage:\n         kubectl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("POD "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" TYPE/NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-c CONTAINER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" -- COMMAND "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、指定连入时指定哪个名称空间下的Pod资源下的容器的名称\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl exec pod-demo -c bbox -n prod -it -- /bin/sh")]),s._v("\n    / "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、同一Pod中容器共享同一网络名称空间\n    / "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netstat -tnl")]),s._v("\n    Active Internet connections "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("only servers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Proto Recv-Q Send-Q Local Address           Foreign Address         State      \n    tcp        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:80              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*               LISTEN     \n    / "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ip a")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": lo: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("LOOPBACK,UP,LOWER_UP"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v(" qdisc noqueue qlen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n        link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n        inet "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1/8 scope "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" lo\n           valid_lft forever preferred_lft forever\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": eth0@if7: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" mtu "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1454")]),s._v(" qdisc noqueue\n        link/ether 9a:2a:38:8d:6b:c1 brd ff:ff:ff:ff:ff:ff\n        inet "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.81/32 brd "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.81 scope global eth0\n           valid_lft forever preferred_lft forever\n    / "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget -O - -q  192.168.1.81")]),s._v("\n        Hello MyApp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Version: v1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostname.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Pod Name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h2",{attrs:{id:"_2-5、kubectl-logs-查看pod日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5、kubectl-logs-查看pod日志"}},[s._v("#")]),s._v(" 2.5、kubectl logs 查看pod日志")]),s._v(" "),a("h3",{attrs:{id:"_2-5-1、kubectl-logs-查看pod中容器的日志信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-1、kubectl-logs-查看pod中容器的日志信息"}},[s._v("#")]),s._v(" 2.5.1、kubectl logs 查看pod中容器的日志信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、查看命令的使用帮助\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl logs -h")]),s._v("\n    Usage:\n        kubectl logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("POD "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" TYPE/NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-c CONTAINER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n \n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、查看指定哪个名称空间下的Pod资源下的容器的名称的日志\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl logs pod-demo -n prod -c myapp")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.81 - - "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("/Feb/2020:14:44:44 +0000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GET / HTTP/1.1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Wget"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl logs pod-demo -n prod -c bbox")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、如果pod中仅有一个容器则仅需要指定pod查看日志即可\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE\n        myapp-5c6976696c-8kpqh          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          29h\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl logs myapp-5c6976696c-8kpqh")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.177 - - "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("/Feb/2020:08:58:58 +0000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GET / HTTP/1.1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"curl/7.29.0"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.177 - - "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("/Feb/2020:08:59:27 +0000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GET /hostname.html HTTP/1.1"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"curl/7.29.0"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h2",{attrs:{id:"_2-6、pod网络"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6、pod网络"}},[s._v("#")]),s._v(" 2.6、Pod网络")]),s._v(" "),a("h3",{attrs:{id:"_2-6-1、运行一个pod使用共享宿主机的网络-pods-spec-hostnetwork"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-1、运行一个pod使用共享宿主机的网络-pods-spec-hostnetwork"}},[s._v("#")]),s._v(" 2.6.1、运行一个pod使用共享宿主机的网络(pods.spec.hostNetwork)")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、手动写一个pod资源配置文件\nbasic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat hostname.yaml")]),s._v("\napiVersion: v1\nkind: Pod\nmetadata:\n  name: mypod\n  namespace: default\nspec:\n  containers:\n  - name: myapp\n    image: ikubernetes/myapp:v1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启共享宿主机网络端口")]),s._v("\n  hostNetwork: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、使用aply声明式对象创建pod\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl apply -f mainfests/basic/hostname.yaml")]),s._v("\n        pod/mypod created\n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、验证此pod是否运行宿主机网络 （pod资源的地址就时node节点的地址即监听宿主机的名称空间）\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -o wide")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE   IP              NODE            NOMINATED NODE   READINESS GATES\n        mypod                           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          40s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.185   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.185   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl  192.168.1.185")]),s._v("\n    Hello MyApp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Version: v1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostname.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Pod Name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl  192.168.1.185/hostname.html")]),s._v("\n    k8s.node2    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里的主机名为宿主机名名称")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("h3",{attrs:{id:"_2-6-2、pods-spec-containers-ports指定容器端口暴漏-仅绑定容器运行的一个宿主机的地址即单一端口映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-2、pods-spec-containers-ports指定容器端口暴漏-仅绑定容器运行的一个宿主机的地址即单一端口映射"}},[s._v("#")]),s._v(" 2.6.2、pods.spec.containers.ports指定容器端口暴漏（仅绑定容器运行的一个宿主机的地址即单一端口映射）")]),s._v(" "),a("ul",[a("li",[s._v("containerPort ：容器的端口 （仅表示Node所在的节点上，打开此端口）")]),s._v(" "),a("li",[s._v("hostPort ： 宿主机端口，可以使得容器的端口和宿主机的端口建立映射关系（DNET）")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、删除此前使用YAML资源配置文件删除此pod\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl delete -f hostname.yaml")]),s._v("\n        pod "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mypod"')]),s._v(" deleted\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、重新配置YAML资源配置\nbasic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat hostname.yaml")]),s._v("\napiVersion: v1\nkind: Pod\nmetadata:\n  name: mypod\n  namespace: default\nspec:\n  containers:\n  - name: myapp\n    image: ikubernetes/myapp:v1\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义容器的端口暴漏信息")]),s._v("\n    ports:\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#协议")]),s._v("\n    - protocol: TCP\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#容器内部端口")]),s._v("\n      containerPort: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#可以给此端口设置一个名称，后期可以使用名称引用")]),s._v("\n      name: httpd\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#映射宿主机的端口")]),s._v("\n      hostPort: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、使用资源配置文件创建pod\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl apply -f hostname.yaml")]),s._v("\n        pod/mypod created\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、查看创建的pod信息并访问\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -o wide")]),s._v("\n        mypod                           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          32s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.226   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.185   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n     \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、访问运行pod的宿主机节点的映射端口就可以访问到容器的80\n    basic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 192.168.1.185:8080")]),s._v("\n    Hello MyApp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Version: v1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostname.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Pod Name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br")])]),a("h2",{attrs:{id:"问题思考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题思考"}},[s._v("#")]),s._v(" 问题思考")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 问题思考：运行一个pods,地址在10.244.0.0/16网络中，如何让集群外部进行访问？")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、Service "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" NodePort类型的Service， 通过集群中各个主机节点都打开同一个端口，把用户的请求映射给Pods，使其任何节点的这个端口都可以访问到此Pods，端口是随机的一般在30000~32767范围。（kube-proxy生成对应的iptable及Lvs规则实现的）\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、hostPort "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Pods一定是运行在集群中的某一个节点上的，所以，Pods运行在哪个节点上，就使用哪个节点的端口访问，其它未运行Pods的节点不可以访问，即单一端口映射。\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、hostNetwork "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" pod资源的地址就时node节点的地址即监听宿主机的名称空间，Pods直接使用节点的网络，仅通过此运行Pods的节点进行访问其Pods监听的端口，其它未运行Pods的节点不可以访问。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);