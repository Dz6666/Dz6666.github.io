(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{641:function(s,a,e){"use strict";e.r(a);var t=e(7),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#一、查看-docker-占用的资源"}},[s._v("一、查看 docker 占用的资源")])]),e("li",[e("a",{attrs:{href:"#二、只删除那些未被使用的资源"}},[s._v("二、只删除那些未被使用的资源")]),e("ul",[e("li",[e("a",{attrs:{href:"#_2-1、通过标签删除镜像"}},[s._v("2.1、通过标签删除镜像")])]),e("li",[e("a",{attrs:{href:"#_2-2、通过-id-删除镜像"}},[s._v("2.2、通过 ID 删除镜像")])]),e("li",[e("a",{attrs:{href:"#_2-3、删除镜像的限制"}},[s._v("2.3、删除镜像的限制")])]),e("li",[e("a",{attrs:{href:"#_2-4、清理镜像"}},[s._v("2.4、清理镜像")])])])])])]),e("p"),s._v(" "),e("h2",{attrs:{id:"一、查看-docker-占用的资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、查看-docker-占用的资源"}},[s._v("#")]),s._v(" 一、查看 docker 占用的资源")]),s._v(" "),e("ul",[e("li",[s._v("在进行资源清理之前我们有必要搞清楚 docker 都占用了哪些系统的资源。这需要综合使用不同的命令来完成。")])]),s._v(" "),e("blockquote",[e("p",[s._v("docker container ls：默认只列出正在运行的容器，-a 选项会列出包括停止的所有容器。\ndocker image ls：列出镜像信息，-a 选项会列出 intermediate 镜像(就是其它镜像依赖的层)。\ndocker volume ls：列出数据卷。\ndocker network ls：列出 network。\ndocker info：显示系统级别的信息，比如容器和镜像的数量等。")])]),s._v(" "),e("ul",[e("li",[s._v("通过这些命令查看 docker 使用的资源情况后，相信你已经决定要清理 docker 占用的一些资源了！让我们先从那些未被使用的资源开始。")])]),s._v(" "),e("h2",{attrs:{id:"二、只删除那些未被使用的资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、只删除那些未被使用的资源"}},[s._v("#")]),s._v(" 二、只删除那些未被使用的资源")]),s._v(" "),e("ul",[e("li",[s._v("Docker 提供了方便的 docker system prune 命令来删除那些已停止的容器、dangling 镜像、未被容器引用的 network 和构建过程中的 cache：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" system prune\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("使用以下命令清理已经停止运行的docker容器")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" --all -q -f "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("status")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("exited"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-1、通过标签删除镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1、通过标签删除镜像"}},[s._v("#")]),s._v(" 2.1、通过标签删除镜像")]),s._v(" "),e("ul",[e("li",[s._v("通过如下两个都可以删除镜像：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("或者：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("支持的子命令如下：\n"),e("ul",[e("li",[s._v("-f, -force: 强制删除镜像，即便有容器引用该镜像；")]),s._v(" "),e("li",[s._v("-no-prune: 不要删除未带标签的父镜像；")])])])]),s._v(" "),e("h3",{attrs:{id:"_2-2、通过-id-删除镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2、通过-id-删除镜像"}},[s._v("#")]),s._v(" 2.2、通过 ID 删除镜像")]),s._v(" "),e("ul",[e("li",[s._v("除了通过标签名称来删除镜像，我们还可以通过制定镜像 ID, 来删除镜像，如：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi ID\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("一旦制定了通过 ID 来删除镜像，它会先尝试删除所有指向该镜像的标签，然后在删除镜像本身。")])]),s._v(" "),e("h3",{attrs:{id:"_2-3、删除镜像的限制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3、删除镜像的限制"}},[s._v("#")]),s._v(" 2.3、删除镜像的限制")]),s._v(" "),e("ul",[e("li",[s._v("先删除引用这个镜像的容器；")]),s._v(" "),e("li",[s._v("再删除这个镜像；")]),s._v(" "),e("li",[s._v("也就是，根据上图中提示的，引用该镜像的容器 ID, 执行删除命令：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("  ID\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("然后，再执行删除镜像的命令：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi ID\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-4、清理镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-4、清理镜像"}},[s._v("#")]),s._v(" 2.4、清理镜像")]),s._v(" "),e("ul",[e("li",[s._v("我们在使用 Docker 一段时间后，系统一般都会残存一些临时的、没有被使用的镜像文件，可以通过以下命令进行清理：")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image prune\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("它支持的子命令有：\n"),e("ul",[e("li",[s._v("-a, --all: 删除所有没有用的镜像，而不仅仅是临时文件;")]),s._v(" "),e("li",[s._v("-f, --force：强制删除镜像文件，无需弹出提示确认；")])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);