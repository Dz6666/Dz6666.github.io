(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{647:function(s,n,a){"use strict";a.r(n);var e=a(7),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[a("img",{attrs:{src:"https://atlas.pingcode.com/files/public/62309e2fdc11ad87e4cb243c",alt:"image.png"}})])]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#helm-sh使用自定义charts部署release"}},[s._v("helm.sh使用自定义charts部署release")])]),a("li",[a("a",{attrs:{href:"#client-go-资源获取"}},[s._v("client-go - 资源获取")])]),a("li",[a("a",{attrs:{href:"#helm3-client工具"}},[s._v("Helm3 Client工具")]),a("ul",[a("li",[a("a",{attrs:{href:"#部署功能"}},[s._v("部署功能")])]),a("li",[a("a",{attrs:{href:"#部署及资源watch功能"}},[s._v("部署及资源Watch功能")])])])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"helm-sh使用自定义charts部署release"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#helm-sh使用自定义charts部署release"}},[s._v("#")]),s._v(" helm.sh使用自定义charts部署release")]),s._v(" "),a("blockquote",[a("p",[s._v("SKD ：  https://pkg.go.dev/helm.sh/helm/v3@v3.7.2/pkg/action")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package main\n\nimport (\n    "fmt"\n    "log"\n    "os"\n    "helm.sh/helm/v3/pkg/action"\n    "helm.sh/helm/v3/pkg/chart/loader"\n    "helm.sh/helm/v3/pkg/cli"\n)\n\nfunc main() {\n    chartPath := "./charts.tgz"\n    namespace := "default"\n    releaseName := "main-sky-beta"\n\n    settings := cli.New()\n\n    actionConfig := new(action.Configuration)\n    // You can pass an empty string instead of settings.Namespace() to list\n    // all namespaces\n    if err := actionConfig.Init(settings.RESTClientGetter(), namespace,\n        os.Getenv("HELM_DRIVER"), log.Printf); err != nil {\n        log.Printf("%+v", err)\n        os.Exit(1)\n    }\n\n    // define values\n    vals := map[string]interface{}{\n        "namespace":    namespace,\n        "replicaCount": "1",\n        "image": map[string]interface{}{\n            "name":       "image",\n            "pullPolicy": "IfNotPresent",\n        },\n        "nameOverride":     releaseName,\n        "fullnameOverride": releaseName,\n        "service": map[string]interface{}{\n            "type": "ClusterIP",\n            "port": "8080",\n        },\n        "hostAliases": map[string]interface{}{\n            "hostAliasesSet": false,\n            "hostAliasesMap": "",\n        },\n        "imagePull": map[string]interface{}{\n            "secretsSet": true,\n            "secrets":    "secret-harbor",\n        },\n        "envConfig": map[string]interface{}{\n            "configSet": false,\n            "config":    "",\n        },\n        "resources": map[string]interface{}{\n            "resourcesSet": false,\n            "requests": map[string]interface{}{\n                "memory": "",\n                "cpu":    "",\n            },\n            "limits": map[string]interface{}{\n                "memory": "",\n                "cpu":    "",\n            },\n            "affinity": map[string]interface{}{\n                "affinitySet": false,\n                "key":         "",\n                "operator":    "In",\n                "values":      "",\n            },\n            "tolerations": map[string]interface{}{\n                "tolerationsSet": false,\n                "key":            "__TOLERATIONS_KEY__",\n                "operator":       "Equal",\n                "value":          "__TOLERATIONS_VALUE__",\n                "effect":         "NoSchedule",\n            },\n            "livenessProbe": map[string]interface{}{\n                "livenessGetSet":     false,\n                "livenessGet":        "__LIVENESS_GET__",\n                "livenessCommandSet": false,\n                "livenessCommand":    "__LIVENESS_COMMAND__",\n            },\n            "command": map[string]interface{}{\n                "commandSet":   false,\n                "startCommand": "__COMMAND__",\n            },\n            "AnnoTations": map[string]interface{}{\n                "AnnoTationSet": false,\n            },\n        },\n    }\n\n    // load chart from the path\n    chart, err := loader.Load(chartPath)\n    if err != nil {\n        fmt.Println(err)\n        panic(err)\n    }\n\n    client := action.NewInstall(actionConfig)\n    client.Namespace = namespace\n    client.ReleaseName = releaseName\n    // client.DryRun = true - very handy!\n\n    // install the chart here\n    rel, err := client.Run(chart, vals)\n    if err != nil {\n        panic(err)\n    }\n\n    log.Printf("Installed Chart from path: %s in namespace: %s\\n", rel.Name, rel.Namespace)\n    // this will confirm the values set during installation\n    log.Println(rel.Config)\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br")])]),a("h2",{attrs:{id:"client-go-资源获取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#client-go-资源获取"}},[s._v("#")]),s._v(" client-go - 资源获取")]),s._v(" "),a("blockquote",[a("p",[s._v("SDK ： https://pkg.go.dev/k8s.io/api@v0.22.4")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package main\n\nimport (\n    "context"\n    "fmt"\n    "log"\n    "time"\n    v1 "k8s.io/api/core/v1"\n    metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"\n    "k8s.io/client-go/kubernetes"\n    "k8s.io/client-go/tools/clientcmd"\n)\n\nfunc list() {\n    // config \n    configPath := "etc/kube.conf"\n    config, err := clientcmd.BuildConfigFromFlags("", configPath)\n    if err != nil {\n        log.Fatal(err)\n    }\n    clientSet, err := kubernetes.NewForConfig(config)\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    // 查看Node信息\n    fmt.Println("*****************************************************************")\n    nodeList, err := clientSet.CoreV1().Nodes().List(context.TODO(), metav1.ListOptions{})\n    if err != nil {\n        log.Fatal(err)\n    }\n    for _, node := range nodeList.Items {\n        fmt.Printf("%s\\t%s\\t%s\\t%s\\t%s\\t%s\\t%s\\t%s,\\n",\n            node.Name,\n            node.Status.Phase,\n            node.Status.Addresses,\n            node.Status.NodeInfo.OSImage,\n            node.Status.NodeInfo.KubeletVersion,\n            node.Status.NodeInfo.OperatingSystem,\n            node.Status.NodeInfo.Architecture,\n            node.CreationTimestamp,\n        )\n    }\n\n    // 查看Namespace\n    fmt.Println("*****************************************************************")\n    namespaceList, err := clientSet.CoreV1().Namespaces().List(context.TODO(), metav1.ListOptions{})\n    if err != nil {\n        log.Fatal(err)\n    }\n    for _, namespace := range namespaceList.Items {\n        fmt.Println(namespace.Name, namespace.CreationTimestamp, namespace.Status.Phase)\n    }\n\n    // 查看Service\n    fmt.Println("*****************************************************************")\n    // Services("") 传递指定的namespace\n    serviceList, err := clientSet.CoreV1().Services("").List(context.TODO(), metav1.ListOptions{})\n    if err != nil {\n        log.Fatal(err)\n    }\n    for _, service := range serviceList.Items {\n        fmt.Println(service.Name, service.Spec.Type, service.CreationTimestamp, service.Spec.Ports)\n    }\n\n    // 查看deployment\n    fmt.Println("*****************************************************************")\n    // Deployments("") 传递指定的namespace\n    deploymentList, err := clientSet.AppsV1().Deployments("").List(context.TODO(), metav1.ListOptions{})\n    if err != nil {\n        log.Fatal(err)\n    }\n    for _, deployment := range deploymentList.Items {\n        fmt.Println(deployment.Namespace, deployment.Name, deployment.CreationTimestamp, deployment.Spec.Selector.MatchLabels, deployment.Status.Replicas, deployment.Status.AvailableReplicas)\n    }\n\n    // Watch deployment 资源变动\n    fmt.Println("*****************************************************************")\n    deploymentListW, errw := clientSet.AppsV1().Deployments("default").Watch(context.TODO(), metav1.ListOptions{Watch: true, LabelSelector: "app=demoappv10"})\n    if errw != nil {\n        log.Fatal(err)\n    }\n    for event := range deploymentListW.ResultChan() {\n        fmt.Printf("Type: %v\\n", event.Type)\n        p, ok := event.Object.(*v1.Pod)\n        if !ok {\n            log.Fatal("unexpected type")\n        }\n        fmt.Println(p.Status.ContainerStatuses)\n        fmt.Println(p.Status.Phase)\n    }\n\n    // Watch Pod 资源变动\n    fmt.Println("*****************************************************************")\n    label := "app=demoapp"\n    podListW, errw := clientSet.CoreV1().Pods("default").Watch(context.TODO(), metav1.ListOptions{LabelSelector: label})\n    if errw != nil {\n        log.Fatal(err)\n    }\n    go func() {\n        for event := range podListW.ResultChan() {\n            fmt.Printf("Type: %v\\n", event.Type)\n            p, ok := event.Object.(*v1.Pod)\n            if !ok {\n                log.Fatal("unexpected type")\n            }\n            fmt.Println(p.Status.ContainerStatuses)\n            fmt.Println(p.Status.Phase)\n        }\n    }()\n    time.Sleep(5 * time.Second)\n}\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br")])]),a("h2",{attrs:{id:"helm3-client工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#helm3-client工具"}},[s._v("#")]),s._v(" Helm3 Client工具")]),s._v(" "),a("h3",{attrs:{id:"部署功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署功能"}},[s._v("#")]),s._v(" 部署功能")]),s._v(" "),a("ul",[a("li",[s._v("server")])]),s._v(" "),a("blockquote",[a("p",[s._v("实现 helm upgrade --install 功能的逻辑：")]),s._v(" "),a("p",[s._v("由于helm.sh SDK未直接提供 upgrade --install  的方法，所以需要自行使用 NewHistory 获取release是否存在，若存在则调用 NewUpgrade 方法，若不存在则调用 NewInstall 方法；")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package main\n\nimport (\n    "encoding/json"\n    "fmt"\n    "log"\n    "os"\n    "io/ioutil"\n    "net/http"\n    "helm.sh/helm/v3/pkg/action"\n    "helm.sh/helm/v3/pkg/chart/loader"\n    "helm.sh/helm/v3/pkg/cli"\n    "helm.sh/helm/v3/pkg/cli/output"\n    "helm.sh/helm/v3/pkg/storage/driver"\n)\n\nvar tmp string\nvar outfmt output.Format\n\ntype Image struct {\n    Name       string `json:"name"`\n    PullPolicy string `json:"pullPolicy"`\n}\n\ntype Service struct {\n    Type string `json:"type"`\n    Port string `json:"port"`\n}\n\ntype HostAliases struct {\n    HostAliasesSet bool `json:"hostAliasesSet"`\n    // HostAliasesMap map[string]interface{} `json:"hostAliasesMap"`\n    HostAliasesMap string `json:"hostAliasesMap"`\n}\n\ntype ImagePull struct {\n    SecretsSet bool   `json:"secretsSet"`\n    Secrets    string `json:"secrets"`\n}\n\ntype EnvConfig struct {\n    ConfigSet bool   `json:"configSet"`\n    Config    string `json:"config"`\n}\n\ntype Requests struct {\n    Memory string `json:"memory"`\n    Cpu    string `json:"cpu"`\n}\ntype Limits struct {\n    Memory string `json:"memory"`\n    Cpu    string `json:"cpu"`\n}\ntype Resources struct {\n    ResourcesSet bool      `json:"resourcesSet"`\n    Requests     *Requests `json:"requests"`\n    Limits       *Limits   `json:"limits"`\n}\n\ntype Affinity struct {\n    AffinitySet bool   `json:"affinitySet"`\n    Key         string `json:"key"`\n    Operator    string `json:"operator"`\n    Values      string `json:"values"`\n}\n\ntype Tolerations struct {\n    TolerationsSet bool   `json:"tolerationsSet"`\n    Key            string `json:"key"`\n    Operator       string `json:"operator"`\n    Values         string `json:"values"`\n    Effect         string `json:"effect"`\n}\n\ntype LivenessProbe struct {\n    LivenessGetSet     bool   `json:"livenessGetSet"`\n    LivenessGet        string `json:"livenessGet"`\n    LivenessCommandSet bool   `json:"livenessCommandSet"`\n    LivenessCommand    string `json"livenessCommand"`\n}\n\ntype Command struct {\n    CommandSet   bool   `json:"commandSet"`\n    StartCommand string `json:"startCommand\'`\n}\n\ntype AnnoTations struct {\n    AnnoTationSet     bool   `json:"AnnoTationSet"`\n    AnnoTationExplain string `json:"AnnoTationExplain"`\n}\n\ntype PipeParams struct {\n    Namespace    string `json:"namespace"`\n    ReplicaCount string `json:"replicaCount"`\n    // Image      map[string]interface{} `json:"image"`\n    Image            Image         `json:"image"`\n    NameOverride     string        `json:"nameOverride"`\n    FullnameOverride string        `json:"fullnameOverride"`\n    Service          Service       `json:"service"`\n    HostAliases      HostAliases   `json:"hostAliases"`\n    ImagePull        ImagePull     `json:"imagePull"`\n    EnvConfig        EnvConfig     `json:"envConfig"`\n    Resources        Resources     `json:"resources"`\n    Affinity         Affinity      `json:"affinity"`\n    Tolerations      Tolerations   `json:"tolerations"`\n    LivenessProbe    LivenessProbe `json:"livenessProbe"`\n    Command          Command       `json:"command"`\n    AnnoTations      AnnoTations   `json:AnnoTations`\n}\n\n\nfunc Helm_Upgrade(args map[string]interface{}, namespace string, releaseName string) {\n    fmt.Println("args:", args)\n    chartPath := "./charts.tgz"\n\n    settings := cli.New()\n\n    actionConfig := new(action.Configuration)\n    // You can pass an empty string instead of settings.Namespace() to list\n    // all namespaces\n    if err := actionConfig.Init(settings.RESTClientGetter(), namespace,\n        os.Getenv("HELM_DRIVER"), log.Printf); err != nil {\n        log.Printf("%+v", err)\n        os.Exit(1)\n    }\n\n    // define values\n    // load chart from the path\n    chart, err := loader.Load(chartPath)\n    if err != nil {\n        fmt.Println(err)\n        panic(err)\n    }\n\n    client := action.NewUpgrade(actionConfig)\n    fmt.Println(namespace, releaseName)\n    client.Namespace = namespace\n    client.Install = true\n    // client.DryRun = true - very handy!\n\n    // Support reading values from STDIN for `upgrade` command\n    if client.Install {\n        // If a release does not exist, install it.\n        histClient := action.NewHistory(actionConfig)\n        histClient.Max = 1\n        if _, err := histClient.Run(releaseName); err == driver.ErrReleaseNotFound {\n            fmt.Println("Start Installation ...", releaseName)\n            // Only print this to stdout for table output\n            fmt.Println("Release does not exist. Installing it now")\n\n            instClient := action.NewInstall(actionConfig)\n            instClient.Namespace = namespace\n            instClient.ReleaseName = releaseName\n            // instClient.DryRun = client.DryRun\n            instClient.Timeout = 5000\n            instClient.Wait = true\n            rel, err := instClient.Run(chart, args)\n            if err != nil {\n                panic(err)\n            }\n            fmt.Println(rel.Info)\n        } else {\n            fmt.Println("Start Upgrate ...", releaseName)\n            // install the chart here\n            rel, err := client.Run(releaseName, chart, args)\n            if err != nil {\n                panic(err)\n\n            }\n            // fmt.Println(rel.Info.Notes)\n            fmt.Println(rel.Info.LastDeployed)\n            log.Printf("Installed Chart from path: %s in namespace: %s\\n", rel.Name, rel.Namespace)\n\n        }\n    }\n}\n\n// http\nfunc PipeHook(w http.ResponseWriter, r *http.Request) {\n    defer r.Body.Close()\n    fmt.Println("method:", r.Method)\n    body, err := ioutil.ReadAll(r.Body)\n    if err != nil {\n        fmt.Printf("read body err, %v\\n", err)\n        return\n    }\n\n    // println("json:", string(body))\n    tmp := string(body)\n\n    var struct_tmp PipeParams\n\n    err = json.Unmarshal([]byte(tmp), &struct_tmp)\n    if err != nil {\n        fmt.Println(err)\n    } else {\n        var resMap map[string]interface{}\n\n        err := json.Unmarshal([]byte(tmp), &resMap)\n        if err != nil {\n            fmt.Println(err)\n        }\n\n        Helm_Upgrade(resMap, struct_tmp.Namespace, struct_tmp.NameOverride)\n        // Get_Release()\n    }\n}\n\nfunc main() {\n    http.HandleFunc("/pipeline/", PipeHook)\n    err := http.ListenAndServe(":9090", nil)\n    if err != nil {\n        fmt.Printf("http server failed, err:%v\\n", err)\n        return\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br"),a("span",{staticClass:"line-number"},[s._v("190")]),a("br"),a("span",{staticClass:"line-number"},[s._v("191")]),a("br"),a("span",{staticClass:"line-number"},[s._v("192")]),a("br"),a("span",{staticClass:"line-number"},[s._v("193")]),a("br"),a("span",{staticClass:"line-number"},[s._v("194")]),a("br"),a("span",{staticClass:"line-number"},[s._v("195")]),a("br"),a("span",{staticClass:"line-number"},[s._v("196")]),a("br"),a("span",{staticClass:"line-number"},[s._v("197")]),a("br"),a("span",{staticClass:"line-number"},[s._v("198")]),a("br"),a("span",{staticClass:"line-number"},[s._v("199")]),a("br"),a("span",{staticClass:"line-number"},[s._v("200")]),a("br"),a("span",{staticClass:"line-number"},[s._v("201")]),a("br"),a("span",{staticClass:"line-number"},[s._v("202")]),a("br"),a("span",{staticClass:"line-number"},[s._v("203")]),a("br"),a("span",{staticClass:"line-number"},[s._v("204")]),a("br"),a("span",{staticClass:"line-number"},[s._v("205")]),a("br"),a("span",{staticClass:"line-number"},[s._v("206")]),a("br"),a("span",{staticClass:"line-number"},[s._v("207")]),a("br"),a("span",{staticClass:"line-number"},[s._v("208")]),a("br"),a("span",{staticClass:"line-number"},[s._v("209")]),a("br"),a("span",{staticClass:"line-number"},[s._v("210")]),a("br"),a("span",{staticClass:"line-number"},[s._v("211")]),a("br"),a("span",{staticClass:"line-number"},[s._v("212")]),a("br"),a("span",{staticClass:"line-number"},[s._v("213")]),a("br"),a("span",{staticClass:"line-number"},[s._v("214")]),a("br"),a("span",{staticClass:"line-number"},[s._v("215")]),a("br"),a("span",{staticClass:"line-number"},[s._v("216")]),a("br")])]),a("p"),s._v(" "),a("ul",[a("li",[s._v("Client")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('curl 127.0.0.1:9090/pipeline/ -X POST -d \'{\n    "namespace": "default",\n    "replicaCount": "1",\n    "image": {\n        "name": "image",\n        "pullPolicy": "IfNotPresent"\n    },\n    "nameOverride": "main-sky-test",\n    "fullnameOverride": "main-sky-test",\n    "service": {\n        "type": "ClusterIP",\n        "port": "8080"\n    },\n    "hostAliases": {\n        "hostAliasesSet": false,\n        "hostAliasesMap": ""\n    },\n    "imagePull": {\n        "secretsSet": true,\n        "secrets": "secret-harbor"\n    },\n    "envConfig": {\n        "configSet": false,\n        "config": ""\n    },\n    "resources": {\n        "resourcesSet": false,\n        "requests": {\n            "memory": "",\n            "cpu": ""\n        },\n        "limits": {\n            "memory": "",\n            "cpu": ""\n        }\n    },\n    "affinity": {\n        "affinitySet": false,\n        "key": "",\n        "operator": "In",\n        "values": ""\n    },\n    "tolerations": {\n        "tolerationsSet": false,\n        "key": "__TOLERATIONS_KEY__",\n        "operator": "Equal",\n        "value": "__TOLERATIONS_VALUE__",\n        "effect": "NoSchedule"\n    },\n    "livenessProbe": {\n        "livenessGetSet": false,\n        "livenessGet": "__LIVENESS_GET__",\n        "livenessCommandSet": false,\n        "livenessCommand": "__LIVENESS_COMMAND__"\n    },\n    "command": {\n        "commandSet": false,\n        "startCommand": "__COMMAND__"\n    },\n    "AnnoTations": {\n        "AnnoTationSet": false,\n        "AnnoTationExplain": ""\n    }\n}\' --header "Content-Type: application/json"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br")])]),a("h3",{attrs:{id:"部署及资源watch功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署及资源watch功能"}},[s._v("#")]),s._v(" 部署及资源Watch功能")]),s._v(" "),a("blockquote",[a("p",[s._v("出于让客户端可以看到各个资源部署状态，故增加对 Deployment、Pod资源Watch机制；")])]),s._v(" "),a("ul",[a("li",[s._v("server")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package main\n\nimport (\n    "context"\n    "encoding/json"\n    "fmt"\n    "io/ioutil"\n    "log"\n    "net/http"\n    "os"\n\n    "helm.sh/helm/v3/pkg/action"\n    "helm.sh/helm/v3/pkg/chart/loader"\n    "helm.sh/helm/v3/pkg/cli"\n    "helm.sh/helm/v3/pkg/cli/output"\n    "helm.sh/helm/v3/pkg/storage/driver"\n    appsV1 "k8s.io/api/apps/v1"\n    v1 "k8s.io/api/core/v1"\n    metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"\n    "k8s.io/client-go/kubernetes"\n    "k8s.io/client-go/tools/clientcmd"\n)\n\n// 操纵K8S每个方法同一超时时长\n// var timeout int = 5\n\ntype Image struct {\n    Name       string `json:"name"`\n    PullPolicy string `json:"pullPolicy"`\n}\n\ntype Service struct {\n    Type string `json:"type"`\n    Port string `json:"port"`\n}\n\ntype HostAliases struct {\n    HostAliasesSet bool `json:"hostAliasesSet"`\n    HostAliasesMap string `json:"hostAliasesMap"`\n}\n\ntype ImagePull struct {\n    SecretsSet bool   `json:"secretsSet"`\n    Secrets    string `json:"secrets"`\n}\n\ntype EnvConfig struct {\n    ConfigSet bool   `json:"configSet"`\n    Config    string `json:"config"`\n}\n\ntype Requests struct {\n    Memory string `json:"memory"`\n    Cpu    string `json:"cpu"`\n}\ntype Limits struct {\n    Memory string `json:"memory"`\n    Cpu    string `json:"cpu"`\n}\ntype Resources struct {\n    ResourcesSet bool      `json:"resourcesSet"`\n    Requests     *Requests `json:"requests"`\n    Limits       *Limits   `json:"limits"`\n}\n\ntype Affinity struct {\n    AffinitySet bool   `json:"affinitySet"`\n    Key         string `json:"key"`\n    Operator    string `json:"operator"`\n    Values      string `json:"values"`\n}\n\ntype Tolerations struct {\n    TolerationsSet bool   `json:"tolerationsSet"`\n    Key            string `json:"key"`\n    Operator       string `json:"operator"`\n    Values         string `json:"values"`\n    Effect         string `json:"effect"`\n}\n\ntype LivenessProbe struct {\n    LivenessGetSet     bool   `json:"livenessGetSet"`\n    LivenessGet        string `json:"livenessGet"`\n    LivenessCommandSet bool   `json:"livenessCommandSet"`\n    LivenessCommand    string `json:"livenessCommand"`\n}\n\ntype Command struct {\n    CommandSet   bool   `json:"commandSet"`\n    StartCommand string `json:"startCommand"`\n}\n\ntype AnnoTations struct {\n    AnnoTationSet     bool   `json:"AnnoTationSet"`\n    AnnoTationExplain string `json:"AnnoTationExplain"`\n}\n\ntype PipeParams struct {\n    Namespace    string `json:"namespace"`\n    ReplicaCount string `json:"replicaCount"`\n    // Image      map[string]interface{} `json:"image"`\n    Image            Image         `json:"image"`\n    NameOverride     string        `json:"nameOverride"`\n    FullnameOverride string        `json:"fullnameOverride"`\n    Service          Service       `json:"service"`\n    HostAliases      HostAliases   `json:"hostAliases"`\n    ImagePull        ImagePull     `json:"imagePull"`\n    EnvConfig        EnvConfig     `json:"envConfig"`\n    Resources        Resources     `json:"resources"`\n    Affinity         Affinity      `json:"affinity"`\n    Tolerations      Tolerations   `json:"tolerations"`\n    LivenessProbe    LivenessProbe `json:"livenessProbe"`\n    Command          Command       `json:"command"`\n    AnnoTations      AnnoTations   `json:"AnnoTations"`\n}\n\n//\n\ntype Deployment struct {\n    // Resources string      `json:"Resources"`\n    Name      string      `json:"Name"`\n    Ready     string      `json:"Ready"`\n    Avatlable string      `json:"Avatlable"`\n    Age       metav1.Time `json:"Age"`\n    Image     string      `json:"Image"`\n}\n\ntype JsonResponse struct {\n    Deployment Deployment    `json:"Deployment"`\n    Pod        []interface{} `json:"Pod"`\n}\n\n// TODO\n/*\n    Helm 状态返回\n    Helm 状态回滚\n*/\n\ntype JsonResult struct {\n    Code       int          `json:"code"`\n    Msg        string       `json:"msg"`\n    Deployment JsonResponse `json:"deployment"`\n}\n\n// 加载配置文件\nfunc K8s_Conf() (*kubernetes.Clientset, error) {\n    configPath := "etc/kube.conf"\n    config, err := clientcmd.BuildConfigFromFlags("", configPath)\n    if err != nil {\n        log.Fatal(err)\n    }\n    clientSet, err := kubernetes.NewForConfig(config)\n    if err != nil {\n        log.Fatal(err)\n    }\n    return clientSet, err\n}\n\nfunc Pod_Watch(name, namespace string) []interface{} {\n    // var podstatus Pod\n    var test []interface{}\n    label := "app.kubernetes.io/name=" + name\n    // label := "app=demoapp"\n    timeout := new(int64)\n    *timeout = 8\n\n    clientSet, err := K8s_Conf()\n    if err != nil {\n        log.Fatal(err)\n    }\n    // fmt.Println("*****************************************************************")\n\n    podListW, errw := clientSet.CoreV1().Pods(namespace).Watch(context.TODO(), metav1.ListOptions{LabelSelector: label, TimeoutSeconds: timeout})\n    if errw != nil {\n        log.Fatal(err)\n    }\n    // go func() {\n    for event := range podListW.ResultChan() {\n        // fmt.Printf("Type: %v\\n", event.Type)\n        p, ok := event.Object.(*v1.Pod)\n        if !ok {\n            log.Fatal("unexpected type")\n        }\n        pname := p.Name           // demoappv10-6ff964cbff-hmsb8\n        pstatus := p.Status.Phase // Running\n        reason := p.Status.StartTime\n        fmt.Printf("==> v1/Pod(related)\\nNAME\\t\\t\\t\\t\\tSTATUS\\t\\t\\tAGE\\n%s\\t\\t%s\\t\\t\\t%v\\t\\n", pname, pstatus, reason)\n\n        reasonstring := fmt.Sprintf("%v", p.Status.StartTime)\n        pod := map[string]interface{}{\n            pname: []string{\n                string(pstatus), reasonstring,\n            },\n        }\n        // fmt.Println(pod)\n        test = append(test, pod)\n    }\n    return test\n}\n\nfunc K8s_Client(name, namespace string) JsonResponse {\n    var result JsonResponse\n\n    clientSet, err := K8s_Conf()\n    if err != nil {\n        log.Fatal(err)\n    }\n\n    fmt.Println("*****************************************************************")\n    label := "app.kubernetes.io/name=" + name\n    timeout := new(int64)\n    *timeout = 2\n    deploymentListW, errw := clientSet.AppsV1().Deployments(namespace).Watch(context.TODO(), metav1.ListOptions{LabelSelector: label, TimeoutSeconds: timeout})\n    if errw != nil {\n        log.Fatal(err)\n    }\n\n    for event := range deploymentListW.ResultChan() {\n        fmt.Printf("Type: %v\\n", event.Type)\n        p, ok := event.Object.(*appsV1.Deployment)\n        if !ok {\n            log.Fatal("unexpected type")\n        }\n        // dns := p.Namespace\n        dna := p.Name\n        dreplicas := p.Status.Replicas\n        dreadyreplicas := p.Status.ReadyReplicas\n        davailablereplicas := p.Status.AvailableReplicas\n        dcreationtimestamp := p.CreationTimestamp\n        dgetimage := p.Spec.Template.Spec.Containers[0].Image\n        client_result := fmt.Sprintf("*****************************************************************\\nRESOURCES:\\n===> v1/Deployment\\nNAME\\t\\tREADY\\tAVAILABLE\\tAGE\\t\\t\\t\\t\\tIMAGE\\n%s\\t%v/%v\\t%v\\t\\t%v\\t\\t%v\\n", dna, dreplicas, dreadyreplicas, davailablereplicas, dcreationtimestamp, dgetimage)\n        fmt.Println(client_result)\n        result.Deployment.Name = p.Name\n        result.Deployment.Ready = fmt.Sprintf("%v/%v", p.Status.ReadyReplicas, p.Status.AvailableReplicas)\n        result.Deployment.Avatlable = fmt.Sprintf("%v", p.Status.AvailableReplicas)\n        result.Deployment.Age = p.CreationTimestamp\n        result.Deployment.Image = p.Spec.Template.Spec.Containers[0].Image\n        fmt.Println(result)\n\n        fmt.Println(name)\n        result.Pod = Pod_Watch(name, namespace)\n\n        if dreadyreplicas != dreplicas {\n            // 监视 Pod资源变动\n            fmt.Println("Pod_Watch")\n            result.Pod = Pod_Watch(name, namespace)\n        }\n\n    }\n\n    return result\n}\n\nvar tmp string\nvar outfmt output.Format\n\nfunc Helm_Upgrade(args map[string]interface{}, namespace string, releaseName string) JsonResult {\n    var result JsonResult\n\n    fmt.Println("args:", args)\n    chartPath := "./charts.tgz"\n\n    settings := cli.New()\n\n    actionConfig := new(action.Configuration)\n    // You can pass an empty string instead of settings.Namespace() to list\n    // all namespaces\n    if err := actionConfig.Init(settings.RESTClientGetter(), namespace,\n        os.Getenv("HELM_DRIVER"), log.Printf); err != nil {\n        log.Printf("%+v", err)\n        os.Exit(1)\n    }\n\n    // define values\n    // load chart from the path\n    chart, err := loader.Load(chartPath)\n    if err != nil {\n        fmt.Println(err)\n        panic(err)\n    }\n\n    client := action.NewUpgrade(actionConfig)\n    fmt.Println(namespace, releaseName)\n    client.Namespace = namespace\n    client.Install = true\n    client.Timeout = 30\n    // client.DryRun = true - very handy!\n\n    // Fixes #7002 - Support reading values from STDIN for `upgrade` command\n    // Must load values AFTER determining if we have to call install so that values loaded from stdin are are not read twice\n\n    if client.Install {\n        // If a release does not exist, install it.\n        histClient := action.NewHistory(actionConfig)\n        histClient.Max = 1\n        if _, err := histClient.Run(releaseName); err == driver.ErrReleaseNotFound {\n            fmt.Println("Start Installation ...", releaseName)\n            // Only print this to stdout for table output\n            fmt.Println("Release does not exist. Installing it now")\n\n            instClient := action.NewInstall(actionConfig)\n            instClient.Namespace = namespace\n            instClient.ReleaseName = releaseName\n            // instClient.DryRun = client.DryRun\n            instClient.Timeout = 30\n            // instClient.Wait = true\n            rel, err := instClient.Run(chart, args)\n            if err != nil {\n                panic(err)\n            }\n            fmt.Println(rel.Info)\n\n            msg := "Install success" + releaseName + "in" + namespace\n            result.Code = 200\n            result.Msg = msg\n            result.Deployment = K8s_Client(releaseName, namespace)\n            return result\n\n        } else {\n            fmt.Println("Start Upgrate ...", releaseName)\n            rel, err := client.Run(releaseName, chart, args)\n            if err != nil {\n                panic(err)\n\n            }\n\n            fmt.Println(rel.Info.LastDeployed)\n\n            log.Printf("Installed Chart from path: %s in namespace: %s\\n", rel.Name, rel.Namespace)\n\n            // this will confirm the values set during installation\n            // log.Println(rel.Config)\n            msg := "Upgrate success " + releaseName + " in " + namespace\n            result.Code = 200\n            result.Msg = msg\n            result.Deployment = K8s_Client(releaseName, namespace)\n            return result\n        }\n    }\n    msg := "Install filed" + releaseName + "in" + namespace\n    result.Code = 500\n    result.Msg = msg\n    return result\n}\n\n// http\nfunc PipeHook(w http.ResponseWriter, r *http.Request) {\n    defer r.Body.Close()\n    fmt.Println("method:", r.Method)\n    body, err := ioutil.ReadAll(r.Body)\n    if err != nil {\n        fmt.Printf("read body err, %v\\n", err)\n        return\n    }\n\n    tmp := string(body)\n    var struct_tmp PipeParams\n\n    err = json.Unmarshal([]byte(tmp), &struct_tmp)\n    if err != nil {\n        fmt.Println(err)\n    } else {\n        // fmt.Println("STRUCT:", struct_tmp.Resources.Requests.Cpu)\n        var resMap map[string]interface{}\n        err := json.Unmarshal([]byte(tmp), &resMap)\n        if err != nil {\n            fmt.Println(err)\n        }\n\n        response := Helm_Upgrade(resMap, struct_tmp.Namespace, struct_tmp.NameOverride)\n        w.Header().Set("content-type", "text/json")\n        msg, _ := json.Marshal(response)\n        w.Write(msg)\n    }\n}\n\nfunc main() {\n    fmt.Println("The service listens on port 9090....")\n    http.HandleFunc("/pipeline/", PipeHook)\n    err := http.ListenAndServe(":9090", nil)\n    if err != nil {\n        fmt.Printf("http server failed, err:%v\\n", err)\n        return\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br"),a("span",{staticClass:"line-number"},[s._v("170")]),a("br"),a("span",{staticClass:"line-number"},[s._v("171")]),a("br"),a("span",{staticClass:"line-number"},[s._v("172")]),a("br"),a("span",{staticClass:"line-number"},[s._v("173")]),a("br"),a("span",{staticClass:"line-number"},[s._v("174")]),a("br"),a("span",{staticClass:"line-number"},[s._v("175")]),a("br"),a("span",{staticClass:"line-number"},[s._v("176")]),a("br"),a("span",{staticClass:"line-number"},[s._v("177")]),a("br"),a("span",{staticClass:"line-number"},[s._v("178")]),a("br"),a("span",{staticClass:"line-number"},[s._v("179")]),a("br"),a("span",{staticClass:"line-number"},[s._v("180")]),a("br"),a("span",{staticClass:"line-number"},[s._v("181")]),a("br"),a("span",{staticClass:"line-number"},[s._v("182")]),a("br"),a("span",{staticClass:"line-number"},[s._v("183")]),a("br"),a("span",{staticClass:"line-number"},[s._v("184")]),a("br"),a("span",{staticClass:"line-number"},[s._v("185")]),a("br"),a("span",{staticClass:"line-number"},[s._v("186")]),a("br"),a("span",{staticClass:"line-number"},[s._v("187")]),a("br"),a("span",{staticClass:"line-number"},[s._v("188")]),a("br"),a("span",{staticClass:"line-number"},[s._v("189")]),a("br"),a("span",{staticClass:"line-number"},[s._v("190")]),a("br"),a("span",{staticClass:"line-number"},[s._v("191")]),a("br"),a("span",{staticClass:"line-number"},[s._v("192")]),a("br"),a("span",{staticClass:"line-number"},[s._v("193")]),a("br"),a("span",{staticClass:"line-number"},[s._v("194")]),a("br"),a("span",{staticClass:"line-number"},[s._v("195")]),a("br"),a("span",{staticClass:"line-number"},[s._v("196")]),a("br"),a("span",{staticClass:"line-number"},[s._v("197")]),a("br"),a("span",{staticClass:"line-number"},[s._v("198")]),a("br"),a("span",{staticClass:"line-number"},[s._v("199")]),a("br"),a("span",{staticClass:"line-number"},[s._v("200")]),a("br"),a("span",{staticClass:"line-number"},[s._v("201")]),a("br"),a("span",{staticClass:"line-number"},[s._v("202")]),a("br"),a("span",{staticClass:"line-number"},[s._v("203")]),a("br"),a("span",{staticClass:"line-number"},[s._v("204")]),a("br"),a("span",{staticClass:"line-number"},[s._v("205")]),a("br"),a("span",{staticClass:"line-number"},[s._v("206")]),a("br"),a("span",{staticClass:"line-number"},[s._v("207")]),a("br"),a("span",{staticClass:"line-number"},[s._v("208")]),a("br"),a("span",{staticClass:"line-number"},[s._v("209")]),a("br"),a("span",{staticClass:"line-number"},[s._v("210")]),a("br"),a("span",{staticClass:"line-number"},[s._v("211")]),a("br"),a("span",{staticClass:"line-number"},[s._v("212")]),a("br"),a("span",{staticClass:"line-number"},[s._v("213")]),a("br"),a("span",{staticClass:"line-number"},[s._v("214")]),a("br"),a("span",{staticClass:"line-number"},[s._v("215")]),a("br"),a("span",{staticClass:"line-number"},[s._v("216")]),a("br"),a("span",{staticClass:"line-number"},[s._v("217")]),a("br"),a("span",{staticClass:"line-number"},[s._v("218")]),a("br"),a("span",{staticClass:"line-number"},[s._v("219")]),a("br"),a("span",{staticClass:"line-number"},[s._v("220")]),a("br"),a("span",{staticClass:"line-number"},[s._v("221")]),a("br"),a("span",{staticClass:"line-number"},[s._v("222")]),a("br"),a("span",{staticClass:"line-number"},[s._v("223")]),a("br"),a("span",{staticClass:"line-number"},[s._v("224")]),a("br"),a("span",{staticClass:"line-number"},[s._v("225")]),a("br"),a("span",{staticClass:"line-number"},[s._v("226")]),a("br"),a("span",{staticClass:"line-number"},[s._v("227")]),a("br"),a("span",{staticClass:"line-number"},[s._v("228")]),a("br"),a("span",{staticClass:"line-number"},[s._v("229")]),a("br"),a("span",{staticClass:"line-number"},[s._v("230")]),a("br"),a("span",{staticClass:"line-number"},[s._v("231")]),a("br"),a("span",{staticClass:"line-number"},[s._v("232")]),a("br"),a("span",{staticClass:"line-number"},[s._v("233")]),a("br"),a("span",{staticClass:"line-number"},[s._v("234")]),a("br"),a("span",{staticClass:"line-number"},[s._v("235")]),a("br"),a("span",{staticClass:"line-number"},[s._v("236")]),a("br"),a("span",{staticClass:"line-number"},[s._v("237")]),a("br"),a("span",{staticClass:"line-number"},[s._v("238")]),a("br"),a("span",{staticClass:"line-number"},[s._v("239")]),a("br"),a("span",{staticClass:"line-number"},[s._v("240")]),a("br"),a("span",{staticClass:"line-number"},[s._v("241")]),a("br"),a("span",{staticClass:"line-number"},[s._v("242")]),a("br"),a("span",{staticClass:"line-number"},[s._v("243")]),a("br"),a("span",{staticClass:"line-number"},[s._v("244")]),a("br"),a("span",{staticClass:"line-number"},[s._v("245")]),a("br"),a("span",{staticClass:"line-number"},[s._v("246")]),a("br"),a("span",{staticClass:"line-number"},[s._v("247")]),a("br"),a("span",{staticClass:"line-number"},[s._v("248")]),a("br"),a("span",{staticClass:"line-number"},[s._v("249")]),a("br"),a("span",{staticClass:"line-number"},[s._v("250")]),a("br"),a("span",{staticClass:"line-number"},[s._v("251")]),a("br"),a("span",{staticClass:"line-number"},[s._v("252")]),a("br"),a("span",{staticClass:"line-number"},[s._v("253")]),a("br"),a("span",{staticClass:"line-number"},[s._v("254")]),a("br"),a("span",{staticClass:"line-number"},[s._v("255")]),a("br"),a("span",{staticClass:"line-number"},[s._v("256")]),a("br"),a("span",{staticClass:"line-number"},[s._v("257")]),a("br"),a("span",{staticClass:"line-number"},[s._v("258")]),a("br"),a("span",{staticClass:"line-number"},[s._v("259")]),a("br"),a("span",{staticClass:"line-number"},[s._v("260")]),a("br"),a("span",{staticClass:"line-number"},[s._v("261")]),a("br"),a("span",{staticClass:"line-number"},[s._v("262")]),a("br"),a("span",{staticClass:"line-number"},[s._v("263")]),a("br"),a("span",{staticClass:"line-number"},[s._v("264")]),a("br"),a("span",{staticClass:"line-number"},[s._v("265")]),a("br"),a("span",{staticClass:"line-number"},[s._v("266")]),a("br"),a("span",{staticClass:"line-number"},[s._v("267")]),a("br"),a("span",{staticClass:"line-number"},[s._v("268")]),a("br"),a("span",{staticClass:"line-number"},[s._v("269")]),a("br"),a("span",{staticClass:"line-number"},[s._v("270")]),a("br"),a("span",{staticClass:"line-number"},[s._v("271")]),a("br"),a("span",{staticClass:"line-number"},[s._v("272")]),a("br"),a("span",{staticClass:"line-number"},[s._v("273")]),a("br"),a("span",{staticClass:"line-number"},[s._v("274")]),a("br"),a("span",{staticClass:"line-number"},[s._v("275")]),a("br"),a("span",{staticClass:"line-number"},[s._v("276")]),a("br"),a("span",{staticClass:"line-number"},[s._v("277")]),a("br"),a("span",{staticClass:"line-number"},[s._v("278")]),a("br"),a("span",{staticClass:"line-number"},[s._v("279")]),a("br"),a("span",{staticClass:"line-number"},[s._v("280")]),a("br"),a("span",{staticClass:"line-number"},[s._v("281")]),a("br"),a("span",{staticClass:"line-number"},[s._v("282")]),a("br"),a("span",{staticClass:"line-number"},[s._v("283")]),a("br"),a("span",{staticClass:"line-number"},[s._v("284")]),a("br"),a("span",{staticClass:"line-number"},[s._v("285")]),a("br"),a("span",{staticClass:"line-number"},[s._v("286")]),a("br"),a("span",{staticClass:"line-number"},[s._v("287")]),a("br"),a("span",{staticClass:"line-number"},[s._v("288")]),a("br"),a("span",{staticClass:"line-number"},[s._v("289")]),a("br"),a("span",{staticClass:"line-number"},[s._v("290")]),a("br"),a("span",{staticClass:"line-number"},[s._v("291")]),a("br"),a("span",{staticClass:"line-number"},[s._v("292")]),a("br"),a("span",{staticClass:"line-number"},[s._v("293")]),a("br"),a("span",{staticClass:"line-number"},[s._v("294")]),a("br"),a("span",{staticClass:"line-number"},[s._v("295")]),a("br"),a("span",{staticClass:"line-number"},[s._v("296")]),a("br"),a("span",{staticClass:"line-number"},[s._v("297")]),a("br"),a("span",{staticClass:"line-number"},[s._v("298")]),a("br"),a("span",{staticClass:"line-number"},[s._v("299")]),a("br"),a("span",{staticClass:"line-number"},[s._v("300")]),a("br"),a("span",{staticClass:"line-number"},[s._v("301")]),a("br"),a("span",{staticClass:"line-number"},[s._v("302")]),a("br"),a("span",{staticClass:"line-number"},[s._v("303")]),a("br"),a("span",{staticClass:"line-number"},[s._v("304")]),a("br"),a("span",{staticClass:"line-number"},[s._v("305")]),a("br"),a("span",{staticClass:"line-number"},[s._v("306")]),a("br"),a("span",{staticClass:"line-number"},[s._v("307")]),a("br"),a("span",{staticClass:"line-number"},[s._v("308")]),a("br"),a("span",{staticClass:"line-number"},[s._v("309")]),a("br"),a("span",{staticClass:"line-number"},[s._v("310")]),a("br"),a("span",{staticClass:"line-number"},[s._v("311")]),a("br"),a("span",{staticClass:"line-number"},[s._v("312")]),a("br"),a("span",{staticClass:"line-number"},[s._v("313")]),a("br"),a("span",{staticClass:"line-number"},[s._v("314")]),a("br"),a("span",{staticClass:"line-number"},[s._v("315")]),a("br"),a("span",{staticClass:"line-number"},[s._v("316")]),a("br"),a("span",{staticClass:"line-number"},[s._v("317")]),a("br"),a("span",{staticClass:"line-number"},[s._v("318")]),a("br"),a("span",{staticClass:"line-number"},[s._v("319")]),a("br"),a("span",{staticClass:"line-number"},[s._v("320")]),a("br"),a("span",{staticClass:"line-number"},[s._v("321")]),a("br"),a("span",{staticClass:"line-number"},[s._v("322")]),a("br"),a("span",{staticClass:"line-number"},[s._v("323")]),a("br"),a("span",{staticClass:"line-number"},[s._v("324")]),a("br"),a("span",{staticClass:"line-number"},[s._v("325")]),a("br"),a("span",{staticClass:"line-number"},[s._v("326")]),a("br"),a("span",{staticClass:"line-number"},[s._v("327")]),a("br"),a("span",{staticClass:"line-number"},[s._v("328")]),a("br"),a("span",{staticClass:"line-number"},[s._v("329")]),a("br"),a("span",{staticClass:"line-number"},[s._v("330")]),a("br"),a("span",{staticClass:"line-number"},[s._v("331")]),a("br"),a("span",{staticClass:"line-number"},[s._v("332")]),a("br"),a("span",{staticClass:"line-number"},[s._v("333")]),a("br"),a("span",{staticClass:"line-number"},[s._v("334")]),a("br"),a("span",{staticClass:"line-number"},[s._v("335")]),a("br"),a("span",{staticClass:"line-number"},[s._v("336")]),a("br"),a("span",{staticClass:"line-number"},[s._v("337")]),a("br"),a("span",{staticClass:"line-number"},[s._v("338")]),a("br"),a("span",{staticClass:"line-number"},[s._v("339")]),a("br"),a("span",{staticClass:"line-number"},[s._v("340")]),a("br"),a("span",{staticClass:"line-number"},[s._v("341")]),a("br"),a("span",{staticClass:"line-number"},[s._v("342")]),a("br"),a("span",{staticClass:"line-number"},[s._v("343")]),a("br"),a("span",{staticClass:"line-number"},[s._v("344")]),a("br"),a("span",{staticClass:"line-number"},[s._v("345")]),a("br"),a("span",{staticClass:"line-number"},[s._v("346")]),a("br"),a("span",{staticClass:"line-number"},[s._v("347")]),a("br"),a("span",{staticClass:"line-number"},[s._v("348")]),a("br"),a("span",{staticClass:"line-number"},[s._v("349")]),a("br"),a("span",{staticClass:"line-number"},[s._v("350")]),a("br"),a("span",{staticClass:"line-number"},[s._v("351")]),a("br"),a("span",{staticClass:"line-number"},[s._v("352")]),a("br"),a("span",{staticClass:"line-number"},[s._v("353")]),a("br"),a("span",{staticClass:"line-number"},[s._v("354")]),a("br"),a("span",{staticClass:"line-number"},[s._v("355")]),a("br"),a("span",{staticClass:"line-number"},[s._v("356")]),a("br"),a("span",{staticClass:"line-number"},[s._v("357")]),a("br"),a("span",{staticClass:"line-number"},[s._v("358")]),a("br"),a("span",{staticClass:"line-number"},[s._v("359")]),a("br"),a("span",{staticClass:"line-number"},[s._v("360")]),a("br"),a("span",{staticClass:"line-number"},[s._v("361")]),a("br"),a("span",{staticClass:"line-number"},[s._v("362")]),a("br"),a("span",{staticClass:"line-number"},[s._v("363")]),a("br"),a("span",{staticClass:"line-number"},[s._v("364")]),a("br"),a("span",{staticClass:"line-number"},[s._v("365")]),a("br"),a("span",{staticClass:"line-number"},[s._v("366")]),a("br"),a("span",{staticClass:"line-number"},[s._v("367")]),a("br"),a("span",{staticClass:"line-number"},[s._v("368")]),a("br"),a("span",{staticClass:"line-number"},[s._v("369")]),a("br"),a("span",{staticClass:"line-number"},[s._v("370")]),a("br"),a("span",{staticClass:"line-number"},[s._v("371")]),a("br"),a("span",{staticClass:"line-number"},[s._v("372")]),a("br"),a("span",{staticClass:"line-number"},[s._v("373")]),a("br"),a("span",{staticClass:"line-number"},[s._v("374")]),a("br"),a("span",{staticClass:"line-number"},[s._v("375")]),a("br"),a("span",{staticClass:"line-number"},[s._v("376")]),a("br"),a("span",{staticClass:"line-number"},[s._v("377")]),a("br"),a("span",{staticClass:"line-number"},[s._v("378")]),a("br"),a("span",{staticClass:"line-number"},[s._v("379")]),a("br"),a("span",{staticClass:"line-number"},[s._v("380")]),a("br"),a("span",{staticClass:"line-number"},[s._v("381")]),a("br"),a("span",{staticClass:"line-number"},[s._v("382")]),a("br"),a("span",{staticClass:"line-number"},[s._v("383")]),a("br"),a("span",{staticClass:"line-number"},[s._v("384")]),a("br"),a("span",{staticClass:"line-number"},[s._v("385")]),a("br")])]),a("p"),s._v(" "),a("ul",[a("li",[s._v("client")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#!/bin/bash\ncurl 127.0.0.1:9090/pipeline/ --connect-timeout 15 -m 20 -X POST -d \'{\n    "namespace": "default",\n    "replicaCount": "1",\n    "image": {\n    "name": "image_name",\n    "pullPolicy": "IfNotPresent"\n    },\n    "nameOverride": "gaea-test",\n    "fullnameOverride": "gaea-test",\n    "service": {\n    "type": "ClusterIP",\n    "port": "8080"\n    },\n    "hostAliases": {\n    "hostAliasesSet": false,\n    "hostAliasesMap": ""\n    },\n    "imagePull": {\n    "secretsSet": true,\n    "secrets": "secret-harbor"\n    },\n    "envConfig": {\n    "configSet": true,\n    "config": "configmap"\n    },\n    "resources": {\n    "resourcesSet": false,\n    "requests": {\n    "memory": "",\n    "cpu": ""\n    },\n    "limits": {\n    "memory": "",\n    "cpu": ""\n    }\n    },\n    "affinity": {\n    "affinitySet": false,\n    "key": "",\n    "operator": "In",\n    "values": ""\n    },\n    "tolerations": {\n    "tolerationsSet": false,\n    "key": "__TOLERATIONS_KEY__",\n    "operator": "Equal",\n    "value": "__TOLERATIONS_VALUE__",\n    "effect": "NoSchedule"\n    },\n    "livenessProbe": {\n    "livenessGetSet": false,\n    "livenessGet": "__LIVENESS_GET__",\n    "livenessCommandSet": false,\n    "livenessCommand": "__LIVENESS_COMMAND__"\n    },\n    "command": {\n    "commandSet": true,\n    "startCommand": "[\'bash\',\'./start.sh\']"\n    },\n    "AnnoTations": {\n    "AnnoTationSet": false,\n    "AnnoTationExplain": ""\n    }\n    }\' --header "Content-Type: application/json"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://atlas.pingcode.com/files/public/622700870d4581c32e190653",alt:"image.png"}})])])}),[],!1,null,null,null);n.default=t.exports}}]);