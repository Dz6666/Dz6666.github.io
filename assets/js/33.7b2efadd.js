(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{654:function(s,n,a){"use strict";a.r(n);var t=a(7),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#回顾"}},[s._v("回顾")])]),a("li",[a("a",{attrs:{href:"#一、kubectl就是api-server客户端程序"}},[s._v("一、kubectl就是API Server客户端程序")]),a("ul",[a("li",[a("a",{attrs:{href:"#_1-1、api-server介绍"}},[s._v("1.1、API Server介绍")])]),a("li",[a("a",{attrs:{href:"#_1-2、api-server客户端-kubectl"}},[s._v("1.2、API Server客户端-kubectl")])]),a("li",[a("a",{attrs:{href:"#_1-3、kubectl常用命令表格"}},[s._v("1.3、kubectl常用命令表格")])]),a("li",[a("a",{attrs:{href:"#_1-4、kubectl实战命令"}},[s._v("1.4、kubectl实战命令")])])])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"回顾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#回顾"}},[s._v("#")]),s._v(" 回顾")]),s._v(" "),a("ul",[a("li",[s._v("k8s有三个网络\n"),a("ul",[a("li",[s._v("节点网络")]),s._v(" "),a("li",[s._v("pod网络")]),s._v(" "),a("li",[s._v("service网络")])])]),s._v(" "),a("li",[s._v("整个K8S系统不过是在master上控制层面有三个核心组件\n"),a("ul",[a("li",[s._v("1.平面控制 API Server（唯一可以接入API Server就是master主机的6443端口）\n"),a("ul",[a("li",[s._v("部署完成后默认监控在master节点的6443端口上")]),s._v(" "),a("li",[s._v("唯一可以介入到API Server的接口就是master主机节点地址的6443端口")]),s._v(" "),a("li",[s._v("API Server默认情况下要做用户认证")])])]),s._v(" "),a("li",[s._v("2、Scheduler负责调度某一node节点来运行pod")]),s._v(" "),a("li",[s._v("3、Contorller 控制器（统称）")]),s._v(" "),a("li",[s._v("4、Service")])])])]),s._v(" "),a("h2",{attrs:{id:"一、kubectl就是api-server客户端程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、kubectl就是api-server客户端程序"}},[s._v("#")]),s._v(" 一、kubectl就是API Server客户端程序")]),s._v(" "),a("h3",{attrs:{id:"_1-1、api-server介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1、api-server介绍"}},[s._v("#")]),s._v(" 1.1、API Server介绍")]),s._v(" "),a("ul",[a("li",[s._v("k8s API Server提供了k8s各类资源对象（pod,RC,Service等）的增删改查及watch等HTTP Rest接口，是整个系统的数据总线和数据中心。")])]),s._v(" "),a("h4",{attrs:{id:"_1-1-1、api-server的功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1、api-server的功能"}},[s._v("#")]),s._v(" 1.1.1、API Server的功能")]),s._v(" "),a("ul",[a("li",[s._v("API资源类型")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2020.cnblogs.com/blog/1600332/202106/1600332-20210613192747139-1000096792.png",alt:"image"}})]),s._v(" "),a("ul",[a("li",[a("p",[s._v("kubernetes API Server的功能（唯一可以接入API Server就是master主机的6443端口）：")]),s._v(" "),a("ul",[a("li",[s._v("提供了集群管理的REST API接口(包括认证授权、数据校验以及集群状态变更)；   （REST API表征状态转移）")]),s._v(" "),a("li",[s._v("提供其他模块之间的数据交互和通信的枢纽（其他模块通过API Server查询或修改数据，只有API Server才直接操作etcd）;")]),s._v(" "),a("li",[s._v("是资源配额控制的入口；")]),s._v(" "),a("li",[s._v("拥有完备的集群安全机制.")])])]),s._v(" "),a("li",[a("p",[s._v("API Server资源")]),s._v(" "),a("ul",[a("li",[s._v("api接口中的资源分成多个逻辑组合")]),s._v(" "),a("li",[s._v("每个组合：API Group，api群组")]),s._v(" "),a("li",[s._v("每个组可以独立演进")]),s._v(" "),a("li",[s._v("每个组还可以多版本并存")])])]),s._v(" "),a("li",[a("p",[s._v("资源对象的配置格式")]),s._v(" "),a("ul",[a("li",[s._v('API Server接受和返回的所有JSON对象都遵循同一个模式，它们都具有“Kind" 和 “api version” 字段，用于标识对象所属的资源类型、API群组及相关的版本')]),s._v(" "),a("li",[s._v("大多数的对象或列表类型的资源还具有三个嵌套型的字典 metadata、apec和status\n"),a("ul",[a("li",[s._v("metadata : 字段为资源提供的元数据信息，例如：名称、隶属的名称空间和标签等")]),s._v(" "),a("li",[s._v("apec：用于定义用户期望的状态，不同的资源类型，其状态的意义各有不同，例如pod资源最为核心的功能在于运行容器")]),s._v(" "),a("li",[s._v("stats ：则记录着活动对象当前的状态，它由kubernetes系统自行维护，对于用户来说为只读字段")])])]),s._v(" "),a("li",[s._v("kubectl api-resources 命令可以获取集群支持使用的所有资源类型")])])]),s._v(" "),a("li",[a("p",[s._v("和解循环（Reconciliation Loop）")]),s._v(" "),a("ul",[a("li",[s._v("客户端向API Server提交POST请求以创建对象\n"),a("ul",[a("li",[s._v("通过JSON格式的body提交")]),s._v(" "),a("li",[s._v("YAML格式需要事先完成向JSON的转换")]),s._v(" "),a("li",[s._v("对象配置信息保存于etcd中，其定义出的状态也成为“期望的状态（Spec）”")])])]),s._v(" "),a("li",[s._v("stats由控制器通过各界循环（loop）不间断地监控着相关地对象地状态，在对象地当前状态发生改变时运行合适地操作当前状态无限接近期望地状态")])])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2020.cnblogs.com/blog/1600332/202106/1600332-20210613192952354-1453357049.png",alt:"image"}})]),s._v(" "),a("ul",[a("li",[s._v("管理资源对象")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2020.cnblogs.com/blog/1600332/202106/1600332-20210613193008765-432975855.png",alt:"image"}})]),s._v(" "),a("h4",{attrs:{id:"_1-1-2、kube-apiserver工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2、kube-apiserver工作原理"}},[s._v("#")]),s._v(" 1.1.2、kube-apiserver工作原理")]),s._v(" "),a("ul",[a("li",[s._v("kube-apiserver提供了k8s的rest api，实现了认证、授权和准入控制等安全功能，同时也负责了集群状态的存储操作。")]),s._v(" "),a("li",[s._v("kube-apiserver工作原理图")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2020.cnblogs.com/blog/1600332/202106/1600332-20210613193036533-1680238648.png",alt:"image"}})]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("rest api")])]),s._v(" "),a("ul",[a("li",[s._v("kube-apiserver支持同时提供https和http api，其中http api是非安全接口，不做任何认证授权机制，不建议生产环境启用，但两个接口提供的rest api格式相同。")]),s._v(" "),a("li",[s._v("https api 默认监听在6443端口（–secure-port=6443）；")]),s._v(" "),a("li",[s._v("http api 默认监听在127.0.0.1的8080端口（使用参数 --insecure-port=8080）；")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("访问控制说明")])]),s._v(" "),a("ul",[a("li",[s._v("k8s api 每个请求都会经过多阶段的访问控制才会被接受，包括认证、授权及准入控制等。")]),s._v(" "),a("li",[s._v("认证\n"),a("ul",[a("li",[s._v("开启TLS情况下，所有请求都需要首先认证。k8s支持多种认证机制，并且支持同时开启多个认证插件（仅一个认证通过即可），如认证成功，则用户的username会传入授权模块做进一步的授权验证，而认证失败的请求则返回http 401")])])]),s._v(" "),a("li",[s._v("授权\n"),a("ul",[a("li",[s._v("认证之后的请求就到了授权模块，和认证类似，k8s也支持多种授权机制，并支持同时开启多个授权插件（仅一个验证通过即可）。如授权成功，则用户的请求会发送到准入控制模块做进一步的请求验证，失败的请求则返回http403")])])]),s._v(" "),a("li",[s._v("准入控制\n"),a("ul",[a("li",[s._v("用来对请求做进一步的验证或添加默认参数，不同于认证和授权只关心请求的用户和操作，准入控制还会处理请求的内容，并且仅对创建、更新、删除或连接（如代理）等有效，而对读操作无效。准入控制也支持同时开启多个插件，但他们是依次调用的，只有全部插件都通过的请求才可以允许进入系统")])])])])])]),s._v(" "),a("h4",{attrs:{id:"_1-1-3、访问kubernetes-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3、访问kubernetes-api"}},[s._v("#")]),s._v(" 1.1.3、访问kubernetes API")]),s._v(" "),a("p",[a("code",[s._v("k8s通过kube-apiserver这个进程提供服务，该进程运行在单个k8s-master节点上，默认有两个端口。")])]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("本地端口")])]),s._v(" "),a("ul",[a("li",[s._v("1.该端口用于接收HTTP请求；")]),s._v(" "),a("li",[s._v("2.该端口默认值为8080，可以通过API Server的启动参数“–insecure-port”的值来修改默认值；")]),s._v(" "),a("li",[s._v("3.默认的IP地址为“localhost”，可以通过启动参数“–insecure-bind-address”的值来修改该IP地址；")]),s._v(" "),a("li",[s._v("4.非认证或授权的HTTP请求通过该端口访问API Server;")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("安全端口")])]),s._v(" "),a("ul",[a("li",[s._v("1.该端口默认值为6443，可通过启动参数“–secure-port”的值来修改默认值；")]),s._v(" "),a("li",[s._v("2.默认IP地址为非本地（Non-Localhost）网络端口，通过启动参数“–bind-address”设置该值；")]),s._v(" "),a("li",[s._v("3.该端口用于接收HTTPS请求；")]),s._v(" "),a("li",[s._v("4.用于基于Tocken文件或客户端证书及HTTP Base的认证；")]),s._v(" "),a("li",[s._v("5.用于基于策略的授权；")]),s._v(" "),a("li",[s._v("6.默认不启动HTTPS安全访问控制")])])])]),s._v(" "),a("h6",{attrs:{id:"_1-1-3-1、直接访问api-了解即可"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-1、直接访问api-了解即可"}},[s._v("#")]),s._v(" 1.1.3.1、直接访问api（了解即可）")]),s._v(" "),a("ul",[a("li",[s._v("通过本地8080端口使用curl命令能直接获取REST api的信息,例如：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("查看所有支持的api\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl api-versions")]),s._v("\n        admissionregistration.k8s.io/v1\n        admissionregistration.k8s.io/v1beta1\n        apiextensions.k8s.io/v1\n        apiextensions.k8s.io/v1beta1\n        apiregistration.k8s.io/v1\n        apiregistration.k8s.io/v1beta1\n        apps/v1                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 控制器API群组")]),s._v("\n        authentication.k8s.io/v1\n        authentication.k8s.io/v1beta1\n        authorization.k8s.io/v1\n        authorization.k8s.io/v1beta1\n        autoscaling/v1\n        autoscaling/v2beta1\n        autoscaling/v2beta2\n        batch/v1\n        batch/v1beta1\n        certificates.k8s.io/v1beta1\n        coordination.k8s.io/v1\n        coordination.k8s.io/v1beta1\n        csi.storage.k8s.io/v1alpha1\n        events.k8s.io/v1beta1\n        extensions/v1beta1\n        metrics.k8s.io/v1beta1\n        networking.k8s.io/v1\n        networking.k8s.io/v1beta1\n        node.k8s.io/v1beta1\n        policy/v1beta1\n        rbac.authorization.k8s.io/v1\n        rbac.authorization.k8s.io/v1beta1\n        scheduling.k8s.io/v1\n        scheduling.k8s.io/v1beta1\n        storage.k8s.io/v1\n        storage.k8s.io/v1beta1\n        v1                       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#pod为api核心版本的v1当中")]),s._v("\n \n \n \n \n \n查看版本：\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8080/api\n查看支持的资源对象：\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8080/api/v1\n查看资源对象信息：\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8080/api/v1/nodes\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8080/api/v1/pods\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8080/api/v1/services\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8080/api/v1/replicationcontrollers\n具体到某一个具体的对象：\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8080/api/v1/nodes/10.0.0.3\n指定不同namespace中的对象进行访问：\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  http://127.0.0.1:8080/api/v1/namespaces/default/services/php-apache\n直接访问后端服务内容：\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  http://127.0.0.1:8080/api/v1/namespaces/default/services/http:tomcat-service:/proxy/\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  http://127.0.0.1:8080/api/v1/namespaces/default/services/http:php-apache:/proxy/\n其他的API信息：\n       "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8080/apis/batch/v1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br")])]),a("h5",{attrs:{id:"_1-1-3-2、kubernetes-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-2、kubernetes-proxy"}},[s._v("#")]),s._v(" 1.1.3.2、Kubernetes Proxy")]),s._v(" "),a("ul",[a("li",[s._v("Kubernetes Proxy主要用于代理REST请求。 可以通过这种代理方式将API Server收到的REST请求转发到某个Node上的kubelet上，由Kubelet负责响应。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("创建一个Proxy 接口"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("此处创建一个监听本地10.0.0.1上的8001端口"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("：\n    kubectl proxy --port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8001")]),s._v(" --accept-hosts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.*'")]),s._v(" --address"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10.0.0.1'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n \n \n 如果需要对访问的资源和源地址进行限制，可以使用正则进行匹配，限制对services进行访问：\n     kubectl  proxy --port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8001")]),s._v("  --accept-hosts"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.*'")]),s._v("  --address"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.1  --reject-paths"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'^/api/v1/services'")]),s._v("\n \n \n通过此端口可以在外部直接访问此api代理，在新的版本中，访问方式和常规访问的URL一致：\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  http://10.0.0.1:8001/api/v1/pods\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  http://10.0.0.1:8001/api/v1/nodes\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  http://10.0.0.1:8001/api/v1/services\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  http://10.0.0.1:8001/api/v1/replicationcontrollers\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  http://10.0.0.1:8001/api/v1/namespaces/default/pods/tomcat-deployment-65799d5fc4-5dx4h\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  http://10.0.0.1:8001/api/v1/namespaces/default/services/http:php-apache:/proxy/\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".0.1:8001/apis/batch/v1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h3",{attrs:{id:"_1-2、api-server客户端-kubectl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2、api-server客户端-kubectl"}},[s._v("#")]),s._v(" 1.2、API Server客户端-kubectl")]),s._v(" "),a("h4",{attrs:{id:"_1-2-1、kubectl概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1、kubectl概述"}},[s._v("#")]),s._v(" 1.2.1、kubectl概述")]),s._v(" "),a("ul",[a("li",[s._v("kubectl是Kubernetes集群的命令行工具，通过kubectl能够对集群本身进行管理，并能够在集群上进行容器化应用的安装部署。运行kubectl命令的语法如下所示：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ kubectl "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("command"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n \n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#comand:")]),s._v("\n    指定要对资源执行的操作，例如：create、get、describe和delete\n \n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#type：")]),s._v("\n    指定资源类型，资源类型是大小敏感的。开发者能够以单数、复数和缩略的形式，例如：\n    $ kubectl get pod pod1\n    $ kubectl get pods pod1\n    $ kubectl get po pod1\n \n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#name:")]),s._v("\n    指定资源的名称，名称也是大小写敏感的，如果省略名称，则会显示所有资源，例如：\n    $ kubectl get pods\n \n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#flags：")]),s._v("\n    指定可选的参数，例如，使用-s或者--server参数指定kubernetes API Server的地址和端口\n    另外，可以通过kubectl help获取更多的信息\n \n \n~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#新手使用的基本命令")]),s._v("\nBasic Commands "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Beginner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n  create         Create a resource from a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or from stdin.  在服务器上增加一个资源\n  expose         使用 replication controller, service, deployment 或者 pod 并暴露它作为一个 新的Kubernetes Service\n  run            在集群中运行一个指定的镜像\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v("            为 objects 设置一个指定的特征\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#中级基础命令")]),s._v("\nBasic Commands "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Intermediate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n  explain        查看资源的文档\n  get            显示一个或更多 resources\n  edit           在服务器上编辑一个资源\n  delete         Delete resources by filenames, stdin, resources and names, or by resources and label selector  在服务器上删除一个资源\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#部署应用程序相关的命令")]),s._v("\nDeploy Commands:\n  rollout        Manage the rollout of a resource  滚动、回滚\n  scale          为 Deployment, ReplicaSet, Replication Controller 或者 Job 设置一个新的副本数量\n  autoscale      自动调整一个 Deployment, ReplicaSet, 或者 ReplicationController 的副本数量\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#集群管理相关的命令")]),s._v("\nCluster Management Commands:\n  certificate    修改 certificate（证书） 资源.\n  cluster-info   显示集群信息\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v("            Display Resource "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CPU/Memory/Storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" usage.   cpu、内存、存储\n  cordon         标记 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" 为 unschedulable       标记一个节点不可被调用\n  uncordon       标记 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" 为 schedulable         标记一个节点可被调用\n  drain          Drain "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" preparation "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" maintenance   排干模式\n  taint          更新一个或者多个 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" 上的 taints           给节点增加污点\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#疑难解答和调试命令")]),s._v("\nTroubleshooting and Debugging Commands:\n  describe       显示一个指定 resource 或者 group 的 resources 详情     描述一个资源的详细信息\n  logs           输出容器在 pod 中的日志\n  attach         Attach 到一个运行中的 container\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("           在一个 container 中执行一个命令\n  port-forward   Forward one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" ports to a pod    端口转发\n  proxy          运行一个 proxy 到 Kubernetes API server\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v("             复制 files 和 directories 到 containers 和从容器中复制 files 和 directories.    容器之间复制数据，跨容器复制数据\n  auth           Inspect authorization    测试认证\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#高级命令")]),s._v("\nAdvanced Commands:\n  apply          通过文件名或标准输入流"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stdin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("对资源进行配置           创建修改\n  patch          使用 strategic merge patch 更新一个资源的 field"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    打补丁\n  replace        通过 filename 或者 stdin替换一个资源                  替换\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v("           Experimental: Wait "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" one condition on one or many resources\n  convert        在不同的 API versions 转换配置文件\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置命令")]),s._v("\nSettings Commands:\n  label          更新在这个资源上的 labels                             打标签\n  annotate       更新一个资源的注解                                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注解，比labels简单，可打上长度不受限制的K/V对")]),s._v("\n  completion     Output shell completion code "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the specified shell "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bash or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zsh")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     命令补全\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#其余的命令")]),s._v("\nOther Commands:\n  alpha          Commands "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("features")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" alpha\n  api-resources  Print the supported API resources on the server\n  api-versions   Print the supported API versions on the server, "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the form of "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"group/version"')]),s._v("\n  config         修改 kubeconfig 文件\n  plugin         Runs a command-line plugin      关于插件\n  version        输出 client 和 server 的版本信息\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br")])]),a("h3",{attrs:{id:"_1-3、kubectl常用命令表格"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3、kubectl常用命令表格"}},[s._v("#")]),s._v(" 1.3、kubectl常用命令表格")]),s._v(" "),a("ul",[a("li",[s._v("kubectl作为kubernetes的命令行工具，主要的职责就是对集群中的资源的对象进行操作，这些操作包括对资源对象的创建、删除和查看等。下表中显示了kubectl支持的所有操作，以及这些操作的语法和描述信息：")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("操作")]),s._v(" "),a("th",[s._v("语法")]),s._v(" "),a("th",[s._v("描述")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("annotate")]),s._v(" "),a("td",[s._v("kubectl annotate (-f FILENAME | TYPE NAME | TYPE/NAME) KEY_1=VAL_1 … KEY_N=VAL_N [–overwrite] [–all] [–resource-version=version] [flags]")]),s._v(" "),a("td",[s._v("添加或更新一个或多个资源的注释")])]),s._v(" "),a("tr",[a("td",[s._v("api-versions")]),s._v(" "),a("td",[s._v("kubectl api-versions [flags]")]),s._v(" "),a("td",[s._v("列出可用的API版本")])]),s._v(" "),a("tr",[a("td",[s._v("apply")]),s._v(" "),a("td",[s._v("kubectl apply -f FILENAME [flags]")]),s._v(" "),a("td",[s._v("将来自于文件或stdin的配置变更应用到主要对象中")])]),s._v(" "),a("tr",[a("td",[s._v("attach")]),s._v(" "),a("td",[s._v("kubectl attach POD -c CONTAINER [-i] [-t] [flags]")]),s._v(" "),a("td",[s._v("连接到正在运行的容器上，以查看输出流或与容器交互（stdin）")])]),s._v(" "),a("tr",[a("td",[s._v("autoscale")]),s._v(" "),a("td",[s._v("kubectl autoscale (-f FILENAME | TYPE NAME | TYPE/NAME) [–min=MINPODS] –max=MAXPODS [–cpu-percent=CPU] [flags]")]),s._v(" "),a("td",[s._v("自动扩宿容由副本控制器管理的Pod")])]),s._v(" "),a("tr",[a("td",[s._v("cluster-info")]),s._v(" "),a("td",[s._v("kubectl cluster-info [flags]")]),s._v(" "),a("td",[s._v("显示群集中的主节点和服务的的端点信息")])]),s._v(" "),a("tr",[a("td",[s._v("config")]),s._v(" "),a("td",[s._v("kubectl config SUBCOMMAND [flags]")]),s._v(" "),a("td",[s._v("修改kubeconfig文件")])]),s._v(" "),a("tr",[a("td",[s._v("create")]),s._v(" "),a("td",[s._v("kubectl create -f FILENAME [flags]")]),s._v(" "),a("td",[s._v("从文件或stdin中创建一个或多个资源对象")])]),s._v(" "),a("tr",[a("td",[s._v("delete")]),s._v(" "),a("td",[s._v("kubectl delete (-f FILENAME | TYPE [NAME | /NAME | -l label | –all]) [flags]")]),s._v(" "),a("td",[s._v("删除资源对象")])]),s._v(" "),a("tr",[a("td",[s._v("describe")]),s._v(" "),a("td",[s._v("kubectl describe (-f FILENAME | TYPE [NAME_PREFIX | /NAME | -l label]) [flags]")]),s._v(" "),a("td",[s._v("显示一个或者多个资源对象的详细信息")])]),s._v(" "),a("tr",[a("td",[s._v("edit")]),s._v(" "),a("td",[s._v("kubectl edit (-f FILENAME | TYPE NAME | TYPE/NAME) [flags]")]),s._v(" "),a("td",[s._v("通过默认编辑器编辑和更新服务器上的一个或多个资源对象")])]),s._v(" "),a("tr",[a("td",[s._v("exec")]),s._v(" "),a("td",[s._v("kubectl exec POD [-c CONTAINER] [-i] [-t] [flags] [– COMMAND [args…]]")]),s._v(" "),a("td",[s._v("在Pod的容器中执行一个命令")])]),s._v(" "),a("tr",[a("td",[s._v("explain")]),s._v(" "),a("td",[s._v("kubectl explain [–include-extended-apis=true] [–recursive=false] [flags]")]),s._v(" "),a("td",[s._v("获取Pod、Node和服务等资源对象的文档")])]),s._v(" "),a("tr",[a("td",[s._v("expose")]),s._v(" "),a("td",[s._v("kubectl expose (-f FILENAME | TYPE NAME | TYPE/NAME) [–port=port] [–protocol=TCP|UDP] [–target-port=number-or-name] [–name=name] [—-external-ip=external-ip-of-service] [–type=type] [flags]")]),s._v(" "),a("td",[s._v("为副本控制器、服务或Pod等暴露一个新的服务")])]),s._v(" "),a("tr",[a("td",[s._v("get")]),s._v(" "),a("td",[s._v("kubectl get (-f FILENAME | TYPE [NAME | /NAME | -l label]) [–watch] [–sort-by=FIELD] [[-o | –output]=OUTPUT_FORMAT] [flags]")]),s._v(" "),a("td",[s._v("列出一个或多个资源")])]),s._v(" "),a("tr",[a("td",[s._v("label")]),s._v(" "),a("td",[s._v("kubectl label (-f FILENAME | TYPE NAME | TYPE/NAME) KEY_1=VAL_1 … KEY_N=VAL_N [–overwrite] [–all] [–resource-version=version] [flags]")]),s._v(" "),a("td",[s._v("添加或更新一个或者多个资源对象的标签")])]),s._v(" "),a("tr",[a("td",[s._v("logs")]),s._v(" "),a("td",[s._v("kubectl logs POD [-c CONTAINER] [–follow] [flags]")]),s._v(" "),a("td",[s._v("显示Pod中一个容器的日志")])]),s._v(" "),a("tr",[a("td",[s._v("patch")]),s._v(" "),a("td",[s._v("kubectl patch (-f FILENAME | TYPE NAME | TYPE/NAME) –patch PATCH [flags]")]),s._v(" "),a("td",[s._v("使用策略合并补丁过程更新资源对象中的一个或多个字段")])]),s._v(" "),a("tr",[a("td",[s._v("port-forward")]),s._v(" "),a("td",[s._v("kubectl port-forward POD [LOCAL_PORT:]REMOTE_PORT […[LOCAL_PORT_N:]REMOTE_PORT_N] [flags]")]),s._v(" "),a("td",[s._v("将一个或多个本地端口转发到Pod")])])])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("proxy")]),s._v(" "),a("th",[s._v("kubectl proxy [–port=PORT] [–www=static-dir] [–www-prefix=prefix] [–api-prefix=prefix] [flags]")]),s._v(" "),a("th",[s._v("为kubernetes API服务器运行一个代理")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("replace")]),s._v(" "),a("td",[s._v("kubectl replace -f FILENAME")]),s._v(" "),a("td",[s._v("从文件或stdin中替换资源对象")])]),s._v(" "),a("tr",[a("td",[s._v("rolling-update")]),s._v(" "),a("td",[s._v("kubectl rolling-update OLD_CONTROLLER_NAME ([NEW_CONTROLLER_NAME] –image=NEW_CONTAINER_IMAGE | -f NEW_CONTROLLER_SPEC) [flags]")]),s._v(" "),a("td",[s._v("通过逐步替换指定的副本控制器和Pod来执行滚动更新")])]),s._v(" "),a("tr",[a("td",[s._v("run")]),s._v(" "),a("td",[s._v("kubectl run NAME –image=image [–env=”key=value”] [–port=port] [–replicas=replicas] [–dry-run=bool] [–overrides=inline-json] [flags]")]),s._v(" "),a("td",[s._v("在集群上运行一个指定的镜像")])]),s._v(" "),a("tr",[a("td",[s._v("scale")]),s._v(" "),a("td",[s._v("kubectl scale (-f FILENAME | TYPE NAME | TYPE/NAME) –replicas=COUNT [–resource-version=version] [–current-replicas=count] [flags]")]),s._v(" "),a("td",[s._v("扩宿容副本集的数量")])]),s._v(" "),a("tr",[a("td",[s._v("version")]),s._v(" "),a("td",[s._v("kubectl version [–client] [flags]")]),s._v(" "),a("td",[s._v("显示运行在客户端和服务器端的Kubernetes版本")])])])]),s._v(" "),a("h3",{attrs:{id:"_1-4、kubectl实战命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4、kubectl实战命令"}},[s._v("#")]),s._v(" 1.4、kubectl实战命令")]),s._v(" "),a("h4",{attrs:{id:"_1-4-1、集群信息查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1、集群信息查看"}},[s._v("#")]),s._v(" 1.4.1、集群信息查看")]),s._v(" "),a("h5",{attrs:{id:"_1-4-1-1、显示集群信息及节点详细信息-kubectl-get"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-1、显示集群信息及节点详细信息-kubectl-get"}},[s._v("#")]),s._v(" 1.4.1.1、显示集群信息及节点详细信息 kubectl get")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、显示集群节点信息\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get nodes")]),s._v("\n    NAME            STATUS   ROLES    AGE   VERSION\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141   Ready    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   41m   v1.16.4\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.185   Ready    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   37m   v1.16.4\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.211   Ready    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   42m   v1.16.4\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.247   Ready    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   36m   v1.16.4\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.51    Ready    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   33m   v1.16.4\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、查看kubectl和apiserver各自的版本\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl version")]),s._v("\n    Client Version: version.Info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("Major:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(", Minor:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"16"')]),s._v(", GitVersion:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1.16.4"')]),s._v(", GitCommit:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"224be7bdce5a9dd0c2fd0d46b83865648e2fe0ba"')]),s._v(", GitTreeState:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clean"')]),s._v(", BuildDate:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2019-12-11T12:47:40Z"')]),s._v(", GoVersion:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"go1.12.12"')]),s._v(", Compiler:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gc"')]),s._v(",   Platform:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux/amd64"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    Server Version: version.Info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("Major:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(", Minor:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"16"')]),s._v(", GitVersion:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1.16.4"')]),s._v(", GitCommit:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"224be7bdce5a9dd0c2fd0d46b83865648e2fe0ba"')]),s._v(", GitTreeState:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clean"')]),s._v(", BuildDate:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2019-12-11T12:37:43Z"')]),s._v(", GoVersion:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"go1.12.12"')]),s._v(", Compiler:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gc"')]),s._v(", Platform:"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux/amd64"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、查看整个集群的信息\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl cluster-info")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#向外输出的API地址")]),s._v("\n    Kubernetes master is running at https://192.168.1.129:6443\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#coredns  从集群外部运行获取路径，集群外部的端口转发的访问方式")]),s._v("\n    CoreDNS is running at https://192.168.1.129:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n    To further debug and diagnose cluster problems, use "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubectl cluster-info dump'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n \n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、查看一个node节点的详细信息\n~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl describe node 192.168.1.141")]),s._v("\nName:               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141\nRoles:              "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nLabels:             "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("UhostID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("uhost-jjckmq54\n                    beta.kubernetes.io/arch"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64\n                    beta.kubernetes.io/os"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("linux\n                    failure-domain.beta.kubernetes.io/region"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cn-bj2\n                    failure-domain.beta.kubernetes.io/zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cn-bj2-05\n                    kubernetes.io/arch"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64\n                    kubernetes.io/hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141\n                    kubernetes.io/os"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("linux\n                    node.uk8s.ucloud.cn/instance_type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("uhost\n                    node.uk8s.ucloud.cn/resource_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("uhost-jjckmq54\n                    role.node.kubernetes.io/k8s-node"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n                    topology.udisk.csi.ucloud.cn/region"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cn-bj2\n                    topology.udisk.csi.ucloud.cn/zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("cn-bj2-05\nAnnotations:        csi.volume.kubernetes.io/nodeid: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"udisk.csi.ucloud.cn"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.1.141"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ufile.csi.ucloud.cn"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.1.141"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                    node.alpha.kubernetes.io/ttl: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nCreationTimestamp:  Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":13:18 +0800\nTaints:             "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nUnschedulable:      "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\nConditions:\n  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message\n  ----             ------  -----------------                 ------------------                ------                       -------\n  MemoryPressure   False   Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":55:19 +0800   Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":13:18 +0800   KubeletHasSufficientMemory   kubelet has sufficient memory available\n  DiskPressure     False   Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":55:19 +0800   Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":13:18 +0800   KubeletHasNoDiskPressure     kubelet has no disk pressure\n  PIDPressure      False   Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":55:19 +0800   Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":13:18 +0800   KubeletHasSufficientPID      kubelet has sufficient PID available\n  Ready            True    Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":55:19 +0800   Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":13:18 +0800   KubeletReady                 kubelet is posting ready status\nAddresses:\n  InternalIP:  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141\n  Hostname:    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141\nCapacity:\n cpu:                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n ephemeral-storage:  41931756Ki\n hugepages-1Gi:      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n hugepages-2Mi:      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n memory:             3900272Ki\n pods:               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("110")]),s._v("\nAllocatable:\n cpu:                1800m\n ephemeral-storage:  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38644306266")]),s._v("\n hugepages-1Gi:      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n hugepages-2Mi:      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n memory:             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2745608599")]),s._v("\n pods:               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("110")]),s._v("\nSystem Info:\n Machine ID:                 60bda943e80613c2542b9b1dadb10720\n System UUID:                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26179467")]),s._v("-6182-4bd3-85be-337cbfbade88\n Boot ID:                    abcb11eb-c85f-4f6b-b93a-867b95794a61\n Kernel Version:             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.19")]),s._v(".0-3.el7.ucloud.x86_64\n OS Image:                   CentOS Linux "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n Operating System:           linux\n Architecture:               amd64\n Container Runtime Version:  docker://18.9.9\n Kubelet Version:            v1.16.4\n Kube-Proxy Version:         v1.16.4\nProviderID:                  UCloud://cn-bj2-05//uk8s-z3zv2xip-n-x6oha\nNon-terminated Pods:         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" total"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Namespace                  Name               CPU Requests  CPU Limits  Memory Requests  Memory Limits  AGE\n  ---------                  ----               ------------  ----------  ---------------  -------------  ---\n  kube-system                csi-udisk-qprnf    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("         42m\n  kube-system                csi-ufile-fkvwt    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("         42m\nAllocated resources:\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Total limits may be over "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" percent, i.e., overcommitted."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Resource           Requests  Limits\n  --------           --------  ------\n  cpu                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  memory             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  ephemeral-storage  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nEvents:\n  Type    Reason                   Age                From                       Message\n  ----    ------                   ----               ----                       -------\n  Normal  Starting                 42m                kubelet, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141     Starting kubelet.\n  Normal  NodeHasSufficientMemory  42m "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x2 over 42m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  kubelet, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141     Node "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141 status is now: NodeHasSufficientMemory\n  Normal  NodeHasNoDiskPressure    42m "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x2 over 42m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  kubelet, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141     Node "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141 status is now: NodeHasNoDiskPressure\n  Normal  NodeHasSufficientPID     42m "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x2 over 42m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  kubelet, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141     Node "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141 status is now: NodeHasSufficientPID\n  Normal  NodeAllocatableEnforced  42m                kubelet, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141     Updated Node Allocatable limit across pods\n  Normal  Starting                 42m                kube-proxy, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141  Starting kube-proxy.\n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、查看当前集群中的名称空间\n    在k8s上资源有两个级别\n        集群级别的资源，整个集群可以划分为名称空间\n        节点级别的资源\n     \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get ns     #初始安装完生成的名称空间     kubectl get namespaces")]),s._v("\n    NAME              STATUS   AGE\n    default           Active   3h9m   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认的名称空间")]),s._v("\n    kube-node-lease   Active   3h9m  \n    kube-public       Active   3h9m   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#公共的名称空间，任何人都可以访问的名称空间")]),s._v("\n    kube-system       Active   3h9m   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#系统级别的pod都运行在此名称空间")]),s._v("\n \n     \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("、当使用get pods命令获取系统上的pod时，实际的意思是列出当前系统上pod，但是pod是名称空间级别的资源，没有指定名称空间，默认的为defaults   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#（当我们创建pod时没有指定名称空间时默认都会运行在defaults名称空间中）")]),s._v("\n    kubectl get pods -n 名称空间    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用-n选项指定查看的名称空间下的pod")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -n kube-system")]),s._v("\n    NAME                                    READY   STATUS    RESTARTS   AGE\n    cloudprovider-ucloud-5679f4ff69-flc64   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h14m\n    coredns-68cccdd88-7g46d                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h14m\n    coredns-68cccdd88-q8gmg                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h14m\n    csi-udisk-7h7x2                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h6m\n    csi-udisk-controller-0                  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("/4     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h14m\n    csi-udisk-ps2qb                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h4m\n    csi-udisk-qprnf                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h9m\n    csi-udisk-vnf4j                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h10m\n    csi-udisk-z4lhv                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h1m\n    csi-ufile-8bnst                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h4m\n    csi-ufile-controller-0                  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("/4     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h14m\n    csi-ufile-fd4r2                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h10m\n    csi-ufile-fkvwt                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h9m\n    csi-ufile-hkwpn                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h1m\n    csi-ufile-kmbpc                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h6m\n    metrics-server-c84754b6-ncqvf           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h14m\n    uk8s-kubectl-6585dbb994-6vbss           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h14m\n \n  \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("、显示指定名称空间下的pod资源，并显示详细格式即长格式信息\n    -o wide\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -n kube-system -o wide")]),s._v("\n                                                                                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#pod自己的IP地址    #pod运行的node节点信息")]),s._v("\n    NAME                                    READY   STATUS    RESTARTS   AGE     IP                  NODE            NOMINATED NODE   READINESS GATES\n    cloudprovider-ucloud-5679f4ff69-flc64   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h16m   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.211   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.211   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    coredns-68cccdd88-7g46d                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h16m   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.148   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.211   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    coredns-68cccdd88-q8gmg                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h16m   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.103   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.211   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    csi-udisk-7h7x2                         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3h7m    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.185   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.185   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br")])]),a("h4",{attrs:{id:"_1-4-2、namespace名称空间操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2、namespace名称空间操作"}},[s._v("#")]),s._v(" 1.4.2、Namespace名称空间操作")]),s._v(" "),a("h5",{attrs:{id:"_1-4-2-1、k8s名称空间资源增删改查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-1、k8s名称空间资源增删改查"}},[s._v("#")]),s._v(" 1.4.2.1、k8s名称空间资源增删改查")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、使用kubectl create 查看可以创建的资源类型\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create -h    或者  ~]# kubectl api-resources  可以查看到当前系统上所有的资源类型")]),s._v("\n        Available Commands:\n            clusterrole         Create a ClusterRole.\n            clusterrolebinding  Create a ClusterRoleBinding "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" a particular ClusterRole\n            configmap           Create a configmap from a "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" file, directory or literal value\n            cronjob             Create a cronjob with the specified name.\n            deployment          Create a deployment with the specified name.         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建控制器")]),s._v("\n            job                 Create a job with the specified name.\n            namespace           Create a namespace with the specified name           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建名称空间")]),s._v("\n            poddisruptionbudget Create a pod disruption budget with the specified name.\n            priorityclass       Create a priorityclass with the specified name.\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v("               Create a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("quota")]),s._v(" with the specified name.\n            role                Create a role with single rule.\n            rolebinding         Create a RoleBinding "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" a particular Role or ClusterRole\n            secret              Create a secret using specified subcommand\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("             Create a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" using specified subcommand.          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建service")]),s._v("\n            serviceaccount      Create a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" account with the specified name\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、示例创建一个名称空间\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create namespace develop")]),s._v("\n        namespace/develop created\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get ns")]),s._v("\n        NAME              STATUS   AGE\n        default           Active   3h34m\n        develop           Active   27s\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、删除这个名称空间     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#引用资源删除，要先指定类型，在指明资源名，当删除名称空间时，名称空间下的所有资源都将被删除，此名称空间下的pod也会被删除")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl delete namespaces develop           #等价命令   kubectl delete ns/develop      =   kubectl delete namespaces/develop")]),s._v("\n            namespace "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"develop"')]),s._v(" deleted\n \n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查询")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、查询默认的default名称空间信息\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get ns")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get ns/default    #指定名称空间显示")]),s._v("\n     \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、查看名称空间的详细信息yaml格式\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get ns/default -o yaml")]),s._v("\n    apiVersion: v1                             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#api版本")]),s._v("\n    kind: Namespace                            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#类型为名称空间")]),s._v("\n    metadata:                                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#元数据")]),s._v("\n      creationTimestamp: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-17T02:07:43Z"')]),s._v("\n      name: default\n      resourceVersion: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"147"')]),s._v("\n      selfLink: /api/v1/namespaces/default\n      uid: 844c83d8-5d9d-4787-b0fc-ba088c55f8b1\n    spec:                                      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用户期望的状态")]),s._v("\n      finalizers:\n      - kubernetes\n    status:                                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#当前状态")]),s._v("\n      phase: Active\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("、看名称空间的详细信息json格式\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get ns/default -o json")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apiVersion"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v1"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kind"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Namespace"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"metadata"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"creationTimestamp"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-17T02:07:43Z"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"resourceVersion"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"147"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"selfLink"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/api/v1/namespaces/default"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"844c83d8-5d9d-4787-b0fc-ba088c55f8b1"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spec"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"finalizers"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kubernetes"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"phase"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Active"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#描述信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("、查看指定的名称空间的描述信息\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl describe ns/default")]),s._v("\n    Name:         default\n    Labels:       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    Annotations:  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    Status:       Active\n    No resource quota.\n    No resource limits.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br")])]),a("h4",{attrs:{id:"_1-4-3、deployment控制器创建pod资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-3、deployment控制器创建pod资源"}},[s._v("#")]),s._v(" 1.4.3、deployment控制器创建pod资源")]),s._v(" "),a("h5",{attrs:{id:"_1-4-3-1、k8s名称deployment控制器创建pod资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-3-1、k8s名称deployment控制器创建pod资源"}},[s._v("#")]),s._v(" 1.4.3.1、k8s名称deployment控制器创建pod资源")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、查看创建帮助deployment控制器\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create deployment -h")]),s._v("\n        --image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Image name to run.    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定使用哪个镜像运行为一个容器")]),s._v("\n        --save-config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false/true          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#是否保存创建时的命令信息进行保存")]),s._v("\n        --dry-run"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#干跑、测试一下")]),s._v("\n         \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、创建一个deployment控制器靠 nginx镜像运行 pod\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create deploy ngx-dep --image=nginx:1.14-alpine   #此时会创建一个ngx-dep控制器，未知定名称空间则为default，这个控制器则试图创建一个pod，pod中会靠nginx镜像运行")]),s._v("\n        deployment.apps/ngx-dep created\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、显示default名称空间下的所有资源  \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#(已经创建了三个资源：1、deployment.apps/ngx-dep 控制器， 2、中间层replicaset.apps/ngx-dep-d554574bd 3、pod/ngx-dep-d554574bd-q59fj)")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get all")]),s._v("\n        NAME                                READY   STATUS    RESTARTS   AGE\n        pod/ngx-dep-d554574bd-q59fj         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          29m\n \n        NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   AGE\n        service/kubernetes   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".0.1     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP   4h57m\n \n        NAME                           READY   UP-TO-DATE   AVAILABLE   AGE\n        deployment.apps/ngx-dep        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           29m\n \n        NAME                                      DESIRED   CURRENT   READY   AGE\n        replicaset.apps/ngx-dep-d554574bd         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       29m\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、查看当前defaults中的pods以及详细信息\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods")]),s._v("\n    NAME                            READY   STATUS    RESTARTS   AGE\n    ngx-dep-d554574bd-q59fj         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          40m\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -o wide")]),s._v("\n    NAME                            READY   STATUS    RESTARTS   AGE     IP     pod地址         NODE            NOMINATED NODE   READINESS GATES\n    ngx-dep-d554574bd-q59fj         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          41m     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.125      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.51         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n     \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、访问此pod IP\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl -I 192.168.1.125")]),s._v("\n        HTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n        Server: nginx/1.14.2\n        Date: Mon, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" Feb "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v(" 07:17:39 GMT\n        Content-Type: text/html\n        Content-Length: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("612")]),s._v("\n        Last-Modified: Wed, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" 01:08:42 GMT\n        Connection: keep-alive\n        ETag: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5cad421a-264"')]),s._v("\n        Accept-Ranges: bytes\n \n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除pod")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、删除defalut资源下的pod\n    删除此pod发生的结果，此pod由deployment.apps/ngx-dep 控制器控制着此pod，一删除此pod，控制器发现此pod没了，但是控制器已经定义必须要有一个pod，则会重新启动一个pod\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl delete pods/ngx-dep-d554574bd-q59fj    ")]),s._v("\n        pod "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ngx-dep-d554574bd-q59fj"')]),s._v(" deleted\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE\n        ngx-dep-d554574bd-c5sjp         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m41s\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -o wide")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE     IP              NODE            NOMINATED NODE   READINESS GATES\n        ngx-dep-d554574bd-c5sjp         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3m36s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.160   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.247   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl -I 192.168.1.160    访问新的pod地址")]),s._v("\n        HTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n \n \n \n总结：由于创建pod，没有添加service直接供用户访问，则如果pod出现问题时会生成一个全新的pod，则用户访问的IP则会发生变化，如果使得Pod资源发生变化时用户访问的还是一个地址则需要添加service中间层（调度）\n    在创建service时明确指定自身使用什么端口，后端pod上使用什么端口（端口可以一致，但是也可以不一致，但是在一般情况下都保持一致），创建一个service就是创建一个iptables规则或者ipvs规则\n    类似一个DNET规则，但是此规则在每一个node节点上都会生成\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br")])]),a("h4",{attrs:{id:"_1-4-4、service类型示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-4、service类型示例"}},[s._v("#")]),s._v(" 1.4.4、service类型示例")]),s._v(" "),a("h5",{attrs:{id:"_1-4-4-1、k8s名称deployment控制器下创建一个service绑定pod资源-类型为clusterip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-4-1、k8s名称deployment控制器下创建一个service绑定pod资源-类型为clusterip"}},[s._v("#")]),s._v(" 1.4.4.1、k8s名称deployment控制器下创建一个service绑定pod资源 （类型为clusterip）")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("service有四种类型：")]),s._v(" "),a("ul",[a("li",[s._v("clusterip   ：最简单也是最常用")]),s._v(" "),a("li",[s._v("externalname")]),s._v(" "),a("li",[s._v("loadbalancer")]),s._v(" "),a("li",[s._v("nodeport")])])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、查看创建一个service帮助\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create service -h")]),s._v("\n        Create a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" using specified subcommand.\n \n        Aliases:\n        service, svc\n \n        Available Commands:\n          clusterip    Create a ClusterIP service.\n          externalname Create an ExternalName service.\n          loadbalancer Create a LoadBalancer service.\n          nodeport     Create a NodePort service.\n \n        Usage:\n          kubectl create "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("flags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、查看创建clusterip类型的service的帮助\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create service clusterip -h")]),s._v("\n        --tcp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": Port pairs can be specified as "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<port>:<targetPort>'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建service时要指定本地ip及远端ip  （service端口称为本地端口，targetPort指的是被代理的后端的pod的端口）")]),s._v("\n        --dry-run"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#干跑")]),s._v("\n        --clusterip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定集群的ip，如果不指定则动态指定")]),s._v("\n \n \n \n \n------------------------------------------------------------------------------------------错误示例由于没有指定后端pod--------------------------------------------------------------------------------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、为了运行一个nginx创建一个clusterip类型的service\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create service clusterip ngx-svc --tcp=80:80 --dry-run")]),s._v("\n        service/ngx-svc created "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dry run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create service clusterip ngx-svc --tcp=80:80")]),s._v("\n        service/ngx-svc created\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、查看已经创建的service\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get svc")]),s._v("\n                                "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建时未指定--clusterip=''则为动态生成的")]),s._v("\n        NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   AGE\n        kubernetes   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".0.1       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP   5h45m\n        ngx-svc      ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".135.254   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP    41s\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示详细信息")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get svc/ngx-svc -o yaml")]),s._v("\n        apiVersion: v1\n        kind: Service\n        metadata:\n          creationTimestamp: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-17T07:52:16Z"')]),s._v("\n          labels:\n            app: ngx-svc\n          name: ngx-svc\n          namespace: default\n          resourceVersion: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"66291"')]),s._v("\n          selfLink: /api/v1/namespaces/default/services/ngx-svc\n          uid: c6b6062e-fd7b-4363-ac30-c53816ffb147\n        spec:\n          clusterIP: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".135.254\n          ports:\n          - name: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("-80\n            port: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#本地service端口")]),s._v("\n            protocol: TCP\n            targetPort: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#远端pod端口")]),s._v("\n          selector:\n            app: ngx-svc\n          sessionAffinity: None\n          type: ClusterIP\n        status:\n          loadBalancer: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、删除已经创建的service\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl delete svc/ngx-svc")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ngx-svc"')]),s._v(" deleted\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get service")]),s._v("\n        NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   AGE\n        kubernetes   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".0.1     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP   5h50m\n \n------------------------------------------------------------------------------------------以上为错误示例--------------------------------------------------------------------------------\n------------------------------------------------------------------------------------------以下为正确示例--------------------------------------------------------------------------------\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("、正确的创建一个clusterip类型的service   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#当创建的service与deployment同名时，会自动将此deployment 下的pod自动关联")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看已经创建的deployment控制器")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get deployment")]),s._v("\n        NAME           READY   UP-TO-DATE   AVAILABLE   AGE\n        ngx-dep        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           104m\n \n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个和deployment控制同名的service")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create service clusterip ngx-dep --tcp=80:80            # <port>:<targetport> 指定本地端口及远端被代理的pods端口")]),s._v("\n        service/ngx-dep created\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("、查看已经创建的service\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get svc/ngx-dep -o yaml")]),s._v("\n        apiVersion: v1\n        kind: Service\n        metadata:\n          creationTimestamp: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-02-17T08:20:16Z"')]),s._v("\n          labels:                           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#service labels")]),s._v("\n            app: ngx-dep\n          name: ngx-dep\n          namespace: default\n          resourceVersion: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"71648"')]),s._v("\n          selfLink: /api/v1/namespaces/default/services/ngx-dep\n          uid: e9332ba6-29f7-4407-8c7e-6927d0e23d45\n        spec:\n          clusterIP: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".138.37           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# service地址")]),s._v("\n          ports:\n          - name: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("-80\n            port: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n            protocol: TCP\n            targetPort: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n          selector:\n            app: ngx-dep\n          sessionAffinity: None\n          type: ClusterIP\n        status:\n          loadBalancer: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#可以查看到后端被自动关联的pod")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl describe svc/ngx-dep")]),s._v("\n        Name:              ngx-dep\n        Namespace:         default\n        Labels:            "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ngx-dep\n        Annotations:       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        Selector:          "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ngx-dep\n        Type:              ClusterIP\n        IP:                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".138.37\n        Port:              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("-80  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n        TargetPort:        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n        Endpoints:         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.160:80      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#自动被关联的pod（当创建的service与deployment同名时，会自动将此deployment 下的pod自动关联）")]),s._v("\n        Session Affinity:  None\n        Events:            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("、此时访问service地址则会被映射到访问到后端的pod资源\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl -I 10.2.138.37")]),s._v("\n        HTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n        Server: nginx/1.14.2\n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("、测试手动删除当前运行的pod,则控制器则会自动创建一个新的pod，新的pod和之前的pod地址完全不相同，此时再次访问service\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE\n        ngx-dep-d554574bd-c5sjp         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          67m\n     \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl delete pods ngx-dep-d554574bd-c5sjp")]),s._v("\n        pod "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ngx-dep-d554574bd-c5sjp"')]),s._v(" deleted\n \n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -o wide")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE     IP              NODE            NOMINATED NODE   READINESS GATES\n        ngx-dep-d554574bd-mg7jg         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3m57s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.68    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.51    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl describe svc/ngx-dep")]),s._v("\n        Name:              ngx-dep\n        Namespace:         default\n        Labels:            "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ngx-dep\n    Annotations:       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        Selector:          "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ngx-dep\n        Type:              ClusterIP\n        IP:                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".138.37\n        Port:              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("-80  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n        TargetPort:        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n        Endpoints:         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.68:80    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#新的pod地址")]),s._v("\n        Session Affinity:  None\n        Events:            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl -I 10.2.138.37                   #访问service可以正常访问")]),s._v("\n        HTTP/1.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK\n        Server: nginx/1.14.2\n \n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#总结：在控制器的控制下，pod被干掉时，生成一个新的pod，重建的结果还会响应的反应到service上，所以用户可以通过service的地址固定的来访问pod资源")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br"),a("span",{staticClass:"line-number"},[s._v("152")]),a("br"),a("span",{staticClass:"line-number"},[s._v("153")]),a("br"),a("span",{staticClass:"line-number"},[s._v("154")]),a("br"),a("span",{staticClass:"line-number"},[s._v("155")]),a("br"),a("span",{staticClass:"line-number"},[s._v("156")]),a("br"),a("span",{staticClass:"line-number"},[s._v("157")]),a("br"),a("span",{staticClass:"line-number"},[s._v("158")]),a("br"),a("span",{staticClass:"line-number"},[s._v("159")]),a("br"),a("span",{staticClass:"line-number"},[s._v("160")]),a("br"),a("span",{staticClass:"line-number"},[s._v("161")]),a("br"),a("span",{staticClass:"line-number"},[s._v("162")]),a("br"),a("span",{staticClass:"line-number"},[s._v("163")]),a("br"),a("span",{staticClass:"line-number"},[s._v("164")]),a("br"),a("span",{staticClass:"line-number"},[s._v("165")]),a("br"),a("span",{staticClass:"line-number"},[s._v("166")]),a("br"),a("span",{staticClass:"line-number"},[s._v("167")]),a("br"),a("span",{staticClass:"line-number"},[s._v("168")]),a("br"),a("span",{staticClass:"line-number"},[s._v("169")]),a("br")])]),a("h5",{attrs:{id:"_1-4-4-2、如果service的发生改变时用户访问地址改变则使用service的名称空间来访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-4-2、如果service的发生改变时用户访问地址改变则使用service的名称空间来访问"}},[s._v("#")]),s._v(" 1.4.4.2、如果service的发生改变时用户访问地址改变则使用service的名称空间来访问")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、名称空间访问原理\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get svc")]),s._v("\n        NAME         TYPE        CLUSTER-IP    EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   AGE\n        kubernetes   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".0.1      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP   6h31m\n        ngx-dep      ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".138.37   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP    19m\n     \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl ngx-dep")]),s._v("\n        curl: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Could not resolve host: ngx-dep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" Unknown error\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ~]# curl ngx-dep.default.svc.cluster.local")]),s._v("\n \n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个名称空间为默认在k8s中运行的dns即 coredns")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -n kube-system")]),s._v("\n        NAME                                    READY   STATUS    RESTARTS   AGE\n        coredns-68cccdd88-7g46d                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6h33m\n        coredns-68cccdd88-q8gmg                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6h33m\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# coredns也有一个ip地址")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get svc -n kube-system")]),s._v("\n        NAME                   TYPE        CLUSTER-IP     EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                  AGE\n        csi-udisk-controller   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".235.189   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12345")]),s._v("/TCP                6h35m\n        csi-ufile-controller   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".77.27     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12345")]),s._v("/TCP                6h35m\n        kube-dns               ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".0.2       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53")]),s._v("/UDP,53/TCP,9153/TCP   6h35m   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##")]),s._v("\n        metrics-server         ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".190.58    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP                  6h35m\n     \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#所以即使service地址变了，但是service名称没变，都可以通过service的名称访问")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("h5",{attrs:{id:"_1-4-4-3、deployment可以按需求对后端的pod伸缩资源-kubectl-scale"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-4-3、deployment可以按需求对后端的pod伸缩资源-kubectl-scale"}},[s._v("#")]),s._v(" 1.4.4.3、deployment可以按需求对后端的pod伸缩资源  (kubectl scale)")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、创建一个deployment     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##此时会创建一个myapp控制器，未知定名称空间则为default，这个控制器则试图创建一个pod，pod中会靠myapp:v1镜像运行")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  kubectl create deploy myapp --image=ikubernetes/myapp:v1")]),s._v("\n        deployment.apps/myapp created\n     \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、查看已经创建的deploy控制器\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get deploy")]),s._v("\n        NAME           READY   UP-TO-DATE   AVAILABLE   AGE\n        myapp          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("           91s\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、查看此控制器下的pod\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE\n        myapp-5c6976696c-8kpqh          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m22s\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -o wide")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE     IP              NODE            NOMINATED NODE   READINESS GATES\n        myapp-5c6976696c-8kpqh          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3m14s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.236   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、访问此pod\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 192.168.1.236")]),s._v("\n        Hello MyApp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Version: v1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostname.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Pod Name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 192.168.1.236/hostname.html")]),s._v("\n        myapp-5c6976696c-8kpqh\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、给myapp的控制器创建一个对应的service\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create service clusterip myapp --tcp=80:80")]),s._v("\n        service/myapp created\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("、由于创建的service和控制器名称一致，则自动被关联的此控制器下的pod\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get svc")]),s._v("\n        NAME         TYPE        CLUSTER-IP    EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   AGE\n        kubernetes   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".0.1      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP   6h55m\n        myapp        ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".35.177   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP    2m8s\n        ngx-dep      ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".138.37   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP    42m\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("、查看此service的详细信息\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get svc/myapp -o yaml")]),s._v("\n \n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl describe svc/myapp")]),s._v("\n        Name:              myapp\n        Namespace:         default\n        Labels:            "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myapp\n        Annotations:       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        Selector:          "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myapp\n        Type:              ClusterIP\n        IP:                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".35.177\n        Port:              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("-80  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n        TargetPort:        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n        Endpoints:         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.236:80\n        Session Affinity:  None\n        Events:            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("、通过service的ip访问后端的pod\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 10.2.35.177")]),s._v("\n        Hello MyApp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Version: v1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostname.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Pod Name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 10.2.35.177/hostname.html")]),s._v("\n        myapp-5c6976696c-8kpqh\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl myapp.default.svc.cluster.local.")]),s._v("\n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("、控制器可以对后端的pod扩缩容\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl scale -h")]),s._v("\n        kubectl scale "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--resource-version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--current-replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" --replicas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("COUNT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-f FILENAME "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" TYPE NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定扩容的pod资源数量， 控制器名称")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl scale --replicas=3 deployment myapp")]),s._v("\n        deployment.apps/myapp scaled\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("、查看已经扩展的pod资源\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE\n        myapp-5c6976696c-8kpqh          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          23m\n        myapp-5c6976696c-sxt79          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m7s\n        myapp-5c6976696c-xsvn2          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m7s\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods -o wide")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE     IP              NODE            NOMINATED NODE   READINESS GATES\n        myapp-5c6976696c-8kpqh          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          24m     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.236   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.141   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        myapp-5c6976696c-sxt79          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m43s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.67    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.247   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        myapp-5c6976696c-xsvn2          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m43s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.233   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.51    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("、查看service，会自动的将新创建pod关联到service的Endpoints地址\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl describe svc/myapp")]),s._v("\n        Name:              myapp\n        Namespace:         default\n        Labels:            "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myapp\n        Annotations:       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        Selector:          "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myapp\n        Type:              ClusterIP\n        IP:                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".35.177\n        Port:              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("-80  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n        TargetPort:        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n        Endpoints:         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.233:80,192.168.1.236:80,192.168.1.67:80\n        Session Affinity:  None\n        Events:            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("、此时访问service地址会实现pod的资源调度  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认的调度方式是随机调度")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 10.2.35.177/hostname.html")]),s._v("\n            myapp-5c6976696c-sxt79\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 10.2.35.177/hostname.html")]),s._v("\n            myapp-5c6976696c-xsvn2\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 10.2.35.177/hostname.html")]),s._v("\n            myapp-5c6976696c-8kpqh\n \n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("、pod资源缩容\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl scale --replicas=2 deployment myapp")]),s._v("\n        deployment.apps/myapp scaled\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get pods")]),s._v("\n        NAME                            READY   STATUS    RESTARTS   AGE\n        myapp-5c6976696c-8kpqh          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          34m\n        myapp-5c6976696c-sxt79          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          13m\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br")])]),a("h5",{attrs:{id:"_1-4-4-5、deployment控制器下创建一个service绑定pod资源-类型为nodeport即节点端口类型-使得集群外部访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-4-5、deployment控制器下创建一个service绑定pod资源-类型为nodeport即节点端口类型-使得集群外部访问"}},[s._v("#")]),s._v(" 1.4.4.5、deployment控制器下创建一个service绑定pod资源 （类型为nodeport即节点端口类型）使得集群外部访问")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、删除之前创建的service\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl delete svc/myapp")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myapp"')]),s._v(" deleted\n \n     ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get service")]),s._v("\n     ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get deploy")]),s._v("\n        NAME    READY   UP-TO-DATE   AVAILABLE   AGE\n        myapp   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/3     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("           42s\n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、创建一个nodeport类型的service\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create service nodeport -h")]),s._v("\n        kubectl create "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" nodeport NAME "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--tcp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port:targetPort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--dry-run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl create service nodeport myapp --tcp=80:80")]),s._v("\n        service/myapp created\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get service")]),s._v("\n        NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("        AGE\n        kubernetes   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".0.1       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("/TCP        8h\n        myapp        NodePort    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".236.100   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":34765/TCP   4s      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#80为service端口，34765为宿主机的端口")]),s._v("\n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、由于创建的service和控制器名称一致，则自动被关联的此控制器下的pod\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl get deploy")]),s._v("\n        NAME           READY   UP-TO-DATE   AVAILABLE   AGE\n        myapp          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("           77m\n \n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl describe service/myapp")]),s._v("\n        Name:                     myapp\n        Namespace:                default\n        Labels:                   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myapp\n        Annotations:              "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        Selector:                 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myapp\n        Type:                     NodePort\n        IP:                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),s._v(".236.100\n        Port:                     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("-80  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n        TargetPort:               "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n        NodePort:                 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("-80  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("34765")]),s._v("/TCP\n        Endpoints:                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.236:80,192.168.1.67:80\n        Session Affinity:         None\n        External Traffic Policy:  Cluster\n        Events:                   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、通过集群中任何节点主机访问34765端口 （其实是反应在每一个主机的iptables规则中  ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# iptables -t nat -vnL）")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 192.168.1.141:34765")]),s._v("\n        Hello MyApp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Version: v1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostname.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Pod Name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 192.168.1.185:34765")]),s._v("\n        Hello MyApp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Version: v1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostname.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Pod Name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl 192.168.1.211:34765")]),s._v("\n        Hello MyApp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Version: v1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hostname.html"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Pod Name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n \n \n \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("、防火墙策略查看\n    会生成NodePort类型的防火墙规则，这些都是kube-proxy自动转换的iptable或ipvs规则\n~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# iptables -t nat -vnL")]),s._v("\nChain KUBE-NODEPORTS "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" references"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n pkts bytes target     prot opt "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("     out     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v("               destination        \n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" KUBE-MARK-MASQ  tcp  --  *      *       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0/0            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0/0            /* default/myapp:80-80 */ tcp dpt:32474\n    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" KUBE-SVC-IJFIQBSXQ4XPPRV7  tcp  --  *      *       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0/0            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0/0            /* default/myapp:80-80 */ tcp dpt:32474\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);