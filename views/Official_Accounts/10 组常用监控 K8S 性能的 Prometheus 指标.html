<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>10 组常用监控 K8S 性能的 Prometheus 指标 | SRE运维充电站</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/images/favicon.svg">
    <script>var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?668842dc21c1b8f215b000531ec8f69e";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();</script>
    <meta name="description" content="这个杀手不太冷">
    <meta name="baidu_union_verify" content="a0036ccf0b657813fb236f80f376c429">
    <meta name="Keywords" content="Devops代哲,SRE运维充电站,pyenv.cc,Brains">
    <meta name="author" content="Devops代哲,SRE运维充电站,pyenv.cc,Brains">
    
    <link rel="preload" href="/assets/css/0.styles.938d6ff2.css" as="style"><link rel="preload" href="/assets/js/app.cd5fa041.js" as="script"><link rel="preload" href="/assets/js/3.ee7e7098.js" as="script"><link rel="preload" href="/assets/js/1.277d6ebc.js" as="script"><link rel="preload" href="/assets/js/35.6b05b4ad.js" as="script"><link rel="prefetch" href="/assets/js/10.d3b54896.js"><link rel="prefetch" href="/assets/js/11.f4bb5601.js"><link rel="prefetch" href="/assets/js/12.ed610cd8.js"><link rel="prefetch" href="/assets/js/13.3a9eb8fa.js"><link rel="prefetch" href="/assets/js/14.b6ae182d.js"><link rel="prefetch" href="/assets/js/15.db6f82c2.js"><link rel="prefetch" href="/assets/js/16.3d5e10b6.js"><link rel="prefetch" href="/assets/js/17.471efd1e.js"><link rel="prefetch" href="/assets/js/18.832fe344.js"><link rel="prefetch" href="/assets/js/19.b59cbfac.js"><link rel="prefetch" href="/assets/js/20.472c4b66.js"><link rel="prefetch" href="/assets/js/21.800f456d.js"><link rel="prefetch" href="/assets/js/22.ffd207bc.js"><link rel="prefetch" href="/assets/js/23.323321ef.js"><link rel="prefetch" href="/assets/js/24.b9a5f746.js"><link rel="prefetch" href="/assets/js/25.60904ca4.js"><link rel="prefetch" href="/assets/js/26.fad8d09c.js"><link rel="prefetch" href="/assets/js/27.aaaa8f8c.js"><link rel="prefetch" href="/assets/js/28.d65a84c8.js"><link rel="prefetch" href="/assets/js/29.ce7bd2fb.js"><link rel="prefetch" href="/assets/js/30.f2c39de0.js"><link rel="prefetch" href="/assets/js/31.f02ef496.js"><link rel="prefetch" href="/assets/js/32.0889c36c.js"><link rel="prefetch" href="/assets/js/33.7b2efadd.js"><link rel="prefetch" href="/assets/js/34.4ff3296a.js"><link rel="prefetch" href="/assets/js/36.4322a33f.js"><link rel="prefetch" href="/assets/js/37.73e5620d.js"><link rel="prefetch" href="/assets/js/38.6e6461a9.js"><link rel="prefetch" href="/assets/js/39.0b0071eb.js"><link rel="prefetch" href="/assets/js/4.6d9bb9fb.js"><link rel="prefetch" href="/assets/js/40.692bdf78.js"><link rel="prefetch" href="/assets/js/41.66cfe668.js"><link rel="prefetch" href="/assets/js/42.1b912be2.js"><link rel="prefetch" href="/assets/js/43.116e6cb6.js"><link rel="prefetch" href="/assets/js/44.00d176ef.js"><link rel="prefetch" href="/assets/js/45.06d1d798.js"><link rel="prefetch" href="/assets/js/46.43bfeb5c.js"><link rel="prefetch" href="/assets/js/47.735867da.js"><link rel="prefetch" href="/assets/js/48.12a1df49.js"><link rel="prefetch" href="/assets/js/5.99213a31.js"><link rel="prefetch" href="/assets/js/6.7a0b7b07.js"><link rel="prefetch" href="/assets/js/7.356b6533.js"><link rel="prefetch" href="/assets/js/8.9f6a6c22.js"><link rel="prefetch" href="/assets/js/9.832ff77d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.938d6ff2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>SRE运维充电站</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>这个杀手不太冷</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>Brains</span>
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/favicon.svg" alt="SRE运维充电站" class="logo"> <span class="site-name">SRE运维充电站</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/HTML/" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/CSS/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/Docker/" class="nav-link"><i class="undefined"></i>
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/categories/Kubernetes/" class="nav-link"><i class="undefined"></i>
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/categories/Monitoring/" class="nav-link"><i class="undefined"></i>
  Monitoring
</a></li><li class="dropdown-item"><!----> <a href="/categories/ServiceMesh/" class="nav-link"><i class="undefined"></i>
  ServiceMesh
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-tools"></i>
      工具箱
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.uupoop.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  在线PS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://cowtransfer.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  奶牛快传
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.tiobe.com/tiobe-index/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  编程语言排行榜
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/About/resume.html" class="nav-link"><i class="iconfont reco-document"></i>
  简历
</a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_41989934" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Dz6666" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/Dz6666" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><img src="/images/head_portrait.svg" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    Brains
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>30</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>16</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/HTML/" class="nav-link"><i class="undefined"></i>
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/categories/CSS/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/Docker/" class="nav-link"><i class="undefined"></i>
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/categories/Kubernetes/" class="nav-link"><i class="undefined"></i>
  Kubernetes
</a></li><li class="dropdown-item"><!----> <a href="/categories/Monitoring/" class="nav-link"><i class="undefined"></i>
  Monitoring
</a></li><li class="dropdown-item"><!----> <a href="/categories/ServiceMesh/" class="nav-link"><i class="undefined"></i>
  ServiceMesh
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-tools"></i>
      工具箱
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.uupoop.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  在线PS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://cowtransfer.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  奶牛快传
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.tiobe.com/tiobe-index/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  编程语言排行榜
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/About/resume.html" class="nav-link"><i class="iconfont reco-document"></i>
  简历
</a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_41989934" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Dz6666" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/Dz6666" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>10 组常用监控 K8S 性能的 Prometheus 指标</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>Brains</span>
            
          <!---->
          2022
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">10 组常用监控 K8S 性能的 Prometheus 指标</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>Brains</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>3/17/2022</span></i> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>Prometheus</span></i></div></div> <div class="theme-reco-content content__default"><div class="custom-block tip"><p class="title"></p><p><img src="https://atlas.pingcode.com/files/public/6237160ab57b01cedea524e4" alt="image.png"></p></div> <p></p><div class="table-of-contents"><ul><li><a href="#参考链接">参考链接</a></li><li><a href="#一、kubernetes-资源相关">一、Kubernetes 资源相关</a><ul><li><a href="#_1-1、cputhrottlinghigh">1.1、CPUThrottlingHigh</a></li><li><a href="#_1-2、kubecpuovercommit">1.2、KubeCPUOvercommit</a></li><li><a href="#_1-3、kubememoryovercommit">1.3、KubeMemoryOvercommit</a></li><li><a href="#_1-4、kubecpuquotaovercommit">1.4、KubeCPUQuotaOvercommit</a></li><li><a href="#_1-5、kubememoryquotaovercommit">1.5、KubeMemoryQuotaOvercommit</a></li><li><a href="#_1-6、kubememquotaexceeded">1.6、KubeMEMQuotaExceeded</a></li><li><a href="#_1-7、kubecpuquotaexceeded">1.7、KubeCPUQuotaExceeded</a></li></ul></li><li><a href="#二、kubernetes-存储相关">二、Kubernetes 存储相关</a><ul><li><a href="#_2-1、kubepersistentvolumefillingup">2.1、KubePersistentVolumeFillingUp</a></li><li><a href="#_2-2、kubepersistentvolumefillingup">2.2、KubePersistentVolumeFillingUp</a></li><li><a href="#_2-3、kubepersistentvolumeerrors">2.3、KubePersistentVolumeErrors</a></li></ul></li><li><a href="#三、kubernetes-system-相关">三、kubernetes system 相关</a><ul><li><a href="#_3-1、kubeversionmismatch">3.1、KubeVersionMismatch</a></li><li><a href="#_3-2、kubeclienterrors">3.2、KubeClientErrors</a></li></ul></li><li><a href="#四、apiserver-相关">四、APIServer 相关</a><ul><li><a href="#_4-1、kubeapierrorshigh">4.1、KubeAPIErrorsHigh</a></li><li><a href="#_4-2、kubeclientcertificateexpiration">4.2、KubeClientCertificateExpiration</a></li><li><a href="#_4-3、aggregatedapierrors">4.3、AggregatedAPIErrors</a></li><li><a href="#_4-4、kubeapidown">4.4、KubeAPIDown</a></li></ul></li><li><a href="#五、kubelet-相关">五、kubelet 相关</a><ul><li><a href="#_5-1、kubenodenotready">5.1、KubeNodeNotReady</a></li><li><a href="#_5-3、kubelettoomanypods">5.3、KubeletTooManyPods</a></li><li><a href="#_5-4、kubenodereadinessflapping">5.4、KubeNodeReadinessFlapping</a></li><li><a href="#_5-5、kubeletdown">5.5、KubeletDown</a></li></ul></li><li><a href="#六、k8s集群组件">六、K8S集群组件</a><ul><li><a href="#_6-1、kubeschedulerdown">6.1、KubeSchedulerDown</a></li><li><a href="#_6-2、kubecontrollermanagerdown">6.2、KubeControllerManagerDown</a></li></ul></li><li><a href="#七、etcd相关">七、etcd相关</a><ul><li><a href="#_7-1、etcdlived">7.1、Etcdlived</a></li><li><a href="#_7-2、etcdcluseterunavailable">7.2、EtcdCluseterUnavailable</a></li><li><a href="#_7-3、etcdleadercheck">7.3、EtcdLeaderCheck</a></li><li><a href="#_7-4、etcdbackendfsync">7.4、EtcdBackendFsync</a></li><li><a href="#_7-5、etcdwalfsync">7.5、EtcdWalFsync</a></li><li><a href="#_7-6、etcddbsize">7.6、EtcdDbSize</a></li><li><a href="#_7-7、etcdgrpc">7.7、EtcdGrpc</a></li></ul></li><li><a href="#八、coredns相关">八、CoreDNS相关</a><ul><li><a href="#_8-1、dnsrequest">8.1、DnsRequest</a></li><li><a href="#_8-2、dnsrequestfaild">8.2、DnsRequestFaild</a></li><li><a href="#_8-3、dnspanic">8.3、DnsPanic</a></li></ul></li><li><a href="#九、node相关">九、Node相关</a><ul><li><a href="#_9-1、nodeclocknotsynchronising">9.1、NodeClockNotSynchronising</a></li><li><a href="#_9-2、nodeclockskewdetected">9.2、NodeClockSkewDetected</a></li><li><a href="#_9-3、nodehighnumberconntrackentriesused">9.3、NodeHighNumberConntrackEntriesUsed</a></li><li><a href="#_9-4、nodenetworkreceiveerrs">9.4、NodeNetworkReceiveErrs</a></li><li><a href="#_9-5、nodenetworktransmiterrs">9.5、NodeNetworkTransmitErrs</a></li><li><a href="#_9-6、nodefilesystemalmostoutoffiles">9.6、NodeFilesystemAlmostOutOfFiles</a></li><li><a href="#_9-7、nodefilesystemfilesfillingup">9.7、NodeFilesystemFilesFillingUp</a></li><li><a href="#_9-8、nodefilesystemalmostoutofspace">9.8、NodeFilesystemAlmostOutOfSpace</a></li><li><a href="#_9-9、nodefilesystemspacefillingup">9.9、NodeFilesystemSpaceFillingUp</a></li></ul></li><li><a href="#十、pod相关">十、Pod相关</a><ul><li><a href="#_10-1、kubepodcrashlooping">10.1、KubePodCrashLooping</a></li><li><a href="#_10-2、kubepodnotready">10.2、KubePodNotReady</a></li><li><a href="#_10-3、kubedeploymentgenerationmismatch">10.3、KubeDeploymentGenerationMismatch</a></li><li><a href="#_10-4、kubedeploymentreplicasmismatch">10.4、KubeDeploymentReplicasMismatch</a></li><li><a href="#_10-5、kubestatefulsetreplicasmismatch">10.5、KubeStatefulSetReplicasMismatch</a></li><li><a href="#_10-6、kubestatefulsetupdatenotrolledout">10.6、KubeStatefulSetUpdateNotRolledOut</a></li><li><a href="#_10-7、kubedaemonsetrolloutstuck">10.7、KubeDaemonSetRolloutStuck</a></li><li><a href="#_10-8、kubedaemonsetmisscheduled">10.8、KubeDaemonSetMisScheduled</a></li><li><a href="#_10-9、kubecontainerwaiting">10.9、KubeContainerWaiting</a></li></ul></li></ul></div><p></p> <ul><li>我们在工作中使用Prometheus监控K8S集群时，很容易发现有各种各样大量的告警 Rules，那么哪些是Rules需要我们重点需要关注的呢 ？在这里 Brains为大家梳理出一下 10组 较为重要的监控指标 （可能以下指标可能会受Prometheus版本影响，仅供参考）；</li></ul> <blockquote><h2 id="参考链接"><a href="#参考链接" class="header-anchor">#</a> 参考链接</h2> <ol><li>https://my.oschina.net/54188zz/blog/4305978</li> <li>https://github.com/coreos/kube-prometheus</li> <li>https://github.com/kubernetes-monitoring/kubernetes-mixin</li> <li>https://blog.csdn.net/easylife206/article/details/108656220</li></ol></blockquote> <h2 id="一、kubernetes-资源相关"><a href="#一、kubernetes-资源相关" class="header-anchor">#</a> 一、Kubernetes 资源相关</h2> <h3 id="_1-1、cputhrottlinghigh"><a href="#_1-1、cputhrottlinghigh" class="header-anchor">#</a> 1.1、CPUThrottlingHigh</h3> <ul><li>CPU 的 limit 合理性指标，查出最近5分钟，超过25%的 CPU 执行周期受到限制的容器，表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum(increase(container_cpu_cfs_throttled_periods_total{container!=&quot;&quot;, }[5m])) by (container, pod, namespace)
          /
sum(increase(container_cpu_cfs_periods_total{}[5m])) by (container, pod, namespace)
          &gt; ( 25 / 100 )
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p></p> <ul><li>相关指标：
<ul><li>container_cpu_cfs_periods_total : 容器生命周期中度过的 cpu 周期总数</li> <li>container_cpu_cfs_throttled_periods_total : 容器生命周期中度过的受限的 cpu 周期总数</li></ul></li></ul> <h3 id="_1-2、kubecpuovercommit"><a href="#_1-2、kubecpuovercommit" class="header-anchor">#</a> 1.2、KubeCPUOvercommit</h3> <ul><li>集群 CPU 过度使用，CPU 已经过度使用无法容忍节点故障，节点资源使用的总量超过节点的 CPU 总量，所以如果有节点故障将影响集群资源运行因为所需资源将无法被分配。表达式 ：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum(namespace:kube_pod_container_resource_requests_cpu_cores:sum{})
          /
sum(kube_node_status_allocatable_cpu_cores)
          &gt;
(count(kube_node_status_allocatable_cpu_cores)-1) / count(kube_node_status_allocatable_cpu_cores)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>相关指标：
<ul><li>kube_pod_container_resource_requests_cpu_cores：资源 CPU 使用的 cores 数量</li> <li>kube_node_status_allocatable_cpu_cores：节点 CPU cores 数量</li></ul></li></ul> <h3 id="_1-3、kubememoryovercommit"><a href="#_1-3、kubememoryovercommit" class="header-anchor">#</a> 1.3、KubeMemoryOvercommit</h3> <ul><li>集群内存过度使用，内存已经过度使用无法容忍节点故障，节点资源使用的总量超过节点的内存总量，所以如果有节点故障将影响集群资源运行因为所需资源将无法被分配。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum(namespace:kube_pod_container_resource_requests_memory_bytes:sum{})
          /
        sum(kube_node_status_allocatable_memory_bytes)
          &gt;
        (count(kube_node_status_allocatable_memory_bytes)-1)
          /
        count(kube_node_status_allocatable_memory_bytes)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>相关指标：
<ul><li>kube_pod_container_resource_requests_memory_bytes：资源内存使用的量</li> <li>kube_node_status_allocatable_memory_bytes：节点内存量</li></ul></li></ul> <h3 id="_1-4、kubecpuquotaovercommit"><a href="#_1-4、kubecpuquotaovercommit" class="header-anchor">#</a> 1.4、KubeCPUQuotaOvercommit</h3> <ul><li>集群CPU是否超分，查看 CPU 资源分配的额度是否超过进群总额度。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum(kube_pod_container_resource_limits_cpu_cores{job=&quot;kube-state-metrics&quot;})
          /
        sum(kube_node_status_allocatable_cpu_cores)
          &gt; 1.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>相关指标：
<ul><li>kube_pod_container_resource_limits_cpu_cores：资源分配的 CPU 资源额度</li> <li>kube_node_status_allocatable_cpu_cores：节点 CPU 总量</li></ul></li></ul> <h3 id="_1-5、kubememoryquotaovercommit"><a href="#_1-5、kubememoryquotaovercommit" class="header-anchor">#</a> 1.5、KubeMemoryQuotaOvercommit</h3> <ul><li>集群超分内存，查看内存资源分配的额度是否超过进群总额度。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum(kube_pod_container_resource_limits_memory_bytes{job=&quot;kube-state-metrics&quot;})
          /
        sum(kube_node_status_allocatable_memory_bytes{job=&quot;kube-state-metrics&quot;})
          &gt; 1.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>相关指标:
<ul><li>kube_pod_container_resource_limits_memory_bytes：资源配额内存量</li> <li>kube_node_status_allocatable_memory_bytes：节点内存量</li></ul></li></ul> <h3 id="_1-6、kubememquotaexceeded"><a href="#_1-6、kubememquotaexceeded" class="header-anchor">#</a> 1.6、KubeMEMQuotaExceeded</h3> <ul><li>命名空间级内存资源使用的比例，关乎资源配额。当使用 request 和 limit 限制资源时，使用值和最大值还是有一点区别，当有 request 时说明最低分配了这么多资源。需要注意当 request 等于 limit 时那么说明资源已经是100%已经分配使用当监控告警发出的时候需要区分。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum (kube_pod_container_resource_requests_memory_bytes{job=&quot;kube-state-metrics&quot;} ) by (namespace)
    / (sum(kube_pod_container_resource_limits_memory_bytes{job=&quot;kube-state-metrics&quot;}) by (namespace)) 
    &gt; 0.8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>相关指标:
<ul><li>kube_pod_container_resource_requests_memory_bytes：内存资源使用量</li> <li>kube_pod_container_resource_limits_memory_bytes：内存资源最大值</li></ul></li></ul> <h3 id="_1-7、kubecpuquotaexceeded"><a href="#_1-7、kubecpuquotaexceeded" class="header-anchor">#</a> 1.7、KubeCPUQuotaExceeded</h3> <ul><li>命名空间级 CPU 资源使用的比例，关乎资源配额。当使用 request 和 limit 限制资源时，使用值和最大值还是有一点区别，当有 request 时说明最低分配了这么多资源。需要注意当 request 等于 limit 时那么说明资源已经是100%已经分配使用当监控告警发出的时候需要区分。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum (kube_pod_container_resource_requests_cpu_cores{job=&quot;kube-state-metrics&quot;} ) by (namespace)
    / (sum(kube_pod_container_resource_limits_cpu_cores{job=&quot;kube-state-metrics&quot;}) by (namespace)) 
    &gt; 0.8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>相关指标:
<ul><li>kube_pod_container_resource_requests_cpu_cores：CPU 使用量</li> <li>kube_pod_container_resource_limits_cpu_cores：CPU 限额最大值</li></ul></li></ul> <h2 id="二、kubernetes-存储相关"><a href="#二、kubernetes-存储相关" class="header-anchor">#</a> 二、Kubernetes 存储相关</h2> <h3 id="_2-1、kubepersistentvolumefillingup"><a href="#_2-1、kubepersistentvolumefillingup" class="header-anchor">#</a> 2.1、KubePersistentVolumeFillingUp</h3> <ul><li>PVC 容量监控，表达式 ：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>kubelet_volume_stats_available_bytes{job=&quot;kubelet&quot;, metrics_path=&quot;/metrics&quot;}
          /
        kubelet_volume_stats_capacity_bytes{job=&quot;kubelet&quot;, metrics_path=&quot;/metrics&quot;}
          &lt; 0.3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>相关指标：
<ul><li>kubelet_volume_stats_available_bytes：剩余空间</li> <li>kubelet_volume_stats_capacity_bytes：空间总量</li></ul></li></ul> <h3 id="_2-2、kubepersistentvolumefillingup"><a href="#_2-2、kubepersistentvolumefillingup" class="header-anchor">#</a> 2.2、KubePersistentVolumeFillingUp</h3> <ul><li>磁盘空间耗尽预测，通过PVC资源使用6小时变化率预测 接下来4天的磁盘使用率。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>(kubelet_volume_stats_available_bytes{job=&quot;kubelet&quot;, metrics_path=&quot;/metrics&quot;}
            /
          kubelet_volume_stats_capacity_bytes{job=&quot;kubelet&quot;, metrics_path=&quot;/metrics&quot;}
        ) &lt; 0.4
        and
        predict_linear(kubelet_volume_stats_available_bytes{job=&quot;kubelet&quot;, metrics_path=&quot;/metrics&quot;}[6h], 4 * 24 * 3600) &lt; 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>相关指标:
<ul><li>kubelet_volume_stats_available_bytes：剩余空间</li> <li>kubelet_volume_stats_capacity_bytes：空间总量</li></ul></li></ul> <h3 id="_2-3、kubepersistentvolumeerrors"><a href="#_2-3、kubepersistentvolumeerrors" class="header-anchor">#</a> 2.3、KubePersistentVolumeErrors</h3> <ul><li>PV 使用状态监控，表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>kube_persistentvolume_status_phase{phase=~&quot;Failed|Pending&quot;,job=&quot;kube-state-metrics&quot;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标：
<ul><li>kube_persistentvolume_status_phase：PV 使用状态</li></ul></li></ul> <h2 id="三、kubernetes-system-相关"><a href="#三、kubernetes-system-相关" class="header-anchor">#</a> 三、kubernetes system 相关</h2> <h3 id="_3-1、kubeversionmismatch"><a href="#_3-1、kubeversionmismatch" class="header-anchor">#</a> 3.1、KubeVersionMismatch</h3> <ul><li>组件版本与当前集群版本是否有差异，对比组件版本是否有差异，默认为1 。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>count(count by (gitVersion) (label_replace(kubernetes_build_info{job!~&quot;kube-dns|coredns&quot;},&quot;gitVersion&quot;,&quot;$1&quot;,&quot;gitVersion&quot;,&quot;(v[0-9]*.[0-9]*.[0-9]*).*&quot;)))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标：
<ul><li>kubernetes_build_info：获取组件信息</li></ul></li></ul> <h3 id="_3-2、kubeclienterrors"><a href="#_3-2、kubeclienterrors" class="header-anchor">#</a> 3.2、KubeClientErrors</h3> <ul><li>客户端访问某些接口的错误率。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>(sum(rate(rest_client_requests_total{code=~&quot;5..&quot;}[5m])) by (instance, job)
          /
        sum(rate(rest_client_requests_total[5m])) by (instance, job))
        &gt; 0.01
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>相关指标：
<ul><li>rest_client_requests_total：状态码</li></ul></li></ul> <h2 id="四、apiserver-相关"><a href="#四、apiserver-相关" class="header-anchor">#</a> 四、APIServer 相关</h2> <h3 id="_4-1、kubeapierrorshigh"><a href="#_4-1、kubeapierrorshigh" class="header-anchor">#</a> 4.1、KubeAPIErrorsHigh</h3> <ul><li>APIServer 请求错误率，5分钟内 APIServer 请求错误率。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum(rate(apiserver_request_total{job=&quot;apiserver&quot;,code=~&quot;5..&quot;}[5m])) by (resource,subresource,verb)
          /
        sum(rate(apiserver_request_total{job=&quot;apiserver&quot;}[5m])) by (resource,subresource,verb) &gt; 0.05
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>相关指标：
<ul><li>apiserver_request_total：APIServer 请求数</li></ul></li></ul> <h3 id="_4-2、kubeclientcertificateexpiration"><a href="#_4-2、kubeclientcertificateexpiration" class="header-anchor">#</a> 4.2、KubeClientCertificateExpiration</h3> <ul><li>kubelet 客户端证书过期，监测证书状态30天告警和7天告警。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>apiserver_client_certificate_expiration_seconds_count{job=&quot;apiserver&quot;} &gt; 0 and on(job) histogram_quantile(0.01, sum by (job, le) (rate(apiserver_client_certificate_expiration_seconds_bucket{job=&quot;apiserver&quot;}[5m]))) &lt; 2592000
apiserver_client_certificate_expiration_seconds_count{job=&quot;apiserver&quot;} &gt; 0 and on(job) histogram_quantile(0.01, sum by (job, le) (rate(apiserver_client_certificate_expiration_seconds_bucket{job=&quot;apiserver&quot;}[5m]))) &lt; 604800
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>相关指标：
<ul><li>apiserver_client_certificate_expiration_seconds_count：证书有效剩余时间</li></ul></li></ul> <p></p> <h3 id="_4-3、aggregatedapierrors"><a href="#_4-3、aggregatedapierrors" class="header-anchor">#</a> 4.3、AggregatedAPIErrors</h3> <ul><li>自定义注册的 APIServer 服务可用性监控，当检测到自定义注册的 APIServer 五分钟不用次数达到2次。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum by(name, namespace)(increase(aggregator_unavailable_apiservice_count[5m])) &gt; 2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标:
<ul><li>aggregator_unavailable_apiservice_count：监测自定义注册的 APIService 不可用次数。</li></ul></li></ul> <p></p> <h3 id="_4-4、kubeapidown"><a href="#_4-4、kubeapidown" class="header-anchor">#</a> 4.4、KubeAPIDown</h3> <ul><li>APIserver 失联，监控 APIServer 服务，失联原因可能是服务 down 还可能是网络出现状况。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>absent(up{job=&quot;apiserver&quot;} == 1)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="五、kubelet-相关"><a href="#五、kubelet-相关" class="header-anchor">#</a> 五、kubelet 相关</h2> <h3 id="_5-1、kubenodenotready"><a href="#_5-1、kubenodenotready" class="header-anchor">#</a> 5.1、KubeNodeNotReady</h3> <ul><li>节点是否处于就绪状态，检测节点是否为就绪状态，或者可能是 kubelet 服务down 了。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>kube_node_status_condition{job=&quot;kube-state-metrics&quot;,condition=&quot;Ready&quot;,status=&quot;true&quot;} == 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标：
<ul><li>kube_node_status_condition：节点状态监测</li></ul></li></ul> <h4 id="_5-2、kubenodeunreachable"><a href="#_5-2、kubenodeunreachable" class="header-anchor">#</a> 5.2、KubeNodeUnreachable</h4> <ul><li>节点状态为 Unreachable。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>kube_node_spec_unschedulable{job=&quot;kube-state-metrics&quot;} == 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_5-3、kubelettoomanypods"><a href="#_5-3、kubelettoomanypods" class="header-anchor">#</a> 5.3、KubeletTooManyPods</h3> <ul><li>节点运行过多的 Pod，监测节点上运行的 Pods 数量。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>max(max(kubelet_running_pod_count{job=&quot;kubelet&quot;, metrics_path=&quot;/metrics&quot;}) by(instance) * on(instance) group_left(node) kubelet_node_name{job=&quot;kubelet&quot;, metrics_path=&quot;/metrics&quot;}) by(node) 
    / max(kube_node_status_capacity_pods{job=&quot;kube-state-metrics&quot;} != 1) by(node) &gt; 0.95
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>相关指标：
<ul><li>kubelet_running_pod_count：节点运行的 Pods 数量</li> <li>kubelet_node_name：节点名称</li> <li>kube_node_status_capacity_pods：节点可运行的最大 Pod 数量</li></ul></li></ul> <p></p> <h3 id="_5-4、kubenodereadinessflapping"><a href="#_5-4、kubenodereadinessflapping" class="header-anchor">#</a> 5.4、KubeNodeReadinessFlapping</h3> <ul><li>监测集群状态，查看集群内节点状态改变的频率。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum(changes(kube_node_status_condition{status=&quot;true&quot;,condition=&quot;Ready&quot;}[15m])) by (node) &gt; 2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_5-5、kubeletdown"><a href="#_5-5、kubeletdown" class="header-anchor">#</a> 5.5、KubeletDown</h3> <ul><li>监控 kubelet 服务，down 或者网络出现问题。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>absent(up{job=&quot;kubelet&quot;, metrics_path=&quot;/metrics&quot;} == 1)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="六、k8s集群组件"><a href="#六、k8s集群组件" class="header-anchor">#</a> 六、K8S集群组件</h2> <h3 id="_6-1、kubeschedulerdown"><a href="#_6-1、kubeschedulerdown" class="header-anchor">#</a> 6.1、KubeSchedulerDown</h3> <ul><li>KubeScheduler 失联，监测 KubeScheduler 是否正常。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>absent(up{job=&quot;kube-scheduler&quot;} == 1)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p></p> <h3 id="_6-2、kubecontrollermanagerdown"><a href="#_6-2、kubecontrollermanagerdown" class="header-anchor">#</a> 6.2、KubeControllerManagerDown</h3> <ul><li>监测 KubeControllerManager 服务，Down 或者网络不通。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>absent(up{job=&quot;kube-controller-manager&quot;} == 1)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="七、etcd相关"><a href="#七、etcd相关" class="header-anchor">#</a> 七、etcd相关</h2> <h3 id="_7-1、etcdlived"><a href="#_7-1、etcdlived" class="header-anchor">#</a> 7.1、Etcdlived</h3> <ul><li>etcd 存活检测。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>up{job=&quot;etcd&quot;} &lt; 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_7-2、etcdcluseterunavailable"><a href="#_7-2、etcdcluseterunavailable" class="header-anchor">#</a> 7.2、EtcdCluseterUnavailable</h3> <ul><li>etcd 集群健康检查，down 数量大于集群可允许故障数量。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>count(up{job=&quot;etcd&quot;} == 0) &gt; (count(up{job=&quot;etcd&quot;}) / 2 - 1)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p></p> <h3 id="_7-3、etcdleadercheck"><a href="#_7-3、etcdleadercheck" class="header-anchor">#</a> 7.3、EtcdLeaderCheck</h3> <ul><li>检查 leader。表达式</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>max(etcd_server_has_leader) != 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p></p> <h3 id="_7-4、etcdbackendfsync"><a href="#_7-4、etcdbackendfsync" class="header-anchor">#</a> 7.4、EtcdBackendFsync</h3> <ul><li>etcd io 监测，后端提交 延时。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>histogram_quantile(0.99, sum(rate(etcd_disk_backend_commit_duration_seconds_bucket[5m])) by (instance, le)) &gt; 100
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_7-5、etcdwalfsync"><a href="#_7-5、etcdwalfsync" class="header-anchor">#</a> 7.5、EtcdWalFsync</h3> <ul><li>etcd io 监测，文件同步到磁盘延时。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>histogram_quantile(0.99, sum(rate(etcd_disk_wal_fsync_duration_seconds_bucket[5m])) by (instance, le)) &gt; 100
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_7-6、etcddbsize"><a href="#_7-6、etcddbsize" class="header-anchor">#</a> 7.6、EtcdDbSize</h3> <ul><li>检测数据库大小。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>etcd_debugging_mvcc_db_total_size_in_bytes/1024/1024 &gt; 1024
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_7-7、etcdgrpc"><a href="#_7-7、etcdgrpc" class="header-anchor">#</a> 7.7、EtcdGrpc</h3> <ul><li>Grpc 调用速率。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum(rate(grpc_server_handled_total{grpc_type=&quot;unary&quot;}[1m])) &gt; 100
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="八、coredns相关"><a href="#八、coredns相关" class="header-anchor">#</a> 八、CoreDNS相关</h2> <h3 id="_8-1、dnsrequest"><a href="#_8-1、dnsrequest" class="header-anchor">#</a> 8.1、DnsRequest</h3> <ul><li>DNS 查询速率，每分钟查询超过100告警。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum(irate(coredns_dns_request_count_total{zone !=&quot;dropped&quot;}[1m])) &gt; 100
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_8-2、dnsrequestfaild"><a href="#_8-2、dnsrequestfaild" class="header-anchor">#</a> 8.2、DnsRequestFaild</h3> <ul><li>异常查询，异常状态码，不是 NOERROR。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>irate(coredns_dns_response_rcode_count_total{rcode!=&quot;NOERROR&quot;} [1m]) &gt; 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标：
<ul><li>coredns_dns_response_rcode_count_total：查询返回状态码</li></ul></li></ul> <blockquote><p>DNS-Rcode 作为 DNS 应答报文中有效的字段，主要用来说明 DNS 应答状态，是排查域名解析失败的重要指标。通常常见的 Rcode 值如下：</p> <ul><li>Rcode 值为0，对应的 DNS 应答状态为 NOERROR，意思是成功的响应，即这个域名解析是成功</li> <li>Rcode 值为2，对应的 DNS 应答状态为 SERVFAIL，意思是服务器失败，也就是这个域名的权威服务器拒绝响应或者响应 REFUSE，递归服务器返回 Rcode 值为 2 给 CLIENT</li> <li>Rcode 值为3，对应的 DNS 应答状态为 NXDOMAIN，意思是不存在的记录，也就是这个具体的域名在权威服务器中并不存在</li> <li>Rcode 值为5，对应的 DNS 应答状态为 REFUSE，意思是拒绝，也就是这个请求源IP不在服务的范围内</li></ul></blockquote> <h3 id="_8-3、dnspanic"><a href="#_8-3、dnspanic" class="header-anchor">#</a> 8.3、DnsPanic</h3> <ul><li>DNS 恐慌值，可能收到攻击。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>irate(coredns_panic_count_total[1m]) &gt; 100
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="九、node相关"><a href="#九、node相关" class="header-anchor">#</a> 九、Node相关</h2> <h3 id="_9-1、nodeclocknotsynchronising"><a href="#_9-1、nodeclocknotsynchronising" class="header-anchor">#</a> 9.1、NodeClockNotSynchronising</h3> <ul><li>主机与时间服务器失联。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>min_over_time(node_timex_sync_status[5m]) == 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标：
<ul><li>node_timex_sync_status：同步状态。</li></ul></li></ul> <h3 id="_9-2、nodeclockskewdetected"><a href="#_9-2、nodeclockskewdetected" class="header-anchor">#</a> 9.2、NodeClockSkewDetected</h3> <ul><li>本地时间偏移量。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>(node_timex_offset_seconds &gt; 0.05
        and
          deriv(node_timex_offset_seconds[5m]) &gt;= 0
        )
        or
        (
          node_timex_offset_seconds &lt; -0.05
        and
          deriv(node_timex_offset_seconds[5m]) &lt;= 0)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>相关指标：
<ul><li>node_timex_offset_seconds：误差</li></ul></li></ul> <h3 id="_9-3、nodehighnumberconntrackentriesused"><a href="#_9-3、nodehighnumberconntrackentriesused" class="header-anchor">#</a> 9.3、NodeHighNumberConntrackEntriesUsed</h3> <ul><li>链接状态跟踪。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>(node_nf_conntrack_entries / node_nf_conntrack_entries_limit) &gt; 0.75
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标：
<ul><li>node_nf_conntrack_entries：链接状态跟踪表分配的数量</li> <li>node_nf_conntrack_entries_limit：表总量</li></ul></li></ul> <h3 id="_9-4、nodenetworkreceiveerrs"><a href="#_9-4、nodenetworkreceiveerrs" class="header-anchor">#</a> 9.4、NodeNetworkReceiveErrs</h3> <ul><li>网卡接收错误量。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>increase(node_network_receive_errs_total[2m]) &gt; 10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标：
<ul><li>node_network_receive_errs_total：接收错误总量</li></ul></li></ul> <h3 id="_9-5、nodenetworktransmiterrs"><a href="#_9-5、nodenetworktransmiterrs" class="header-anchor">#</a> 9.5、NodeNetworkTransmitErrs</h3> <ul><li>网卡传输错误量。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>increase(node_network_transmit_errs_total[2m]) &gt; 10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标：
<ul><li>node_network_transmit_errs_total：传输错误总量</li></ul></li></ul> <h3 id="_9-6、nodefilesystemalmostoutoffiles"><a href="#_9-6、nodefilesystemalmostoutoffiles" class="header-anchor">#</a> 9.6、NodeFilesystemAlmostOutOfFiles</h3> <ul><li>inode 数量监测。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>(
          node_filesystem_files_free{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} / node_filesystem_files{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} * 100 &lt; 5
        and
          node_filesystem_readonly{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} == 0
        )
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>相关指标：
<ul><li>node_filesystem_files_free：空闲的 inode</li> <li>node_filesystem_files：inodes 总量</li></ul></li></ul> <h3 id="_9-7、nodefilesystemfilesfillingup"><a href="#_9-7、nodefilesystemfilesfillingup" class="header-anchor">#</a> 9.7、NodeFilesystemFilesFillingUp</h3> <ul><li>inode 耗尽预测，以6小时曲线变化预测接下来24小时和4小时可能使用的 inodes。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>(node_filesystem_files_free{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} / node_filesystem_files{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} * 100 &lt; 20
        and
          predict_linear(node_filesystem_files_free{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;}[6h], 4*60*60) &lt; 0
        and
          node_filesystem_readonly{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} == 0)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>相关指标：
<ul><li>node_filesystem_files_free：空闲的 inode</li> <li>node_filesystem_files：inodes 总量</li></ul></li></ul> <h3 id="_9-8、nodefilesystemalmostoutofspace"><a href="#_9-8、nodefilesystemalmostoutofspace" class="header-anchor">#</a> 9.8、NodeFilesystemAlmostOutOfSpace</h3> <ul><li>分区容量使用率。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>(node_filesystem_avail_bytes{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} / node_filesystem_size_bytes{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} * 100 &lt; 10
        and
          node_filesystem_readonly{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} == 0
        )
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>相关指标：
<ul><li>node_filesystem_avail_bytes：空闲容量</li> <li>node_filesystem_size_bytes：总容量</li></ul></li></ul> <h3 id="_9-9、nodefilesystemspacefillingup"><a href="#_9-9、nodefilesystemspacefillingup" class="header-anchor">#</a> 9.9、NodeFilesystemSpaceFillingUp</h3> <ul><li>分区容量耗尽预测，以6小时曲线变化预测接下来24小时和4小时可能使用的容量。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>(node_filesystem_avail_bytes{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} / node_filesystem_size_bytes{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} * 100 &lt; 15
        and
          predict_linear(node_filesystem_avail_bytes{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;}[6h], 4*60*60) &lt; 0
        and
          node_filesystem_readonly{job=&quot;node-exporter&quot;,fstype!=&quot;&quot;} == 0)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>相关指标：
<ul><li>node_filesystem_avail_bytes：空闲容量</li> <li>node_filesystem_size_bytes：总容量</li></ul></li></ul> <h2 id="十、pod相关"><a href="#十、pod相关" class="header-anchor">#</a> 十、Pod相关</h2> <h3 id="_10-1、kubepodcrashlooping"><a href="#_10-1、kubepodcrashlooping" class="header-anchor">#</a> 10.1、KubePodCrashLooping</h3> <ul><li>Pod 重启时间，重启时间超过3m告警。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>rate(kube_pod_container_status_restarts_total{job=&quot;kube-state-metrics&quot;}[5m]) * 60 * 3 &gt; 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标:
<ul><li>kube_pod_container_status_restarts_total：重启状态 0 为正常</li></ul></li></ul> <h3 id="_10-2、kubepodnotready"><a href="#_10-2、kubepodnotready" class="header-anchor">#</a> 10.2、KubePodNotReady</h3> <ul><li>Pods 没有就绪，检测 Pod 是否就绪。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code> sum by (namespace, pod) (max by(namespace, pod) (kube_pod_status_phase{job=&quot;kube-state-metrics&quot;, phase=~&quot;Pending|Unknown&quot;}) * on(namespace, pod) group_left(owner_kind) max by(namespace, pod, owner_kind) (kube_pod_owner{owner_kind!=&quot;Job&quot;})) &gt; 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标：
<ul><li>kube_pod_status_phase：Pod 状态</li></ul></li></ul> <h3 id="_10-3、kubedeploymentgenerationmismatch"><a href="#_10-3、kubedeploymentgenerationmismatch" class="header-anchor">#</a> 10.3、KubeDeploymentGenerationMismatch</h3> <ul><li>Deployment 部署失败，Deployment 生成的资源与定义的资源不匹配。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>kube_deployment_status_observed_generation{job=&quot;kube-state-metrics&quot;}
          !=
        kube_deployment_metadata_generation{job=&quot;kube-state-metrics&quot;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>相关指标：
<ul><li>kube_deployment_status_observed_generation：Deployment 生成资源数</li> <li>kube_deployment_metadata_generation：Deployment 定义资源数</li></ul></li></ul> <h3 id="_10-4、kubedeploymentreplicasmismatch"><a href="#_10-4、kubedeploymentreplicasmismatch" class="header-anchor">#</a> 10.4、KubeDeploymentReplicasMismatch</h3> <ul><li>查看 Deplyment 副本是否达到预期。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>(
          kube_deployment_spec_replicas{job=&quot;kube-state-metrics&quot;}
            !=
          kube_deployment_status_replicas_available{job=&quot;kube-state-metrics&quot;}
        ) and (
          changes(kube_deployment_status_replicas_updated{job=&quot;kube-state-metrics&quot;}[3m])
            ==
          0
        )
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>相关指标：
<ul><li>kube_deployment_spec_replicas           资源定义副本数</li> <li>kube_deployment_status_replicas_available     正在运行副本数</li> <li>kube_deployment_status_replicas_updated      更新的副本数</li></ul></li></ul> <h3 id="_10-5、kubestatefulsetreplicasmismatch"><a href="#_10-5、kubestatefulsetreplicasmismatch" class="header-anchor">#</a> 10.5、KubeStatefulSetReplicasMismatch</h3> <ul><li>监测 StatefulSet 副本是否达到预期。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>(
          kube_statefulset_status_replicas_ready{job=&quot;kube-state-metrics&quot;}
            !=
          kube_statefulset_status_replicas{job=&quot;kube-state-metrics&quot;}
        ) and (
          changes(kube_statefulset_status_replicas_updated{job=&quot;kube-state-metrics&quot;}[5m])
            ==
          0
        )
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>相关指标：
<ul><li>kube_statefulset_status_replicas_ready：就绪副本数</li> <li>kube_statefulset_status_replicas：当前副本数</li> <li>kube_statefulset_status_replicas_updated：更新的副本数</li></ul></li></ul> <h3 id="_10-6、kubestatefulsetupdatenotrolledout"><a href="#_10-6、kubestatefulsetupdatenotrolledout" class="header-anchor">#</a> 10.6、KubeStatefulSetUpdateNotRolledOut</h3> <ul><li>StatefulSet  更新失败且未回滚，对比版本号和副本数。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>max without (revision) (
          kube_statefulset_status_current_revision{job=&quot;kube-state-metrics&quot;}
            unless
          kube_statefulset_status_update_revision{job=&quot;kube-state-metrics&quot;}
        )
          *
        (
          kube_statefulset_replicas{job=&quot;kube-state-metrics&quot;}
            !=
          kube_statefulset_status_replicas_updated{job=&quot;kube-state-metrics&quot;}
        )
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>相关指标：
<ul><li>kube_statefulset_status_replicas：每个 StatefulSet 的副本数。</li> <li>kube_statefulset_status_replicas_current：每个 StatefulSet 的当前副本数。</li> <li>kube_statefulset_status_replicas_ready：每个StatefulSet 的就绪副本数。</li> <li>kube_statefulset_status_replicas_updated：每个StatefulSet 的更新副本数。</li> <li>kube_statefulset_status_observed_generation：StatefulSet 控制器观察到的生成。</li> <li>kube_statefulset_replicas：StatefulSet 所需的副本数。</li> <li>kube_statefulset_metadata_generation：表示 StatefulSet 所需状态的特定生成的序列号。</li> <li>kube_statefulset_created：创建时间戳。</li> <li>kube_statefulset_labels：Kubernetes 标签转换为 Prometheus 标签。</li> <li>kube_statefulset_status_current_revision：指示用于按顺序(0，currentReplicas)生成 Pod 的StatefulSet 的版本。</li> <li>kube_statefulset_status_update_revision：指示用于按顺序 [replicas-updatedReplicas，replicas] 生成 Pod 的 StatefulSet 的版本。</li></ul></li></ul> <h3 id="_10-7、kubedaemonsetrolloutstuck"><a href="#_10-7、kubedaemonsetrolloutstuck" class="header-anchor">#</a> 10.7、KubeDaemonSetRolloutStuck</h3> <ul><li>监测 DaemonSet 是否处于就绪状态。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>kube_daemonset_status_number_ready{job=&quot;kube-state-metrics&quot;}
          /
        kube_daemonset_status_desired_number_scheduled{job=&quot;kube-state-metrics&quot;} &lt; 1.00
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>相关指标：
<ul><li>kube_daemonset_status_number_ready：就绪的 DaemonSet</li> <li>kube_daemonset_status_desired_number_scheduled：应该调度的 DaemonSet 数量</li></ul></li></ul> <h3 id="_10-8、kubedaemonsetmisscheduled"><a href="#_10-8、kubedaemonsetmisscheduled" class="header-anchor">#</a> 10.8、KubeDaemonSetMisScheduled</h3> <ul><li>DaemonSet  运行在不该运行的节点上面。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>kube_daemonset_status_number_misscheduled{job=&quot;kube-state-metrics&quot;} &gt; 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>相关指标：
<ul><li>kube_daemonset_status_number_misscheduled：运行在不该运行的节点状态</li></ul></li></ul> <h3 id="_10-9、kubecontainerwaiting"><a href="#_10-9、kubecontainerwaiting" class="header-anchor">#</a> 10.9、KubeContainerWaiting</h3> <ul><li>监测哪些容器是在等待状态的。表达式：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>sum by (namespace, pod, container) (kube_pod_container_status_waiting_reason{job=&quot;kube-state-metrics&quot;}) &gt; 0

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>相关指标：
<ul><li>kube_pod_container_status_waiting_reason：容器声明周期过程中的状态，无论是创建成功还是失败都应该是0。</li></ul></li></ul> <p></p> <p></p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#参考链接" class="sidebar-link reco-side-参考链接" data-v-cb1513f6>参考链接</a></li><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#一、kubernetes-资源相关" class="sidebar-link reco-side-一、kubernetes-资源相关" data-v-cb1513f6>一、Kubernetes 资源相关</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_1-1、cputhrottlinghigh" class="sidebar-link reco-side-_1-1、cputhrottlinghigh" data-v-cb1513f6>1.1、CPUThrottlingHigh</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_1-2、kubecpuovercommit" class="sidebar-link reco-side-_1-2、kubecpuovercommit" data-v-cb1513f6>1.2、KubeCPUOvercommit</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_1-3、kubememoryovercommit" class="sidebar-link reco-side-_1-3、kubememoryovercommit" data-v-cb1513f6>1.3、KubeMemoryOvercommit</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_1-4、kubecpuquotaovercommit" class="sidebar-link reco-side-_1-4、kubecpuquotaovercommit" data-v-cb1513f6>1.4、KubeCPUQuotaOvercommit</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_1-5、kubememoryquotaovercommit" class="sidebar-link reco-side-_1-5、kubememoryquotaovercommit" data-v-cb1513f6>1.5、KubeMemoryQuotaOvercommit</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_1-6、kubememquotaexceeded" class="sidebar-link reco-side-_1-6、kubememquotaexceeded" data-v-cb1513f6>1.6、KubeMEMQuotaExceeded</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_1-7、kubecpuquotaexceeded" class="sidebar-link reco-side-_1-7、kubecpuquotaexceeded" data-v-cb1513f6>1.7、KubeCPUQuotaExceeded</a></li><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#二、kubernetes-存储相关" class="sidebar-link reco-side-二、kubernetes-存储相关" data-v-cb1513f6>二、Kubernetes 存储相关</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_2-1、kubepersistentvolumefillingup" class="sidebar-link reco-side-_2-1、kubepersistentvolumefillingup" data-v-cb1513f6>2.1、KubePersistentVolumeFillingUp</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_2-2、kubepersistentvolumefillingup" class="sidebar-link reco-side-_2-2、kubepersistentvolumefillingup" data-v-cb1513f6>2.2、KubePersistentVolumeFillingUp</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_2-3、kubepersistentvolumeerrors" class="sidebar-link reco-side-_2-3、kubepersistentvolumeerrors" data-v-cb1513f6>2.3、KubePersistentVolumeErrors</a></li><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#三、kubernetes-system-相关" class="sidebar-link reco-side-三、kubernetes-system-相关" data-v-cb1513f6>三、kubernetes system 相关</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_3-1、kubeversionmismatch" class="sidebar-link reco-side-_3-1、kubeversionmismatch" data-v-cb1513f6>3.1、KubeVersionMismatch</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_3-2、kubeclienterrors" class="sidebar-link reco-side-_3-2、kubeclienterrors" data-v-cb1513f6>3.2、KubeClientErrors</a></li><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#四、apiserver-相关" class="sidebar-link reco-side-四、apiserver-相关" data-v-cb1513f6>四、APIServer 相关</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_4-1、kubeapierrorshigh" class="sidebar-link reco-side-_4-1、kubeapierrorshigh" data-v-cb1513f6>4.1、KubeAPIErrorsHigh</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_4-2、kubeclientcertificateexpiration" class="sidebar-link reco-side-_4-2、kubeclientcertificateexpiration" data-v-cb1513f6>4.2、KubeClientCertificateExpiration</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_4-3、aggregatedapierrors" class="sidebar-link reco-side-_4-3、aggregatedapierrors" data-v-cb1513f6>4.3、AggregatedAPIErrors</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_4-4、kubeapidown" class="sidebar-link reco-side-_4-4、kubeapidown" data-v-cb1513f6>4.4、KubeAPIDown</a></li><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#五、kubelet-相关" class="sidebar-link reco-side-五、kubelet-相关" data-v-cb1513f6>五、kubelet 相关</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_5-1、kubenodenotready" class="sidebar-link reco-side-_5-1、kubenodenotready" data-v-cb1513f6>5.1、KubeNodeNotReady</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_5-3、kubelettoomanypods" class="sidebar-link reco-side-_5-3、kubelettoomanypods" data-v-cb1513f6>5.3、KubeletTooManyPods</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_5-4、kubenodereadinessflapping" class="sidebar-link reco-side-_5-4、kubenodereadinessflapping" data-v-cb1513f6>5.4、KubeNodeReadinessFlapping</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_5-5、kubeletdown" class="sidebar-link reco-side-_5-5、kubeletdown" data-v-cb1513f6>5.5、KubeletDown</a></li><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#六、k8s集群组件" class="sidebar-link reco-side-六、k8s集群组件" data-v-cb1513f6>六、K8S集群组件</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_6-1、kubeschedulerdown" class="sidebar-link reco-side-_6-1、kubeschedulerdown" data-v-cb1513f6>6.1、KubeSchedulerDown</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_6-2、kubecontrollermanagerdown" class="sidebar-link reco-side-_6-2、kubecontrollermanagerdown" data-v-cb1513f6>6.2、KubeControllerManagerDown</a></li><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#七、etcd相关" class="sidebar-link reco-side-七、etcd相关" data-v-cb1513f6>七、etcd相关</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_7-1、etcdlived" class="sidebar-link reco-side-_7-1、etcdlived" data-v-cb1513f6>7.1、Etcdlived</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_7-2、etcdcluseterunavailable" class="sidebar-link reco-side-_7-2、etcdcluseterunavailable" data-v-cb1513f6>7.2、EtcdCluseterUnavailable</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_7-3、etcdleadercheck" class="sidebar-link reco-side-_7-3、etcdleadercheck" data-v-cb1513f6>7.3、EtcdLeaderCheck</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_7-4、etcdbackendfsync" class="sidebar-link reco-side-_7-4、etcdbackendfsync" data-v-cb1513f6>7.4、EtcdBackendFsync</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_7-5、etcdwalfsync" class="sidebar-link reco-side-_7-5、etcdwalfsync" data-v-cb1513f6>7.5、EtcdWalFsync</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_7-6、etcddbsize" class="sidebar-link reco-side-_7-6、etcddbsize" data-v-cb1513f6>7.6、EtcdDbSize</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_7-7、etcdgrpc" class="sidebar-link reco-side-_7-7、etcdgrpc" data-v-cb1513f6>7.7、EtcdGrpc</a></li><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#八、coredns相关" class="sidebar-link reco-side-八、coredns相关" data-v-cb1513f6>八、CoreDNS相关</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_8-1、dnsrequest" class="sidebar-link reco-side-_8-1、dnsrequest" data-v-cb1513f6>8.1、DnsRequest</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_8-2、dnsrequestfaild" class="sidebar-link reco-side-_8-2、dnsrequestfaild" data-v-cb1513f6>8.2、DnsRequestFaild</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_8-3、dnspanic" class="sidebar-link reco-side-_8-3、dnspanic" data-v-cb1513f6>8.3、DnsPanic</a></li><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#九、node相关" class="sidebar-link reco-side-九、node相关" data-v-cb1513f6>九、Node相关</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_9-1、nodeclocknotsynchronising" class="sidebar-link reco-side-_9-1、nodeclocknotsynchronising" data-v-cb1513f6>9.1、NodeClockNotSynchronising</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_9-2、nodeclockskewdetected" class="sidebar-link reco-side-_9-2、nodeclockskewdetected" data-v-cb1513f6>9.2、NodeClockSkewDetected</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_9-3、nodehighnumberconntrackentriesused" class="sidebar-link reco-side-_9-3、nodehighnumberconntrackentriesused" data-v-cb1513f6>9.3、NodeHighNumberConntrackEntriesUsed</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_9-4、nodenetworkreceiveerrs" class="sidebar-link reco-side-_9-4、nodenetworkreceiveerrs" data-v-cb1513f6>9.4、NodeNetworkReceiveErrs</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_9-5、nodenetworktransmiterrs" class="sidebar-link reco-side-_9-5、nodenetworktransmiterrs" data-v-cb1513f6>9.5、NodeNetworkTransmitErrs</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_9-6、nodefilesystemalmostoutoffiles" class="sidebar-link reco-side-_9-6、nodefilesystemalmostoutoffiles" data-v-cb1513f6>9.6、NodeFilesystemAlmostOutOfFiles</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_9-7、nodefilesystemfilesfillingup" class="sidebar-link reco-side-_9-7、nodefilesystemfilesfillingup" data-v-cb1513f6>9.7、NodeFilesystemFilesFillingUp</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_9-8、nodefilesystemalmostoutofspace" class="sidebar-link reco-side-_9-8、nodefilesystemalmostoutofspace" data-v-cb1513f6>9.8、NodeFilesystemAlmostOutOfSpace</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_9-9、nodefilesystemspacefillingup" class="sidebar-link reco-side-_9-9、nodefilesystemspacefillingup" data-v-cb1513f6>9.9、NodeFilesystemSpaceFillingUp</a></li><li class="level-2" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#十、pod相关" class="sidebar-link reco-side-十、pod相关" data-v-cb1513f6>十、Pod相关</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_10-1、kubepodcrashlooping" class="sidebar-link reco-side-_10-1、kubepodcrashlooping" data-v-cb1513f6>10.1、KubePodCrashLooping</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_10-2、kubepodnotready" class="sidebar-link reco-side-_10-2、kubepodnotready" data-v-cb1513f6>10.2、KubePodNotReady</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_10-3、kubedeploymentgenerationmismatch" class="sidebar-link reco-side-_10-3、kubedeploymentgenerationmismatch" data-v-cb1513f6>10.3、KubeDeploymentGenerationMismatch</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_10-4、kubedeploymentreplicasmismatch" class="sidebar-link reco-side-_10-4、kubedeploymentreplicasmismatch" data-v-cb1513f6>10.4、KubeDeploymentReplicasMismatch</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_10-5、kubestatefulsetreplicasmismatch" class="sidebar-link reco-side-_10-5、kubestatefulsetreplicasmismatch" data-v-cb1513f6>10.5、KubeStatefulSetReplicasMismatch</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_10-6、kubestatefulsetupdatenotrolledout" class="sidebar-link reco-side-_10-6、kubestatefulsetupdatenotrolledout" data-v-cb1513f6>10.6、KubeStatefulSetUpdateNotRolledOut</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_10-7、kubedaemonsetrolloutstuck" class="sidebar-link reco-side-_10-7、kubedaemonsetrolloutstuck" data-v-cb1513f6>10.7、KubeDaemonSetRolloutStuck</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_10-8、kubedaemonsetmisscheduled" class="sidebar-link reco-side-_10-8、kubedaemonsetmisscheduled" data-v-cb1513f6>10.8、KubeDaemonSetMisScheduled</a></li><li class="level-3" data-v-cb1513f6><a href="/views/Official_Accounts/10%20%E7%BB%84%E5%B8%B8%E7%94%A8%E7%9B%91%E6%8E%A7%20K8S%20%E6%80%A7%E8%83%BD%E7%9A%84%20Prometheus%20%E6%8C%87%E6%A0%87.html#_10-9、kubecontainerwaiting" class="sidebar-link reco-side-_10-9、kubecontainerwaiting" data-v-cb1513f6>10.9、KubeContainerWaiting</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      我是Brains,欢迎你的关注 
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="200px" height="250" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><canvas id="vuepress-canvas-cursor"></canvas><!----></div></div>
    <script src="/assets/js/app.cd5fa041.js" defer></script><script src="/assets/js/3.ee7e7098.js" defer></script><script src="/assets/js/1.277d6ebc.js" defer></script><script src="/assets/js/35.6b05b4ad.js" defer></script>
  </body>
</html>
